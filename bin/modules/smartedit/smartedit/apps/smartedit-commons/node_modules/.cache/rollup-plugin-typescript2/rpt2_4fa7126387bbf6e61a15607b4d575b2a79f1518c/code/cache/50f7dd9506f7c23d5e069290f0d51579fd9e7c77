{"code":"import { __decorate, __metadata, __param } from \"tslib\";\r\nimport { forwardRef, Component, ElementRef, Inject, Injector, Input, ViewChild } from '@angular/core';\r\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\r\nimport { SeDowngradeComponent } from '../../../di';\r\nimport { GenericEditorComponent } from '../GenericEditorComponent';\r\nimport { INTERNAL_PROP_NAME } from '../models';\r\nimport { GENERIC_EDITOR_WIDGET_DATA } from './tokens';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"GenericEditorFieldComponent\", {\r\n    selector: 'se-generic-editor-field',\r\n    providers: [\r\n        {\r\n            provide: NG_VALUE_ACCESSOR,\r\n            useExisting: forwardRef(function () { return /* @ngInject */ GenericEditorFieldComponent_1; }),\r\n            multi: true\r\n        }\r\n    ],\r\n    template: \"<div [attr.validation-id]=\\\"field.qualifier\\\" class=\\\"ySEField\\\"><div *ngIf=\\\"field.template\\\"><div #widget></div></div><ng-container *ngIf=\\\"field.component\\\"><ng-container *ngComponentOutlet=\\\"field.component; injector: widgetInjector\\\"></ng-container></ng-container><se-generic-editor-field-messages [field]=\\\"field\\\" [qualifier]=\\\"qualifier\\\"></se-generic-editor-field-messages><div *ngIf=\\\"field.postfix\\\" class=\\\"ySEText ySEFieldPostfix\\\">{{ field.postfix | translate }}</div></div>\"\r\n});\r\nvar /* @ngInject */ GenericEditorFieldComponent = /** @class */ (function () {\r\n    function /* @ngInject */ GenericEditorFieldComponent(elementRef, injector, ge) {\r\n        this.elementRef = elementRef;\r\n        this.injector = injector;\r\n        this.ge = ge;\r\n    }\r\n    /* @ngInject */ GenericEditorFieldComponent_1 = /* @ngInject */ GenericEditorFieldComponent;\r\n    /* @ngInject */ GenericEditorFieldComponent.prototype.writeValue = function (value) {\r\n        this.model[this.qualifier] = value;\r\n    };\r\n    /* @ngInject */ GenericEditorFieldComponent.prototype.registerOnChange = function (fn) {\r\n        this._onChange = fn;\r\n    };\r\n    /* @ngInject */ GenericEditorFieldComponent.prototype.registerOnTouched = function (fn) {\r\n        this._onTouched = fn;\r\n    };\r\n    /* @ngInject */ GenericEditorFieldComponent.prototype.ngOnInit = function () {\r\n        var _this = this;\r\n        this.createInjector();\r\n        this._unWatch = this.model[INTERNAL_PROP_NAME].watch(this.qualifier, function (value) {\r\n            if (_this._onChange && _this._onTouched) {\r\n                _this._onTouched();\r\n                _this._onChange(value);\r\n            }\r\n        });\r\n    };\r\n    /* @ngInject */ GenericEditorFieldComponent.prototype.ngOnDestroy = function () {\r\n        this._unWatch();\r\n    };\r\n    /* @ngInject */ GenericEditorFieldComponent.prototype.ngAfterViewInit = function () {\r\n        var _this = this;\r\n        if (!this.field.template) {\r\n            return;\r\n        }\r\n        var element = document.createElement('se-template-ge-widget');\r\n        this.elementRef.nativeElement.editor = this.ge.editor;\r\n        this.elementRef.nativeElement.model = this.model;\r\n        this.elementRef.nativeElement.field = this.field;\r\n        this.elementRef.nativeElement.qualifier = this.qualifier;\r\n        this.elementRef.nativeElement.id = this.id;\r\n        this.elementRef.nativeElement.editorStackId = this.ge.editor.editorStackId;\r\n        this.elementRef.nativeElement.isFieldDisabled = function () { return _this.isFieldDisabled(); };\r\n        this.elementRef.nativeElement.$ctrl = this;\r\n        this.geWidget.nativeElement.appendChild(element);\r\n    };\r\n    /* @ngInject */ GenericEditorFieldComponent.prototype.isFieldDisabled = function () {\r\n        var isEnabled = this.field.editable;\r\n        if (this.field.localized) {\r\n            isEnabled = this.field.editable && this.field.isLanguageEnabledMap[this.qualifier];\r\n        }\r\n        return !isEnabled;\r\n    };\r\n    /* @ngInject */ GenericEditorFieldComponent.prototype.createInjector = function () {\r\n        var _this = this;\r\n        this.widgetInjector = Injector.create({\r\n            parent: this.injector,\r\n            providers: [\r\n                {\r\n                    provide: GENERIC_EDITOR_WIDGET_DATA,\r\n                    useValue: {\r\n                        id: this.id,\r\n                        field: this.field,\r\n                        model: this.model,\r\n                        editor: this.ge.editor,\r\n                        qualifier: this.qualifier,\r\n                        isFieldDisabled: function () { return _this.isFieldDisabled(); }\r\n                    }\r\n                }\r\n            ]\r\n        });\r\n    };\r\n    var /* @ngInject */ GenericEditorFieldComponent_1;\r\n    __decorate([\r\n        Input(),\r\n        __metadata(\"design:type\", Object)\r\n    ], /* @ngInject */ GenericEditorFieldComponent.prototype, \"field\", void 0);\r\n    __decorate([\r\n        Input(),\r\n        __metadata(\"design:type\", Object)\r\n    ], /* @ngInject */ GenericEditorFieldComponent.prototype, \"model\", void 0);\r\n    __decorate([\r\n        Input(),\r\n        __metadata(\"design:type\", String)\r\n    ], /* @ngInject */ GenericEditorFieldComponent.prototype, \"qualifier\", void 0);\r\n    __decorate([\r\n        Input(),\r\n        __metadata(\"design:type\", String)\r\n    ], /* @ngInject */ GenericEditorFieldComponent.prototype, \"id\", void 0);\r\n    __decorate([\r\n        ViewChild('widget', { read: ElementRef, static: false }),\r\n        __metadata(\"design:type\", ElementRef)\r\n    ], /* @ngInject */ GenericEditorFieldComponent.prototype, \"geWidget\", void 0);\r\n    /* @ngInject */ GenericEditorFieldComponent = /* @ngInject */ GenericEditorFieldComponent_1 = __decorate([\r\n        SeDowngradeComponent(),\r\n        Component({\r\n            selector: 'se-generic-editor-field',\r\n            providers: [\r\n                {\r\n                    provide: NG_VALUE_ACCESSOR,\r\n                    useExisting: forwardRef(function () { return /* @ngInject */ GenericEditorFieldComponent_1; }),\r\n                    multi: true\r\n                }\r\n            ],\r\n            template: \"<div [attr.validation-id]=\\\"field.qualifier\\\" class=\\\"ySEField\\\"><div *ngIf=\\\"field.template\\\"><div #widget></div></div><ng-container *ngIf=\\\"field.component\\\"><ng-container *ngComponentOutlet=\\\"field.component; injector: widgetInjector\\\"></ng-container></ng-container><se-generic-editor-field-messages [field]=\\\"field\\\" [qualifier]=\\\"qualifier\\\"></se-generic-editor-field-messages><div *ngIf=\\\"field.postfix\\\" class=\\\"ySEText ySEFieldPostfix\\\">{{ field.postfix | translate }}</div></div>\"\r\n        }),\r\n        __param(2, Inject(forwardRef(function () { return GenericEditorComponent; }))),\r\n        __metadata(\"design:paramtypes\", [ElementRef,\r\n            Injector,\r\n            GenericEditorComponent])\r\n    ], /* @ngInject */ GenericEditorFieldComponent);\r\n    return /* @ngInject */ GenericEditorFieldComponent;\r\n}());\r\nexport { /* @ngInject */ GenericEditorFieldComponent };\r\n//# sourceMappingURL=GenericEditorFieldComponent.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/forms@8.2.14_e9fbe5720e9434eb9ae0f6720f1ca3f4/node_modules/@angular/forms/forms.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/di/index.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/components/genericEditor/GenericEditorComponent.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/components/genericEditor/models/index.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/components/genericEditor/types.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/components/genericEditor/components/tokens.ts"],"map":"{\"version\":3,\"file\":\"GenericEditorFieldComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/components/genericEditor/components/GenericEditorFieldComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/components/genericEditor/components/GenericEditorFieldComponent.d.ts","writeByteOrderMark":false,"text":"import { ElementRef, Injector, OnDestroy } from '@angular/core';\r\nimport { ControlValueAccessor } from '@angular/forms';\r\nimport { Payload } from '@smart/utils';\r\nimport { GenericEditorComponent } from '../GenericEditorComponent';\r\nimport { GenericEditorField, GenericEditorWidgetData, IGenericEditor } from '../types';\r\nexport interface GenericEditorFieldComponentScope<T = any, D = any> extends GenericEditorWidgetData<D> {\r\n    editor?: IGenericEditor;\r\n    id: string;\r\n    editorStackId: string;\r\n    $ctrl?: GenericEditorFieldComponent<T>;\r\n}\r\nexport declare class GenericEditorFieldComponent<T> implements ControlValueAccessor, OnDestroy {\r\n    private elementRef;\r\n    private injector;\r\n    ge: GenericEditorComponent;\r\n    field: GenericEditorField;\r\n    model: Payload;\r\n    qualifier: string;\r\n    id: string;\r\n    geWidget: ElementRef;\r\n    widgetInjector: Injector;\r\n    private _onChange;\r\n    private _onTouched;\r\n    private _unWatch;\r\n    constructor(elementRef: ElementRef, injector: Injector, ge: GenericEditorComponent);\r\n    writeValue(value: Payload): void;\r\n    registerOnChange(fn: (value: Payload) => void): void;\r\n    registerOnTouched(fn: () => void): void;\r\n    ngOnInit(): void;\r\n    ngOnDestroy(): void;\r\n    ngAfterViewInit(): void;\r\n    isFieldDisabled(): boolean;\r\n    private createInjector;\r\n}\r\n"}}
