{"code":"import { __awaiter, __decorate, __generator, __metadata, __param } from \"tslib\";\r\nimport { ChangeDetectionStrategy, Component, Inject } from '@angular/core';\r\nimport { EVENT_CONTENT_CATALOG_UPDATE, ICatalogService, IModalService, LogService, SeDowngradeComponent, SystemEventService, DROPDOWN_MENU_ITEM_DATA } from 'smarteditcommons';\r\nimport { PageSynchronizationPanelModalComponent } from '../../../synchronize';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"SyncPageItemComponent\", {\r\n    selector: 'se-sync-page-item',\r\n    template: \"<div *seHasOperationPermission=\\\"syncPagePermission\\\"><a class=\\\"se-dropdown-item fd-menu__item\\\" (click)=\\\"sync()\\\" translate=\\\"se.cms.actionitem.page.sync\\\"></a></div>\",\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n});\r\nvar /* @ngInject */ SyncPageItemComponent = /** @class */ (function () {\r\n    function /* @ngInject */ SyncPageItemComponent(dropdownMenuData, catalogService, systemEventService, modalService, logService) {\r\n        this.dropdownMenuData = dropdownMenuData;\r\n        this.catalogService = catalogService;\r\n        this.systemEventService = systemEventService;\r\n        this.modalService = modalService;\r\n        this.logService = logService;\r\n    }\r\n    /* @ngInject */ SyncPageItemComponent.prototype.ngOnInit = function () {\r\n        this.pageInfo = this.dropdownMenuData.selectedItem;\r\n        this.syncPagePermission = [\r\n            {\r\n                names: ['se.act.on.page.in.workflow'],\r\n                context: {\r\n                    pageInfo: this.pageInfo\r\n                }\r\n            }\r\n        ];\r\n    };\r\n    /* @ngInject */ SyncPageItemComponent.prototype.sync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var uriContext, error_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.catalogService.retrieveUriContext()];\r\n                    case 1:\r\n                        uriContext = _a.sent();\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        _a.trys.push([2, 4, , 5]);\r\n                        return [4 /*yield*/, this.modalService\r\n                                .open({\r\n                                component: PageSynchronizationPanelModalComponent,\r\n                                templateConfig: {\r\n                                    title: 'se.cms.synchronization.pagelist.modal.title.prefix',\r\n                                    titleSuffix: 'se.cms.pageeditormodal.editpagetab.title'\r\n                                },\r\n                                config: {\r\n                                    modalPanelClass: 'modal-md'\r\n                                },\r\n                                data: {\r\n                                    cmsPage: this.pageInfo,\r\n                                    uriContext: uriContext\r\n                                }\r\n                            })\r\n                                .afterClosed.toPromise()];\r\n                    case 3:\r\n                        _a.sent();\r\n                        this.systemEventService.publishAsync(EVENT_CONTENT_CATALOG_UPDATE);\r\n                        return [3 /*break*/, 5];\r\n                    case 4:\r\n                        error_1 = _a.sent();\r\n                        this.logService.debug('Page Synchronization Panel Modal dismissed', error_1);\r\n                        return [3 /*break*/, 5];\r\n                    case 5: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ SyncPageItemComponent = __decorate([\r\n        SeDowngradeComponent(),\r\n        Component({\r\n            selector: 'se-sync-page-item',\r\n            template: \"<div *seHasOperationPermission=\\\"syncPagePermission\\\"><a class=\\\"se-dropdown-item fd-menu__item\\\" (click)=\\\"sync()\\\" translate=\\\"se.cms.actionitem.page.sync\\\"></a></div>\",\r\n            changeDetection: ChangeDetectionStrategy.OnPush\r\n        }),\r\n        __param(0, Inject(DROPDOWN_MENU_ITEM_DATA)),\r\n        __metadata(\"design:paramtypes\", [Object, ICatalogService,\r\n            SystemEventService,\r\n            IModalService,\r\n            LogService])\r\n    ], /* @ngInject */ SyncPageItemComponent);\r\n    return /* @ngInject */ SyncPageItemComponent;\r\n}());\r\nexport { /* @ngInject */ SyncPageItemComponent };\r\n//# sourceMappingURL=SyncPageItemComponent.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/synchronize/types.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/synchronize/index.ts"],"map":"{\"version\":3,\"file\":\"SyncPageItemComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../../src/components/pages/pageItems/syncPageItem/SyncPageItemComponent.ts\"],\"names\":[],\"mappings\":\";AACA,OAAO,EAAE,uBAAuB,EAAE,SAAS,EAAU,MAAM,EAAE,MAAM,eAAe,CAAC;AAGnF,OAAO,EACH,4BAA4B,EAC5B,eAAe,EACf,aAAa,EACb,UAAU,EAEV,oBAAoB,EACpB,kBAAkB,EAElB,uBAAuB,EAC1B,MAAM,kBAAkB,CAAC;AAC1B,OAAO,EAAE,sCAAsC,EAAE,MAAM,sBAAsB,CAAC;+EAInE;IACP,QAAQ,EAAE,mBAAmB;IAC7B,QAAQ,EAAE,2KAAmK;IAC7K,eAAe,EAAE,uBAAuB,CAAC,MAAM;CAClD;AACD;IAKI,+CAC6C,gBAAuC,EACxE,cAA+B,EAC/B,kBAAsC,EACtC,YAA2B,EAC3B,UAAsB;QAJW,qBAAgB,GAAhB,gBAAgB,CAAuB;QACxE,mBAAc,GAAd,cAAc,CAAiB;QAC/B,uBAAkB,GAAlB,kBAAkB,CAAoB;QACtC,iBAAY,GAAZ,YAAY,CAAe;QAC3B,eAAU,GAAV,UAAU,CAAY;IAC/B,CAAC;IAEJ,wDAAQ,GAAR;QACI,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC;QACnD,IAAI,CAAC,kBAAkB,GAAG;YACtB;gBACI,KAAK,EAAE,CAAC,4BAA4B,CAAC;gBACrC,OAAO,EAAE;oBACL,QAAQ,EAAE,IAAI,CAAC,QAAQ;iBAC1B;aACJ;SACJ,CAAC;IACN,CAAC;IAEY,oDAAI,GAAjB;;;;;4BACuB,qBAAM,IAAI,CAAC,cAAc,CAAC,kBAAkB,EAAE,EAAA;;wBAA3D,UAAU,GAAG,SAA8C;;;;wBAG7D,qBAAM,IAAI,CAAC,YAAY;iCAClB,IAAI,CAAoC;gCACrC,SAAS,EAAE,sCAAsC;gCACjD,cAAc,EAAE;oCACZ,KAAK,EAAE,oDAAoD;oCAC3D,WAAW,EAAE,0CAA0C;iCAC1D;gCACD,MAAM,EAAE;oCACJ,eAAe,EAAE,UAAU;iCAC9B;gCACD,IAAI,EAAE;oCACF,OAAO,EAAE,IAAI,CAAC,QAAQ;oCACtB,UAAU,YAAA;iCACb;6BACJ,CAAC;iCACD,WAAW,CAAC,SAAS,EAAE,EAAA;;wBAf5B,SAe4B,CAAC;wBAE7B,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,4BAA4B,CAAC,CAAC;;;;wBAEnE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,4CAA4C,EAAE,OAAK,CAAC,CAAC;;;;;;KAElF;IAlDL;QANC,oBAAoB,EAAE;QACtB,SAAS,CAAC;YACP,QAAQ,EAAE,mBAAmB;YAC7B,QAAQ,EAAE,2KAAmK;YAC7K,eAAe,EAAE,uBAAuB,CAAC,MAAM;SAClD,CAAC;QAOO,WAAA,MAAM,CAAC,uBAAuB,CAAC,CAAA;iDACR,eAAe;YACX,kBAAkB;YACxB,aAAa;YACf,UAAU;6CAyCrC;IAAD,4CAAC;CAAA,AAnDD,IAmDC\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/components/pages/pageItems/syncPageItem/SyncPageItemComponent.d.ts","writeByteOrderMark":false,"text":"import { OnInit } from '@angular/core';\r\nimport { ICMSPage } from 'cmscommons';\r\nimport { ICatalogService, IModalService, LogService, MultiNamePermissionContext, SystemEventService, IDropdownMenuItemData } from 'smarteditcommons';\r\nexport declare class SyncPageItemComponent implements OnInit {\r\n    private dropdownMenuData;\r\n    private catalogService;\r\n    private systemEventService;\r\n    private modalService;\r\n    private logService;\r\n    pageInfo: ICMSPage;\r\n    syncPagePermission: MultiNamePermissionContext[];\r\n    constructor(dropdownMenuData: IDropdownMenuItemData, catalogService: ICatalogService, systemEventService: SystemEventService, modalService: IModalService, logService: LogService);\r\n    ngOnInit(): void;\r\n    sync(): Promise<void>;\r\n}\r\n"}}
