{"code":"import { __awaiter, __decorate, __generator, __metadata } from \"tslib\";\r\n/*\r\n * Copyright (c) 2021 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { COMPONENT_REMOVED_EVENT, IRemoveComponentService, PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI } from 'cmscommons';\r\nimport { GatewayProxied, IAlertService, IRenderService, IRestServiceFactory, SeDowngradeService, SystemEventService } from 'smarteditcommons';\r\nimport { ComponentInfoService } from './ComponentInfoService';\r\nvar /* @ngInject */ RemoveComponentService = /** @class */ (function () {\r\n    function /* @ngInject */ RemoveComponentService(restServiceFactory, alertService, componentInfoService, renderService, systemEventService) {\r\n        this.alertService = alertService;\r\n        this.componentInfoService = componentInfoService;\r\n        this.renderService = renderService;\r\n        this.systemEventService = systemEventService;\r\n        this.resource = restServiceFactory.get(PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI + \"/contentslots/:slotId/components/:componentId\", 'componentId');\r\n    }\r\n    /* @ngInject */ RemoveComponentService.prototype.removeComponent = function (configuration) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, component;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _b.trys.push([0, 2, , 3]);\r\n                        return [4 /*yield*/, this.resource.remove({\r\n                                slotId: configuration.slotId,\r\n                                componentId: configuration.slotOperationRelatedId\r\n                            })];\r\n                    case 1:\r\n                        _b.sent();\r\n                        return [3 /*break*/, 3];\r\n                    case 2:\r\n                        _a = _b.sent();\r\n                        this.alertService.showDanger({\r\n                            message: 'se.cms.remove.component.failed',\r\n                            messagePlaceholders: {\r\n                                slotID: configuration.slotId,\r\n                                componentID: configuration.slotOperationRelatedId\r\n                            }\r\n                        });\r\n                        return [2 /*return*/, Promise.reject()];\r\n                    case 3: return [4 /*yield*/, this.componentInfoService.getById(configuration.componentUuid)];\r\n                    case 4:\r\n                        component = _b.sent();\r\n                        this.systemEventService.publish(COMPONENT_REMOVED_EVENT, component);\r\n                        this.renderService.renderSlots(configuration.slotId);\r\n                        return [2 /*return*/, this.componentInfoService.getById(configuration.componentUuid, true)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ RemoveComponentService = __decorate([\r\n        GatewayProxied('removeComponent'),\r\n        SeDowngradeService(IRemoveComponentService),\r\n        __metadata(\"design:paramtypes\", [IRestServiceFactory,\r\n            IAlertService,\r\n            ComponentInfoService,\r\n            IRenderService,\r\n            SystemEventService])\r\n    ], /* @ngInject */ RemoveComponentService);\r\n    return /* @ngInject */ RemoveComponentService;\r\n}());\r\nexport { /* @ngInject */ RemoveComponentService };\r\n//# sourceMappingURL=RemoveComponentServiceInner.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit/src/services/ComponentInfoService.ts"],"map":"{\"version\":3,\"file\":\"RemoveComponentServiceInner.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/services/RemoveComponentServiceInner.ts\"],\"names\":[],\"mappings\":\";AAAA;;GAEG;AACH,OAAO,EACH,uBAAuB,EAEvB,uBAAuB,EACvB,yCAAyC,EAE5C,MAAM,YAAY,CAAC;AACpB,OAAO,EACH,cAAc,EACd,aAAa,EACb,cAAc,EAEd,mBAAmB,EACnB,kBAAkB,EAClB,kBAAkB,EACrB,MAAM,kBAAkB,CAAC;AAC1B,OAAO,EAAE,oBAAoB,EAAE,MAAM,wBAAwB,CAAC;AAI9D;IAEI,gDACI,kBAAuC,EAC/B,YAA2B,EAC3B,oBAA0C,EAC1C,aAA6B,EAC7B,kBAAsC;QAHtC,iBAAY,GAAZ,YAAY,CAAe;QAC3B,yBAAoB,GAApB,oBAAoB,CAAsB;QAC1C,kBAAa,GAAb,aAAa,CAAgB;QAC7B,uBAAkB,GAAlB,kBAAkB,CAAoB;QAE9C,IAAI,CAAC,QAAQ,GAAG,kBAAkB,CAAC,GAAG,CAC/B,yCAAyC,kDAA+C,EAC3F,aAAa,CAChB,CAAC;IACN,CAAC;IAEY,gEAAe,GAA5B,UAA6B,aAAkC;;;;;;;wBAEvD,qBAAM,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;gCACvB,MAAM,EAAE,aAAa,CAAC,MAAM;gCAC5B,WAAW,EAAE,aAAa,CAAC,sBAAsB;6BACpD,CAAC,EAAA;;wBAHF,SAGE,CAAC;;;;wBAEH,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC;4BACzB,OAAO,EAAE,gCAAgC;4BACzC,mBAAmB,EAAE;gCACjB,MAAM,EAAE,aAAa,CAAC,MAAM;gCAC5B,WAAW,EAAE,aAAa,CAAC,sBAAsB;6BACpD;yBACJ,CAAC,CAAC;wBACH,sBAAO,OAAO,CAAC,MAAM,EAAE,EAAC;4BAIV,qBAAM,IAAI,CAAC,oBAAoB,CAAC,OAAO,CAAC,aAAa,CAAC,aAAa,CAAC,EAAA;;wBAAhF,SAAS,GAAG,SAAoE;wBACtF,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,uBAAuB,EAAE,SAAS,CAAC,CAAC;wBAEpE,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;wBAErD,sBAAO,IAAI,CAAC,oBAAoB,CAAC,OAAO,CAAC,aAAa,CAAC,aAAa,EAAE,IAAI,CAAC,EAAC;;;;KAC/E;IAvCL;QAFC,cAAc,CAAC,iBAAiB,CAAC;QACjC,kBAAkB,CAAC,uBAAuB,CAAC;yCAIhB,mBAAmB;YACjB,aAAa;YACL,oBAAoB;YAC3B,cAAc;YACT,kBAAkB;8CAiCrD;IAAD,6CAAC;CAAA,AAxCD,IAwCC\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit/services/RemoveComponentServiceInner.d.ts","writeByteOrderMark":false,"text":"import { ICMSComponent, RemoveComponentInfo } from 'cmscommons';\r\nimport { IAlertService, IRenderService, IRestServiceFactory, SystemEventService } from 'smarteditcommons';\r\nimport { ComponentInfoService } from './ComponentInfoService';\r\nexport declare class RemoveComponentService {\r\n    private alertService;\r\n    private componentInfoService;\r\n    private renderService;\r\n    private systemEventService;\r\n    private resource;\r\n    constructor(restServiceFactory: IRestServiceFactory, alertService: IAlertService, componentInfoService: ComponentInfoService, renderService: IRenderService, systemEventService: SystemEventService);\r\n    removeComponent(configuration: RemoveComponentInfo): Promise<ICMSComponent>;\r\n}\r\n"}}
