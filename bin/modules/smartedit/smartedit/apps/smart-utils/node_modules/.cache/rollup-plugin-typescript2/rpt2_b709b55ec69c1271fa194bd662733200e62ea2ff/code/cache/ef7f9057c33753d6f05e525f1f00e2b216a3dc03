{"code":"/*\r\n * Copyright (c) 2021 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\n/**\r\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n * @module smartutils\r\n */\r\nimport { HttpErrorResponse, HttpParams, HttpResponse } from '@angular/common/http';\r\nimport * as lodash from 'lodash';\r\nimport { from, throwError, Observable } from 'rxjs';\r\nimport { switchMap } from 'rxjs/operators';\r\nimport { stringUtils } from './string-utils';\r\nvar HttpUtils = /** @class */ (function () {\r\n    function HttpUtils() {\r\n    }\r\n    HttpUtils.prototype.isGET = function (request) {\r\n        return request.method === 'GET';\r\n    };\r\n    HttpUtils.prototype.isRequestOfAccept = function (request, accept) {\r\n        return (!!request.headers &&\r\n            !!request.headers.get('Accept') &&\r\n            (request.headers.get('Accept') || '').includes(accept));\r\n    };\r\n    HttpUtils.prototype.isResponseOfContentType = function (response, contentType) {\r\n        return (!!response.headers &&\r\n            !!response.headers.get('Content-type') &&\r\n            (response.headers.get('Content-type') || '').indexOf(contentType) === 0);\r\n    };\r\n    HttpUtils.prototype.isHTMLRequest = function (request, response) {\r\n        return (this.isGET(request) &&\r\n            (this.isRequestOfAccept(request, 'text/html') ||\r\n                /.+\\.html$/.test(request.url) ||\r\n                /.+\\.html\\?/.test(request.url)));\r\n    };\r\n    HttpUtils.prototype.isJSONRequest = function (request, response) {\r\n        return (this.isGET(request) &&\r\n            ((response && this.isResponseOfContentType(response, 'json')) ||\r\n                /.+\\.json$/.test(request.url)));\r\n    };\r\n    HttpUtils.prototype.isJSRequest = function (request) {\r\n        return this.isGET(request) && /.+\\.js$/.test(request.url);\r\n    };\r\n    HttpUtils.prototype.isCRUDRequest = function (request, response) {\r\n        return (!this.isHTMLRequest(request, response) &&\r\n            !this.isJSONRequest(request, response) &&\r\n            !this.isJSRequest(request));\r\n    };\r\n    HttpUtils.prototype.transformHttpParams = function (params, substitutionMap) {\r\n        return new HttpParams({\r\n            fromObject: JSON.parse(stringUtils.replaceAll(JSON.stringify(this.copyHttpParamsOrHeaders(params)), substitutionMap))\r\n        });\r\n    };\r\n    HttpUtils.prototype.copyHttpParamsOrHeaders = function (params) {\r\n        var copy = {};\r\n        params.keys().forEach(function (key) {\r\n            var values = params.getAll(key);\r\n            if (values !== null) {\r\n                copy[key] = values.length > 1 ? values : values[0];\r\n            }\r\n        });\r\n        return copy;\r\n    };\r\n    HttpUtils.prototype.buildHttpResponse = function (originalRequest, _statusAndPayload) {\r\n        var statusAndPayloadPromise = Promise.resolve(_statusAndPayload);\r\n        return from(statusAndPayloadPromise).pipe(switchMap(function (statusAndPayload) {\r\n            var status = statusAndPayload[0];\r\n            var body = statusAndPayload[1];\r\n            var requestClone = originalRequest.clone({\r\n                body: body\r\n            });\r\n            lodash.merge(requestClone, { status: status });\r\n            if (200 <= status && status < 300) {\r\n                return new Observable(function (ob) {\r\n                    ob.next(new HttpResponse(requestClone));\r\n                });\r\n            }\r\n            else {\r\n                return throwError(new HttpErrorResponse(lodash.merge(requestClone, { error: body })));\r\n            }\r\n        }));\r\n    };\r\n    return HttpUtils;\r\n}());\r\nexport { HttpUtils };\r\nexport var httpUtils = new HttpUtils();\r\n//# sourceMappingURL=http-utils.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/common@8.2.14_@angular+core@8.2.14+rxjs@6.5.4/node_modules/@angular/common/http.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@types/lodash@4.14.159/node_modules/@types/lodash/ts3.1/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/rxjs@6.5.4/node_modules/rxjs/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/rxjs@6.5.4/node_modules/rxjs/operators/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/src/dtos/index.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/src/utils/string-utils.ts"],"map":"{\"version\":3,\"file\":\"http-utils.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/utils/http-utils.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/utils/http-utils.d.ts","writeByteOrderMark":false,"text":"/**\r\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n * @module smartutils\r\n */\r\nimport { HttpErrorResponse, HttpEvent, HttpHeaders, HttpParams, HttpRequest, HttpResponseBase } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { Payload, TypedMap } from '../dtos';\r\nexport declare class HttpUtils {\r\n    isGET(request: HttpRequest<any>): boolean;\r\n    isRequestOfAccept(request: HttpRequest<any>, accept: string): boolean;\r\n    isResponseOfContentType(response: HttpResponseBase, contentType: string): boolean;\r\n    isHTMLRequest(request: HttpRequest<any>, response?: HttpResponseBase): boolean;\r\n    isJSONRequest(request: HttpRequest<any>, response?: HttpResponseBase): boolean;\r\n    isJSRequest(request: HttpRequest<any>): boolean;\r\n    isCRUDRequest(request: HttpRequest<any>, response?: HttpErrorResponse): boolean;\r\n    transformHttpParams(params: HttpParams, substitutionMap: TypedMap<string>): HttpParams;\r\n    copyHttpParamsOrHeaders(params: HttpParams | HttpHeaders): TypedMap<string | string[]>;\r\n    buildHttpResponse<T = any>(originalRequest: HttpRequest<T>, _statusAndPayload: [number, Payload | Payload[]] | PromiseLike<[number, Payload | Payload[]]>): Observable<HttpEvent<any> | never>;\r\n}\r\nexport declare const httpUtils: HttpUtils;\r\n"}}
