{"code":"import { RouterModule } from '@angular/router';\r\nimport { NG_ROUTE_PREFIX, NG_ROUTE_WILDCARD } from 'smarteditcommons/utils/smarteditconstants';\r\n/**\r\n * The SeRouteService is a hybrid service that allows to add legacy (for AngularJS) as well as Angular routes to the application.\r\n * It also collects information about each route to build route related shortcut links.\r\n */\r\nvar SeRouteService = /** @class */ (function () {\r\n    function SeRouteService() {\r\n    }\r\n    /**\r\n     * **Deprecated since 2105, use [provideNgRoute]{@link SeRouteService#provideNgRoute}.**\r\n     *\r\n     * Must be called before `provideLegacyRoute`\r\n     *\r\n     * @deprecated\r\n     */\r\n    SeRouteService.init = function ($routeProvider) {\r\n        this.$routeProvider = $routeProvider;\r\n    };\r\n    /**\r\n     * **Deprecated since 2105, use [provideNgRoute]{@link SeRouteService#provideNgRoute}.**\r\n     *\r\n     * Adds new Angular route to the application. For more information please see documentation for RouterModule.forRoot.\r\n     * @returns A wrapper around an NgModule that associates it with the providers.\r\n     * @deprecated\r\n     */\r\n    SeRouteService.provideNgRoute = function (routes, config) {\r\n        this.validateNgRoutes(routes);\r\n        this.provideRouteShortcutConfigs(routes);\r\n        return RouterModule.forRoot(routes, config);\r\n    };\r\n    /**\r\n     * Adds new AngularJS route to the application.\r\n     */\r\n    SeRouteService.provideLegacyRoute = function (legacyRoute) {\r\n        if (!this.$routeProvider) {\r\n            throw new Error('Please call SeRouteService.init($routeProvider) first');\r\n        }\r\n        var seRoute = {\r\n            path: legacyRoute.path,\r\n            priority: legacyRoute.priority,\r\n            titleI18nKey: legacyRoute.titleI18nKey,\r\n            shortcutComponent: legacyRoute.shortcutComponent\r\n        };\r\n        this.provideRouteShortcutConfigs([seRoute]);\r\n        return this.$routeProvider.when(legacyRoute.path, legacyRoute.route);\r\n    };\r\n    Object.defineProperty(SeRouteService, \"routeShortcutConfigs\", {\r\n        /**\r\n         * Returns a list of all shortcut configs.\r\n         */\r\n        get: function () {\r\n            return this.routeShortcuts;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Populates the route shortcut list. It filters route shortcuts that cannot be used\r\n     * as shortcuts.\r\n     */\r\n    SeRouteService.provideRouteShortcutConfigs = function (routes) {\r\n        var _this = this;\r\n        var routeShortcutConfigs = [];\r\n        this.generateRouteShortcutConfig(routeShortcutConfigs, routes);\r\n        routeShortcutConfigs\r\n            .filter(function (routeShortcutConfig) {\r\n            return _this.canRegisterRouteShortcutConfig(routeShortcutConfig);\r\n        })\r\n            .forEach(function (routeShortcutConfig) {\r\n            _this.routeShortcuts.push(routeShortcutConfig);\r\n        });\r\n    };\r\n    /**\r\n     * Recursively reads the list of routes and calculates the full path for each route.\r\n     * Then populates the shortcut configs array with calculated data.\r\n     */\r\n    SeRouteService.generateRouteShortcutConfig = function (configs, routes, parent) {\r\n        var _this = this;\r\n        if (parent === void 0) { parent = ''; }\r\n        routes.forEach(function (route) {\r\n            if (route.path) {\r\n                var fullPath = _this.getFullPath(parent, route);\r\n                configs.push({\r\n                    fullPath: fullPath,\r\n                    titleI18nKey: route.titleI18nKey,\r\n                    priority: route.priority,\r\n                    shortcutComponent: route.shortcutComponent\r\n                });\r\n            }\r\n            if (route.children) {\r\n                var fullPath = _this.getFullPath(parent, route);\r\n                var currentPath = route.path ? fullPath : parent;\r\n                _this.generateRouteShortcutConfig(configs, route.children, currentPath);\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Returns the full path concatenating parent route with current one.\r\n     */\r\n    SeRouteService.getFullPath = function (parent, route) {\r\n        return parent ? parent + '/' + route.path : route.path;\r\n    };\r\n    /**\r\n     * Validates all Angular routes. Each route should start with NG_ROUTE_PREFIX.\r\n     */\r\n    SeRouteService.validateNgRoutes = function (routes) {\r\n        routes.forEach(function (route) {\r\n            if (route.path &&\r\n                !route.path.startsWith(NG_ROUTE_PREFIX) &&\r\n                !route.path.startsWith(NG_ROUTE_WILDCARD)) {\r\n                throw new Error('Angular route must start with ' + NG_ROUTE_PREFIX);\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Validates whether the route shortcut config can be registered.\r\n     * It's not registered if:\r\n     * - the fullPath is not provided\r\n     * - the fullPath contains placeholders that are not in CATALOG_AWARE_PATH_PLACEHOLDERS list.\r\n     */\r\n    SeRouteService.canRegisterRouteShortcutConfig = function (routeShortcutConfig) {\r\n        if (!routeShortcutConfig.fullPath) {\r\n            return false;\r\n        }\r\n        var fullPath = routeShortcutConfig.fullPath;\r\n        this.CATALOG_AWARE_PATH_PLACEHOLDERS.forEach(function (placeholder) {\r\n            fullPath = fullPath.replace(placeholder, '');\r\n        });\r\n        if (fullPath.indexOf(':') > -1) {\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    SeRouteService.CATALOG_AWARE_PATH_PLACEHOLDERS = [':siteId', ':catalogId', ':catalogVersion'];\r\n    SeRouteService.routeShortcuts = [];\r\n    return SeRouteService;\r\n}());\r\nexport { SeRouteService };\r\n//# sourceMappingURL=SeRouteService.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/router@8.2.14_e9fbe5720e9434eb9ae0f6720f1ca3f4/node_modules/@angular/router/router.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/utils/smarteditconstants.ts"],"map":"{\"version\":3,\"file\":\"SeRouteService.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/services/SeRouteService.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/services/SeRouteService.d.ts","writeByteOrderMark":false,"text":"/// <reference types=\"angular-route\" />\r\nimport { ModuleWithProviders } from '@angular/core';\r\nimport { ExtraOptions, Route, RouterModule } from '@angular/router';\r\n/**\r\n * The interface represents a shortcut component\r\n */\r\nexport interface SeShortcutComponent {\r\n    shortcutLink: SeRouteShortcutConfig;\r\n}\r\n/**\r\n * The shortcut configuration.\r\n * - titleI18nKey an optional title of the page shortcut link\r\n * - priority an optional number ranging from 0 to 1000 used for sorting where 0 is the first.\r\n * - shortcutComponent an optional component that will be rendered. This attribute is used only if titleI18nKey is not provided.\r\n * \t Must implement SeShortcutComponent interface.\r\n */\r\ninterface ShortcutConfig {\r\n    titleI18nKey?: string;\r\n    priority?: number;\r\n    shortcutComponent?: new (...args: any[]) => SeShortcutComponent;\r\n}\r\n/**\r\n * Shortcut route configuration.\r\n */\r\nexport interface SeRouteShortcutConfig extends ShortcutConfig {\r\n    fullPath: string;\r\n}\r\n/**\r\n * SmartEdit route configuration\r\n */\r\nexport interface SeRoute extends Route, ShortcutConfig {\r\n    children?: SeRoutes;\r\n}\r\n/**\r\n * AngularJS route configuration.\r\n */\r\nexport interface SeLegacyRoute extends ShortcutConfig {\r\n    path: string;\r\n    route: ng.route.IRoute;\r\n}\r\n/**\r\n * Type represents an array of route configuration.\r\n */\r\nexport declare type SeRoutes = SeRoute[];\r\n/**\r\n * The SeRouteService is a hybrid service that allows to add legacy (for AngularJS) as well as Angular routes to the application.\r\n * It also collects information about each route to build route related shortcut links.\r\n */\r\nexport declare class SeRouteService {\r\n    static CATALOG_AWARE_PATH_PLACEHOLDERS: string[];\r\n    private static $routeProvider;\r\n    private static routeShortcuts;\r\n    /**\r\n     * **Deprecated since 2105, use [provideNgRoute]{@link SeRouteService#provideNgRoute}.**\r\n     *\r\n     * Must be called before `provideLegacyRoute`\r\n     *\r\n     * @deprecated\r\n     */\r\n    static init($routeProvider: ng.route.IRouteProvider): void;\r\n    /**\r\n     * **Deprecated since 2105, use [provideNgRoute]{@link SeRouteService#provideNgRoute}.**\r\n     *\r\n     * Adds new Angular route to the application. For more information please see documentation for RouterModule.forRoot.\r\n     * @returns A wrapper around an NgModule that associates it with the providers.\r\n     * @deprecated\r\n     */\r\n    static provideNgRoute(routes: SeRoutes, config?: ExtraOptions): ModuleWithProviders<RouterModule>;\r\n    /**\r\n     * Adds new AngularJS route to the application.\r\n     */\r\n    static provideLegacyRoute(legacyRoute: SeLegacyRoute): ng.route.IRouteProvider;\r\n    /**\r\n     * Returns a list of all shortcut configs.\r\n     */\r\n    static get routeShortcutConfigs(): SeRouteShortcutConfig[];\r\n    /**\r\n     * Populates the route shortcut list. It filters route shortcuts that cannot be used\r\n     * as shortcuts.\r\n     */\r\n    private static provideRouteShortcutConfigs;\r\n    /**\r\n     * Recursively reads the list of routes and calculates the full path for each route.\r\n     * Then populates the shortcut configs array with calculated data.\r\n     */\r\n    private static generateRouteShortcutConfig;\r\n    /**\r\n     * Returns the full path concatenating parent route with current one.\r\n     */\r\n    private static getFullPath;\r\n    /**\r\n     * Validates all Angular routes. Each route should start with NG_ROUTE_PREFIX.\r\n     */\r\n    private static validateNgRoutes;\r\n    /**\r\n     * Validates whether the route shortcut config can be registered.\r\n     * It's not registered if:\r\n     * - the fullPath is not provided\r\n     * - the fullPath contains placeholders that are not in CATALOG_AWARE_PATH_PLACEHOLDERS list.\r\n     */\r\n    private static canRegisterRouteShortcutConfig;\r\n}\r\nexport {};\r\n"}}
