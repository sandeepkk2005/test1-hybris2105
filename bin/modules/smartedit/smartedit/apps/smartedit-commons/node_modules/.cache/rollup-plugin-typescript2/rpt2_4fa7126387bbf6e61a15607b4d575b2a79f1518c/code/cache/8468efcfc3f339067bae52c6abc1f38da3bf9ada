{"code":"/*\r\n * Copyright (c) 2021 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\n/**\r\n * @internal\r\n */\r\nexport var INTERNAL_PROP_NAME = '$$internal';\r\n/**\r\n * @internal\r\n * Adds an internal property on the component model for\r\n * watching property changes on an object.\r\n */\r\nvar InternalProperty = /** @class */ (function () {\r\n    function InternalProperty() {\r\n        this._map = new Map();\r\n    }\r\n    /**\r\n     * Watch property changes.\r\n     */\r\n    InternalProperty.prototype.watch = function (property, fn) {\r\n        var _this = this;\r\n        this._map.set(property, fn);\r\n        return function () {\r\n            _this._map.delete(property);\r\n        };\r\n    };\r\n    /**\r\n     * Trigger prop change.\r\n     *\r\n     * @param property\r\n     * @param value New value\r\n     */\r\n    InternalProperty.prototype.trigger = function (property, value) {\r\n        if (this._map.has(property)) {\r\n            this._map.get(property)(value);\r\n        }\r\n    };\r\n    return InternalProperty;\r\n}());\r\nexport { InternalProperty };\r\n/**\r\n * @internal\r\n * Creates a proxied object to listen on property changes\r\n * for backwards compatibility with object mutations made by\r\n * widgets. This is used to proxy the model data called component in the\r\n * generic editor. The component data is the model that is\r\n * used for submitting to the backend. Old widgets mutate the\r\n * properties of component object, thus there is not way to\r\n * listen on properties changes except for the use of the ES6 Proxy\r\n * API. Some properties that are watched inside of the GenericEditorField\r\n * update the value of the AbstractForm of Angular used for validation.\r\n *\r\n * NOTE:\r\n * This function uses Proxy which is not supported in IE.\r\n */\r\nexport var proxifyDataObject = function (obj) {\r\n    var internal = new InternalProperty();\r\n    Object.defineProperty(obj, INTERNAL_PROP_NAME, {\r\n        get: function () { return internal; }\r\n    });\r\n    return new Proxy(obj, {\r\n        set: function (target, prop, value) {\r\n            target[prop] = value;\r\n            target[INTERNAL_PROP_NAME].trigger(prop, value);\r\n            return true;\r\n        }\r\n    });\r\n};\r\n//# sourceMappingURL=InternalProperty.js.map","references":[],"map":"{\"version\":3,\"file\":\"InternalProperty.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/components/genericEditor/models/InternalProperty.ts\"],\"names\":[],\"mappings\":\"AAAA;;GAEG;AACH;;GAEG;AACH,MAAM,CAAC,IAAM,kBAAkB,GAAG,YAAY,CAAC;AAE/C;;;;GAIG;AACH;IAAA;QACY,SAAI,GAAG,IAAI,GAAG,EAAgC,CAAC;IAwB3D,CAAC;IAtBG;;OAEG;IACH,gCAAK,GAAL,UAAM,QAAgB,EAAE,EAAwB;QAAhD,iBAMC;QALG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;QAE5B,OAAO;YACH,KAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QAC/B,CAAC,CAAC;IACN,CAAC;IAED;;;;;OAKG;IACH,kCAAO,GAAP,UAAQ,QAAgB,EAAE,KAAU;QAChC,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE;YACzB,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,CAAC;SAClC;IACL,CAAC;IACL,uBAAC;AAAD,CAAC,AAzBD,IAyBC;;AAED;;;;;;;;;;;;;;GAcG;AACH,MAAM,CAAC,IAAM,iBAAiB,GAAG,UAAC,GAAQ;IACtC,IAAM,QAAQ,GAAG,IAAI,gBAAgB,EAAE,CAAC;IACxC,MAAM,CAAC,cAAc,CAAC,GAAG,EAAE,kBAAkB,EAAE;QAC3C,GAAG,EAAE,cAAM,OAAA,QAAQ,EAAR,CAAQ;KACtB,CAAC,CAAC;IACH,OAAO,IAAI,KAAK,CAAC,GAAG,EAAE;QAClB,GAAG,EAAH,UAAI,MAAM,EAAE,IAAI,EAAE,KAAK;YACnB,MAAM,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC;YACrB,MAAM,CAAC,kBAAkB,CAAC,CAAC,OAAO,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;YAEhD,OAAO,IAAI,CAAC;QAChB,CAAC;KACJ,CAAC,CAAC;AACP,CAAC,CAAC\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/components/genericEditor/models/InternalProperty.d.ts","writeByteOrderMark":false,"text":"/**\r\n * @internal\r\n */\r\nexport declare const INTERNAL_PROP_NAME = \"$$internal\";\r\n/**\r\n * @internal\r\n * Adds an internal property on the component model for\r\n * watching property changes on an object.\r\n */\r\nexport declare class InternalProperty {\r\n    private _map;\r\n    /**\r\n     * Watch property changes.\r\n     */\r\n    watch(property: string, fn: (value: any) => void): () => void;\r\n    /**\r\n     * Trigger prop change.\r\n     *\r\n     * @param property\r\n     * @param value New value\r\n     */\r\n    trigger(property: string, value: any): void;\r\n}\r\n/**\r\n * @internal\r\n * Creates a proxied object to listen on property changes\r\n * for backwards compatibility with object mutations made by\r\n * widgets. This is used to proxy the model data called component in the\r\n * generic editor. The component data is the model that is\r\n * used for submitting to the backend. Old widgets mutate the\r\n * properties of component object, thus there is not way to\r\n * listen on properties changes except for the use of the ES6 Proxy\r\n * API. Some properties that are watched inside of the GenericEditorField\r\n * update the value of the AbstractForm of Angular used for validation.\r\n *\r\n * NOTE:\r\n * This function uses Proxy which is not supported in IE.\r\n */\r\nexport declare const proxifyDataObject: (obj: any) => any;\r\n"}}
