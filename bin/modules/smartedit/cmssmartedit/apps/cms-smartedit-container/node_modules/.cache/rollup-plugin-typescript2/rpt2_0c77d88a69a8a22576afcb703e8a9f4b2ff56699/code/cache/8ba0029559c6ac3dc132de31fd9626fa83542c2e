{"code":"import { __assign, __awaiter, __decorate, __generator, __metadata, __spreadArrays } from \"tslib\";\r\nimport { Component, EventEmitter, Input, Output, ChangeDetectorRef } from '@angular/core';\r\nimport { IContextAwareEditableItemService, CmsitemsRestService } from 'cmscommons';\r\nimport { clone, includes, cloneDeep, isEqual } from 'lodash';\r\nimport { GENERIC_EDITOR_LOADED_EVENT, GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT, LogService, SeDowngradeComponent, stringUtils, SystemEventService } from 'smarteditcommons';\r\nimport { PageRestrictionsCriteriaService } from '../../../../services/pageRestrictions/PageRestrictionsCriteriaService';\r\nimport { RestrictionPickerConfigService } from '../../services';\r\nimport { RestrictionEditorCriteriaSelectItemComponent } from './restrictionEditorCriteriaSelectItem/RestrictionEditorCriteriaSelectItemComponent';\r\nvar ITEM_MANAGEMENT_EDITOR_ID = 'se-item-management-editor';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"RestrictionsEditorComponent\", {\r\n    selector: 'se-restrictions-editor',\r\n    template: \"<div class=\\\"se-restrictions-container\\\"><div class=\\\"se-restrictions-container__header\\\" [ngClass]=\\\"{ 'se-restrictions-container__header--empty': restrictions.length === 0 }\\\"><label class=\\\"se-restrictions__sub-header\\\" translate=\\\"se.cms.restrictions.list.title\\\"></label><div class=\\\"se-restrictions-container__header--right\\\"><div *ngIf=\\\"restrictions.length > 1\\\"><div *ngIf=\\\"editable\\\"><se-select id=\\\"criteria-type\\\" [fetchStrategy]=\\\"criteriaFetchStrategy\\\" [itemComponent]=\\\"itemComponent\\\" [placeholder]=\\\"'se.cms.restrictions.picker.type.placeholder'\\\" [model]=\\\"criteria.id\\\" (modelChange)=\\\"matchCriteriaChanged($event)\\\" [searchEnabled]=\\\"false\\\"></se-select></div><div *ngIf=\\\"!editable\\\">{{ 'se.cms.restrictions.criteria' | translate }} {{ criteria.label | translate }}</div></div><button class=\\\"cms-clean-btn se-restriction__clear-all__btn fd-button--light fd-button--compact\\\" *ngIf=\\\"showRemoveAllButton()\\\" (click)=\\\"removeAllRestrictions()\\\" translate=\\\"se.cms.restrictions.list.clear.all\\\"></button> <button *ngIf=\\\"!showRestrictionPicker\\\" type=\\\"button\\\" class=\\\"se-restrictions__add-restriction-btn fd-button--compact\\\" [disabled]=\\\"!editable\\\" (click)=\\\"onAddRestriction()\\\"><span translate=\\\"se.cms.restrictions.editor.button.add.new\\\"></span></button></div></div><se-slider-panel [sliderPanelConfiguration]=\\\"sliderPanelConfiguration\\\" [(sliderPanelHide)]=\\\"sliderPanelHide\\\" [(sliderPanelShow)]=\\\"sliderPanelShow\\\" (isShownChange)=\\\"onSliderVisibilityChange($event)\\\" class=\\\"se-add-restriction-panel\\\"><se-restriction-management *ngIf=\\\"isSliderVisible\\\" class=\\\"se-se-add-restriction-panel__restriction-management\\\" [config]=\\\"restrictionManagement.config\\\" [uriContext]=\\\"restrictionManagement.uriContext\\\" [(submitFn)]=\\\"restrictionManagement.submitFn\\\" [(isDirtyFn)]=\\\"restrictionManagement.isDirtyFn\\\"></se-restriction-management></se-slider-panel><div *ngIf=\\\"errors.length > 0\\\"><span class=\\\"se-help-block--has-error help-block fd-form__message fd-form__message--error\\\" *ngFor=\\\"let error of errors\\\" [translate]=\\\"error.message\\\"></span></div><se-restrictions-table *ngIf=\\\"isRestrictionsReady\\\" [editable]=\\\"editable\\\" [restrictions]=\\\"restrictions\\\" [restrictionCriteria]=\\\"criteria\\\" [errors]=\\\"errors\\\" [customClass]=\\\"'ySERestrictionListLink'\\\" (onEdit)=\\\"onEditRestriction($event)\\\" (onRemove)=\\\"onRemoveRestriction($event)\\\"></se-restrictions-table></div>\",\r\n    styles: [\".se-restrictions-container__header{display:flex;flex-direction:row;align-items:center;justify-content:space-between;border-bottom:1px solid #d9d9d9;padding-bottom:12px}.se-restrictions-container__header--right{display:flex;flex-direction:row;align-items:center}.se-restrictions-container__header--right>div,.se-restrictions-container__header--right>span{margin-left:12px}.se-restrictions-container__header--empty{border-bottom:none}.se-restrictions__sub-header{font-weight:700;align-self:flex-start;color:#51555a;margin:0}.se-restriction__clear-all__btn{text-transform:capitalize}\"]\r\n});\r\nvar /* @ngInject */ RestrictionsEditorComponent = /** @class */ (function () {\r\n    function /* @ngInject */ RestrictionsEditorComponent(logService, systemEventService, restrictionPickerConfigService, pageRestrictionsCriteriaService, contextAwareEditableItemService, cmsitemsRestService, cdr) {\r\n        this.logService = logService;\r\n        this.systemEventService = systemEventService;\r\n        this.restrictionPickerConfigService = restrictionPickerConfigService;\r\n        this.pageRestrictionsCriteriaService = pageRestrictionsCriteriaService;\r\n        this.contextAwareEditableItemService = contextAwareEditableItemService;\r\n        this.cmsitemsRestService = cmsitemsRestService;\r\n        this.cdr = cdr;\r\n        this.cancelFnChange = new EventEmitter();\r\n        this.isDirtyFnChange = new EventEmitter();\r\n        this.onRestrictionsChange = new EventEmitter();\r\n        this.resetFnChange = new EventEmitter();\r\n        this.errors = [];\r\n        this.restrictions = [];\r\n        this.originalRestrictions = [];\r\n        this.restrictionUuids = [];\r\n        this.isRestrictionsReady = false;\r\n        this.restrictionsArrayIsDirty = false;\r\n        this.showRestrictionPicker = false;\r\n        this.criteriaOptions = [];\r\n        this.criteria = {};\r\n        this.itemComponent = RestrictionEditorCriteriaSelectItemComponent;\r\n        this.matchCriteriaIsDirty = false;\r\n    }\r\n    /* @ngInject */ RestrictionsEditorComponent.prototype.ngOnInit = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var restrictionsData;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        this.restrictionUuids = this.restrictionUuids || [];\r\n                        return [4 /*yield*/, this.cmsitemsRestService.getByIdsNoCache(this.restrictionUuids, 'FULL')];\r\n                    case 1:\r\n                        restrictionsData = _a.sent();\r\n                        this.restrictions = (restrictionsData.response\r\n                            ? restrictionsData.response\r\n                            : [restrictionsData]);\r\n                        this.criteriaFetchStrategy = {\r\n                            fetchAll: function () {\r\n                                return Promise.resolve(_this.criteriaOptions);\r\n                            }\r\n                        };\r\n                        this.prepareRestrictionsCriteria();\r\n                        return [4 /*yield*/, this.setupResults()];\r\n                    case 2:\r\n                        _a.sent();\r\n                        this.sliderPanelConfiguration = {\r\n                            modal: {\r\n                                showDismissButton: true,\r\n                                title: '',\r\n                                dismiss: {\r\n                                    label: 'se.cms.restriction.management.panel.button.cancel',\r\n                                    onClick: function () {\r\n                                        _this.sliderPanelHide();\r\n                                    },\r\n                                    isDisabledFn: function () { return false; }\r\n                                },\r\n                                save: {\r\n                                    onClick: function () { },\r\n                                    label: '',\r\n                                    isDisabledFn: function () { return false; }\r\n                                }\r\n                            },\r\n                            cssSelector: '#y-modal-dialog'\r\n                        };\r\n                        this.restrictionManagement = {\r\n                            uriContext: this.item.uriContext,\r\n                            submitFn: null,\r\n                            isDirtyFn: null,\r\n                            config: null\r\n                        };\r\n                        this.isDirtyFnChange.emit(function () {\r\n                            return _this.restrictionsArrayIsDirty ||\r\n                                (_this.matchCriteriaIsDirty && _this.restrictionUuids.length >= 2);\r\n                        });\r\n                        this.resetFnChange.emit(function () { return true; });\r\n                        this.cancelFnChange.emit(function () { return Promise.resolve(true); });\r\n                        this.initEvents();\r\n                        this.cdr.detectChanges();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ RestrictionsEditorComponent.prototype.ngOnDestroy = function () {\r\n        this.clearEvents();\r\n    };\r\n    /* @ngInject */ RestrictionsEditorComponent.prototype.ngOnChanges = function (changes) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var haveRestrictionsChanged;\r\n            return __generator(this, function (_a) {\r\n                if (!changes.restrictionUuids) {\r\n                    return [2 /*return*/];\r\n                }\r\n                this.restrictionsArrayIsDirty =\r\n                    !changes.restrictionUuids.firstChange &&\r\n                        JSON.stringify(this.originalRestrictions) !== JSON.stringify(this.restrictions);\r\n                haveRestrictionsChanged = !isEqual(changes.restrictionUuids.previousValue, changes.restrictionUuids.currentValue);\r\n                if (haveRestrictionsChanged) {\r\n                    this.indexRestrictions();\r\n                }\r\n                return [2 /*return*/, this.applyIsRestrictionEditable()];\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ RestrictionsEditorComponent.prototype.onAddRestriction = function () {\r\n        this.setSliderConfigForAddOrCreate();\r\n        this.restrictionManagement.config = this.restrictionPickerConfigService.getConfigForSelecting(__spreadArrays(this.restrictions), this.getRestrictionTypes, this.getSupportedRestrictionTypes);\r\n        this.sliderPanelShow();\r\n    };\r\n    /* @ngInject */ RestrictionsEditorComponent.prototype.onEditRestriction = function (restriction) {\r\n        this.setSliderConfigForEditing();\r\n        this.restrictionManagement.config = this.restrictionPickerConfigService.getConfigForEditing(__assign({}, restriction), this.getSupportedRestrictionTypes);\r\n        this.sliderPanelShow();\r\n    };\r\n    /* @ngInject */ RestrictionsEditorComponent.prototype.onRemoveRestriction = function (restrictionIndex) {\r\n        this.restrictions = this.restrictions.filter(function (_, index) { return index !== restrictionIndex; });\r\n        this.updateRestrictionsData();\r\n    };\r\n    /* @ngInject */ RestrictionsEditorComponent.prototype.removeAllRestrictions = function () {\r\n        this.restrictions = [];\r\n        if (this.removeValidationMessages) {\r\n            this.removeValidationMessages();\r\n        }\r\n        this.updateRestrictionsData();\r\n    };\r\n    /* @ngInject */ RestrictionsEditorComponent.prototype.showRemoveAllButton = function () {\r\n        return this.restrictionUuids.length > 0 && this.editable;\r\n    };\r\n    /* @ngInject */ RestrictionsEditorComponent.prototype.matchCriteriaChanged = function (selectedCriteriaId) {\r\n        this.criteria = this.criteriaOptions.find(function (criteria) { return criteria.id === selectedCriteriaId; });\r\n        this.matchCriteriaIsDirty = this.criteria !== this.originalCriteria;\r\n        this.updateRestrictionsData();\r\n    };\r\n    /* @ngInject */ RestrictionsEditorComponent.prototype.onSliderVisibilityChange = function (isVisible) {\r\n        this.isSliderVisible = isVisible;\r\n    };\r\n    /* @ngInject */ RestrictionsEditorComponent.prototype.setupResults = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        this.indexRestrictions();\r\n                        this.originalRestrictions = this.cloneRestrictions(this.restrictions);\r\n                        this.updateRestrictionsData();\r\n                        return [4 /*yield*/, this.applyIsRestrictionEditable()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        this.isRestrictionsReady = true;\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ RestrictionsEditorComponent.prototype.updateRestrictionsData = function (alwaysEnableSubmit) {\r\n        if (alwaysEnableSubmit === void 0) { alwaysEnableSubmit = false; }\r\n        this.onRestrictionsChange.emit({\r\n            onlyOneRestrictionMustApply: this.criteria.value,\r\n            restrictionUuids: this.restrictions.map(function (restriction) { return restriction.uuid; }),\r\n            alwaysEnableSubmit: alwaysEnableSubmit\r\n        });\r\n    };\r\n    /* @ngInject */ RestrictionsEditorComponent.prototype.prepareRestrictionsCriteria = function () {\r\n        this.criteriaOptions = this.pageRestrictionsCriteriaService.getRestrictionCriteriaOptions();\r\n        if (!!this.item.onlyOneRestrictionMustApply) {\r\n            this.criteria = this.criteriaOptions[1];\r\n            this.originalCriteria = this.criteriaOptions[1];\r\n        }\r\n        else {\r\n            this.criteria = this.criteriaOptions[0];\r\n            this.originalCriteria = this.criteriaOptions[0];\r\n        }\r\n    };\r\n    /* @ngInject */ RestrictionsEditorComponent.prototype.isRestrictionRelatedError = function (validationError) {\r\n        return includes(validationError.subject, 'restrictions');\r\n    };\r\n    /* @ngInject */ RestrictionsEditorComponent.prototype.formatRestrictionRelatedError = function (validationError) {\r\n        var error = clone(validationError);\r\n        if (!stringUtils.isBlank(error.position)) {\r\n            error.position = parseInt(error.position, 10);\r\n        }\r\n        if (!stringUtils.isBlank(error.subject)) {\r\n            error.subject = error.subject.split('.').pop();\r\n        }\r\n        return error;\r\n    };\r\n    /* @ngInject */ RestrictionsEditorComponent.prototype.handleUnrelatedValidationErrors = function (validationData) {\r\n        var _this = this;\r\n        this.errors = validationData.messages\r\n            .filter(function (error) { return _this.isRestrictionRelatedError(error); })\r\n            .map(function (error) { return _this.formatRestrictionRelatedError(error); });\r\n    };\r\n    /* @ngInject */ RestrictionsEditorComponent.prototype.propagateErrors = function (genericEditorId) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var restrictionInEditMode, restrictionIndex, errorsToPropagate;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        restrictionInEditMode = ((_a = this.restrictionManagement.config) === null || _a === void 0 ? void 0 : _a.mode) ===\r\n                            this.restrictionPickerConfigService.MODE_EDITING &&\r\n                            genericEditorId === ITEM_MANAGEMENT_EDITOR_ID;\r\n                        if (!restrictionInEditMode) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        restrictionIndex = this.restrictionManagement.config\r\n                            .restriction.restrictionIndex;\r\n                        errorsToPropagate = this.errors.filter(function (error) { return error.position === restrictionIndex; });\r\n                        this.clearEvents();\r\n                        return [4 /*yield*/, this.systemEventService.publishAsync(GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT, {\r\n                                messages: errorsToPropagate,\r\n                                targetGenericEditorId: genericEditorId\r\n                            })];\r\n                    case 1:\r\n                        _b.sent();\r\n                        this.initEvents();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ RestrictionsEditorComponent.prototype.indexRestrictions = function () {\r\n        this.restrictions = (this.restrictions || []).map(function (restriction, index) {\r\n            return (__assign(__assign({}, restriction), { restrictionIndex: index }));\r\n        });\r\n    };\r\n    /* @ngInject */ RestrictionsEditorComponent.prototype.cloneRestrictions = function (restrictions) {\r\n        return cloneDeep(restrictions);\r\n    };\r\n    /* @ngInject */ RestrictionsEditorComponent.prototype.initEvents = function () {\r\n        var _this = this;\r\n        this.unregisterErrorListener = this.systemEventService.subscribe(GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT, function (_eventId, data) { return _this.handleUnrelatedValidationErrors(data); });\r\n        this.unregisterErrorPropagationEvent = this.systemEventService.subscribe(GENERIC_EDITOR_LOADED_EVENT, function (_eventId, data) { return _this.propagateErrors(data); });\r\n    };\r\n    /* @ngInject */ RestrictionsEditorComponent.prototype.clearEvents = function () {\r\n        this.unregisterErrorListener();\r\n        this.unregisterErrorPropagationEvent();\r\n    };\r\n    /* @ngInject */ RestrictionsEditorComponent.prototype.applyIsRestrictionEditable = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a;\r\n            var _this = this;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = this;\r\n                        return [4 /*yield*/, Promise.all(this.restrictions.map(function (restriction) { return __awaiter(_this, void 0, void 0, function () {\r\n                                var _a;\r\n                                return __generator(this, function (_b) {\r\n                                    switch (_b.label) {\r\n                                        case 0:\r\n                                            if (!restriction.uid) return [3 /*break*/, 2];\r\n                                            _a = restriction;\r\n                                            return [4 /*yield*/, this.contextAwareEditableItemService.isItemEditable(restriction.uid)];\r\n                                        case 1:\r\n                                            _a.canBeEdited = _b.sent();\r\n                                            return [2 /*return*/, restriction];\r\n                                        case 2:\r\n                                            restriction.canBeEdited = true;\r\n                                            return [2 /*return*/, restriction];\r\n                                    }\r\n                                });\r\n                            }); }))];\r\n                    case 1:\r\n                        _a.restrictions = _b.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ RestrictionsEditorComponent.prototype.setSliderConfigForAddOrCreate = function () {\r\n        var _this = this;\r\n        this.sliderPanelConfiguration.modal.title = 'se.cms.restriction.management.panel.title.add';\r\n        this.sliderPanelConfiguration.modal.save.label =\r\n            'se.cms.restriction.management.panel.button.add';\r\n        this.sliderPanelConfiguration.modal.save.isDisabledFn = function () {\r\n            if (_this.restrictionManagement.isDirtyFn) {\r\n                return !_this.restrictionManagement.isDirtyFn();\r\n            }\r\n            return true;\r\n        };\r\n        this.sliderPanelConfiguration.modal.save.onClick = function () { return __awaiter(_this, void 0, void 0, function () {\r\n            var restriction, _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _b.trys.push([0, 2, , 3]);\r\n                        return [4 /*yield*/, this.restrictionManagement.submitFn()];\r\n                    case 1:\r\n                        restriction = _b.sent();\r\n                        this.restrictions = this.restrictions.concat(restriction);\r\n                        this.updateRestrictionsData();\r\n                        this.sliderPanelHide();\r\n                        return [3 /*break*/, 3];\r\n                    case 2:\r\n                        _a = _b.sent();\r\n                        this.logService.warn('RestrictionsEditorComponent.setSliderConfigForAddOrCreate - Failed to create restriction');\r\n                        return [3 /*break*/, 3];\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        }); };\r\n    };\r\n    /* @ngInject */ RestrictionsEditorComponent.prototype.setSliderConfigForEditing = function () {\r\n        var _this = this;\r\n        this.sliderPanelConfiguration.modal.title =\r\n            'se.cms.restriction.management.panel.title.edit';\r\n        this.sliderPanelConfiguration.modal.save.label =\r\n            'se.cms.restriction.management.panel.button.save';\r\n        this.sliderPanelConfiguration.modal.save.isDisabledFn = function () {\r\n            if (_this.restrictionManagement.isDirtyFn) {\r\n                return !_this.restrictionManagement.isDirtyFn();\r\n            }\r\n            return true;\r\n        };\r\n        this.sliderPanelConfiguration.modal.save.onClick = function () { return __awaiter(_this, void 0, void 0, function () {\r\n            var restrictionEdited, payloadRestriction, restrictionIndex;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.restrictionManagement.submitFn()];\r\n                    case 1:\r\n                        restrictionEdited = _a.sent();\r\n                        if (this.restrictionManagement.config) {\r\n                            payloadRestriction = this.restrictionManagement\r\n                                .config.restriction;\r\n                            restrictionEdited.restrictionIndex = payloadRestriction.restrictionIndex;\r\n                        }\r\n                        restrictionIndex = restrictionEdited.restrictionIndex;\r\n                        if (restrictionIndex !== -1) {\r\n                            this.restrictions = this.restrictions.map(function (restriction, index) {\r\n                                if (index === restrictionIndex) {\r\n                                    return restrictionEdited;\r\n                                }\r\n                                return restriction;\r\n                            });\r\n                        }\r\n                        else {\r\n                            throw new Error('RestrictionsEditorComponent - edited restriction not found in list: ' +\r\n                                restrictionEdited);\r\n                        }\r\n                        this.updateRestrictionsData(true);\r\n                        this.sliderPanelHide();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); };\r\n    };\r\n    __decorate([\r\n        Input(),\r\n        __metadata(\"design:type\", Object)\r\n    ], /* @ngInject */ RestrictionsEditorComponent.prototype, \"item\", void 0);\r\n    __decorate([\r\n        Input(),\r\n        __metadata(\"design:type\", Boolean)\r\n    ], /* @ngInject */ RestrictionsEditorComponent.prototype, \"editable\", void 0);\r\n    __decorate([\r\n        Input(),\r\n        __metadata(\"design:type\", Function)\r\n    ], /* @ngInject */ RestrictionsEditorComponent.prototype, \"resetFn\", void 0);\r\n    __decorate([\r\n        Input(),\r\n        __metadata(\"design:type\", Function)\r\n    ], /* @ngInject */ RestrictionsEditorComponent.prototype, \"cancelFn\", void 0);\r\n    __decorate([\r\n        Input(),\r\n        __metadata(\"design:type\", Function)\r\n    ], /* @ngInject */ RestrictionsEditorComponent.prototype, \"isDirtyFn\", void 0);\r\n    __decorate([\r\n        Input(),\r\n        __metadata(\"design:type\", Function)\r\n    ], /* @ngInject */ RestrictionsEditorComponent.prototype, \"getRestrictionTypes\", void 0);\r\n    __decorate([\r\n        Input(),\r\n        __metadata(\"design:type\", Function)\r\n    ], /* @ngInject */ RestrictionsEditorComponent.prototype, \"getSupportedRestrictionTypes\", void 0);\r\n    __decorate([\r\n        Input(),\r\n        __metadata(\"design:type\", Function)\r\n    ], /* @ngInject */ RestrictionsEditorComponent.prototype, \"removeValidationMessages\", void 0);\r\n    __decorate([\r\n        Input(),\r\n        __metadata(\"design:type\", Array)\r\n    ], /* @ngInject */ RestrictionsEditorComponent.prototype, \"restrictionUuids\", void 0);\r\n    __decorate([\r\n        Output(),\r\n        __metadata(\"design:type\", EventEmitter)\r\n    ], /* @ngInject */ RestrictionsEditorComponent.prototype, \"onRestrictionsChange\", void 0);\r\n    __decorate([\r\n        Output(),\r\n        __metadata(\"design:type\", EventEmitter)\r\n    ], /* @ngInject */ RestrictionsEditorComponent.prototype, \"resetFnChange\", void 0);\r\n    __decorate([\r\n        Output(),\r\n        __metadata(\"design:type\", EventEmitter)\r\n    ], /* @ngInject */ RestrictionsEditorComponent.prototype, \"cancelFnChange\", void 0);\r\n    __decorate([\r\n        Output(),\r\n        __metadata(\"design:type\", EventEmitter)\r\n    ], /* @ngInject */ RestrictionsEditorComponent.prototype, \"isDirtyFnChange\", void 0);\r\n    /* @ngInject */ RestrictionsEditorComponent = __decorate([\r\n        SeDowngradeComponent(),\r\n        Component({\r\n            selector: 'se-restrictions-editor',\r\n            template: \"<div class=\\\"se-restrictions-container\\\"><div class=\\\"se-restrictions-container__header\\\" [ngClass]=\\\"{ 'se-restrictions-container__header--empty': restrictions.length === 0 }\\\"><label class=\\\"se-restrictions__sub-header\\\" translate=\\\"se.cms.restrictions.list.title\\\"></label><div class=\\\"se-restrictions-container__header--right\\\"><div *ngIf=\\\"restrictions.length > 1\\\"><div *ngIf=\\\"editable\\\"><se-select id=\\\"criteria-type\\\" [fetchStrategy]=\\\"criteriaFetchStrategy\\\" [itemComponent]=\\\"itemComponent\\\" [placeholder]=\\\"'se.cms.restrictions.picker.type.placeholder'\\\" [model]=\\\"criteria.id\\\" (modelChange)=\\\"matchCriteriaChanged($event)\\\" [searchEnabled]=\\\"false\\\"></se-select></div><div *ngIf=\\\"!editable\\\">{{ 'se.cms.restrictions.criteria' | translate }} {{ criteria.label | translate }}</div></div><button class=\\\"cms-clean-btn se-restriction__clear-all__btn fd-button--light fd-button--compact\\\" *ngIf=\\\"showRemoveAllButton()\\\" (click)=\\\"removeAllRestrictions()\\\" translate=\\\"se.cms.restrictions.list.clear.all\\\"></button> <button *ngIf=\\\"!showRestrictionPicker\\\" type=\\\"button\\\" class=\\\"se-restrictions__add-restriction-btn fd-button--compact\\\" [disabled]=\\\"!editable\\\" (click)=\\\"onAddRestriction()\\\"><span translate=\\\"se.cms.restrictions.editor.button.add.new\\\"></span></button></div></div><se-slider-panel [sliderPanelConfiguration]=\\\"sliderPanelConfiguration\\\" [(sliderPanelHide)]=\\\"sliderPanelHide\\\" [(sliderPanelShow)]=\\\"sliderPanelShow\\\" (isShownChange)=\\\"onSliderVisibilityChange($event)\\\" class=\\\"se-add-restriction-panel\\\"><se-restriction-management *ngIf=\\\"isSliderVisible\\\" class=\\\"se-se-add-restriction-panel__restriction-management\\\" [config]=\\\"restrictionManagement.config\\\" [uriContext]=\\\"restrictionManagement.uriContext\\\" [(submitFn)]=\\\"restrictionManagement.submitFn\\\" [(isDirtyFn)]=\\\"restrictionManagement.isDirtyFn\\\"></se-restriction-management></se-slider-panel><div *ngIf=\\\"errors.length > 0\\\"><span class=\\\"se-help-block--has-error help-block fd-form__message fd-form__message--error\\\" *ngFor=\\\"let error of errors\\\" [translate]=\\\"error.message\\\"></span></div><se-restrictions-table *ngIf=\\\"isRestrictionsReady\\\" [editable]=\\\"editable\\\" [restrictions]=\\\"restrictions\\\" [restrictionCriteria]=\\\"criteria\\\" [errors]=\\\"errors\\\" [customClass]=\\\"'ySERestrictionListLink'\\\" (onEdit)=\\\"onEditRestriction($event)\\\" (onRemove)=\\\"onRemoveRestriction($event)\\\"></se-restrictions-table></div>\",\r\n            styles: [\".se-restrictions-container__header{display:flex;flex-direction:row;align-items:center;justify-content:space-between;border-bottom:1px solid #d9d9d9;padding-bottom:12px}.se-restrictions-container__header--right{display:flex;flex-direction:row;align-items:center}.se-restrictions-container__header--right>div,.se-restrictions-container__header--right>span{margin-left:12px}.se-restrictions-container__header--empty{border-bottom:none}.se-restrictions__sub-header{font-weight:700;align-self:flex-start;color:#51555a;margin:0}.se-restriction__clear-all__btn{text-transform:capitalize}\"]\r\n        }),\r\n        __metadata(\"design:paramtypes\", [LogService,\r\n            SystemEventService,\r\n            RestrictionPickerConfigService,\r\n            PageRestrictionsCriteriaService,\r\n            IContextAwareEditableItemService,\r\n            CmsitemsRestService,\r\n            ChangeDetectorRef])\r\n    ], /* @ngInject */ RestrictionsEditorComponent);\r\n    return /* @ngInject */ RestrictionsEditorComponent;\r\n}());\r\nexport { /* @ngInject */ RestrictionsEditorComponent };\r\n//# sourceMappingURL=RestrictionsEditorComponent.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@types/lodash@4.14.159/node_modules/@types/lodash/ts3.1/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/dao/RestrictionTypesRestService.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/pageRestrictions/PageRestrictionsCriteriaService.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/pages/pageWizard/index.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/restrictions/services/index.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/restrictions/types.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/restrictions/components/restrictionsEditor/restrictionEditorCriteriaSelectItem/RestrictionEditorCriteriaSelectItemComponent.ts"],"map":"{\"version\":3,\"file\":\"RestrictionsEditorComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../../src/components/restrictions/components/restrictionsEditor/RestrictionsEditorComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/components/restrictions/components/restrictionsEditor/RestrictionsEditorComponent.d.ts","writeByteOrderMark":false,"text":"import { EventEmitter, OnChanges, OnDestroy, OnInit, SimpleChanges, Type, ChangeDetectorRef } from '@angular/core';\r\nimport { CMSItem, IContextAwareEditableItemService, CmsitemsRestService } from 'cmscommons';\r\nimport { FetchStrategy, GenericEditorFieldMessage, IUriContext, LogService, SliderPanelConfiguration, SystemEventService } from 'smarteditcommons';\r\nimport { IRestrictionType } from '../../../../dao/RestrictionTypesRestService';\r\nimport { IPageRestrictionCriteria, PageRestrictionsCriteriaService } from '../../../../services/pageRestrictions/PageRestrictionsCriteriaService';\r\nimport { RestrictionsDTO } from '../../../pages/pageWizard';\r\nimport { EditingRestrictionConfig, RestrictionPickerConfigService, SelectingRestrictionConfig } from '../../services';\r\nimport { RestrictionCMSItem } from '../../types';\r\nimport { RestrictionEditorCriteriaSelectItemComponent } from './restrictionEditorCriteriaSelectItem/RestrictionEditorCriteriaSelectItemComponent';\r\nexport declare class RestrictionsEditorComponent implements OnInit, OnDestroy, OnChanges {\r\n    private logService;\r\n    private systemEventService;\r\n    private restrictionPickerConfigService;\r\n    private pageRestrictionsCriteriaService;\r\n    private contextAwareEditableItemService;\r\n    private cmsitemsRestService;\r\n    private cdr;\r\n    item: CMSItem;\r\n    editable: boolean;\r\n    resetFn: () => boolean;\r\n    cancelFn: () => Promise<void>;\r\n    isDirtyFn: () => boolean;\r\n    getRestrictionTypes: () => Promise<IRestrictionType[]>;\r\n    getSupportedRestrictionTypes: () => Promise<string[]>;\r\n    removeValidationMessages: () => void;\r\n    restrictionUuids: string[];\r\n    onRestrictionsChange: EventEmitter<RestrictionsDTO>;\r\n    resetFnChange: EventEmitter<() => boolean>;\r\n    cancelFnChange: EventEmitter<() => Promise<boolean>>;\r\n    isDirtyFnChange: EventEmitter<() => boolean>;\r\n    restrictions: RestrictionCMSItem[];\r\n    originalRestrictions: RestrictionCMSItem[];\r\n    isRestrictionsReady: boolean;\r\n    showRestrictionPicker: boolean;\r\n    sliderPanelConfiguration: SliderPanelConfiguration;\r\n    restrictionManagement: {\r\n        config: EditingRestrictionConfig | SelectingRestrictionConfig;\r\n        uriContext: IUriContext;\r\n        submitFn: () => Promise<RestrictionCMSItem>;\r\n        isDirtyFn: () => boolean;\r\n    };\r\n    criteriaOptions: IPageRestrictionCriteria[];\r\n    criteria: IPageRestrictionCriteria;\r\n    originalCriteria: IPageRestrictionCriteria;\r\n    matchCriteriaIsDirty: boolean;\r\n    criteriaFetchStrategy: FetchStrategy;\r\n    itemComponent: Type<RestrictionEditorCriteriaSelectItemComponent>;\r\n    errors: GenericEditorFieldMessage[];\r\n    sliderPanelHide: () => Promise<void>;\r\n    sliderPanelShow: () => Promise<void>;\r\n    isSliderVisible: boolean;\r\n    private restrictionsArrayIsDirty;\r\n    private unregisterErrorListener;\r\n    private unregisterErrorPropagationEvent;\r\n    constructor(logService: LogService, systemEventService: SystemEventService, restrictionPickerConfigService: RestrictionPickerConfigService, pageRestrictionsCriteriaService: PageRestrictionsCriteriaService, contextAwareEditableItemService: IContextAwareEditableItemService, cmsitemsRestService: CmsitemsRestService, cdr: ChangeDetectorRef);\r\n    ngOnInit(): Promise<void>;\r\n    ngOnDestroy(): void;\r\n    ngOnChanges(changes: SimpleChanges): Promise<void>;\r\n    onAddRestriction(): void;\r\n    onEditRestriction(restriction: RestrictionCMSItem): void;\r\n    onRemoveRestriction(restrictionIndex: number): void;\r\n    removeAllRestrictions(): void;\r\n    showRemoveAllButton(): boolean;\r\n    matchCriteriaChanged(selectedCriteriaId: string): void;\r\n    onSliderVisibilityChange(isVisible: boolean): void;\r\n    private setupResults;\r\n    private updateRestrictionsData;\r\n    private prepareRestrictionsCriteria;\r\n    private isRestrictionRelatedError;\r\n    private formatRestrictionRelatedError;\r\n    private handleUnrelatedValidationErrors;\r\n    private propagateErrors;\r\n    private indexRestrictions;\r\n    private cloneRestrictions;\r\n    private initEvents;\r\n    private clearEvents;\r\n    private applyIsRestrictionEditable;\r\n    private setSliderConfigForAddOrCreate;\r\n    private setSliderConfigForEditing;\r\n}\r\n"}}
