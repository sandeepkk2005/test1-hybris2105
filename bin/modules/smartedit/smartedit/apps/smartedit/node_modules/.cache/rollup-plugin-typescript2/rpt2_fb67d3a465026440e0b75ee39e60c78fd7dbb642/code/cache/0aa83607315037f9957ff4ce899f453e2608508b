{"code":"import { __assign, __decorate, __extends, __metadata } from \"tslib\";\r\n/*\r\n * Copyright (c) 2021 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { CloneableUtils, GatewayProxied, IContextualMenuService, IDecoratorService, IFeatureService, LogService, SeDowngradeService } from 'smarteditcommons';\r\n/** @internal */\r\nvar /* @ngInject */ FeatureService = /** @class */ (function (_super) {\r\n    __extends(/* @ngInject */ FeatureService, _super);\r\n    function /* @ngInject */ FeatureService(logService, decoratorService, cloneableUtils, contextualMenuService) {\r\n        var _this = _super.call(this, cloneableUtils) || this;\r\n        _this.logService = logService;\r\n        _this.decoratorService = decoratorService;\r\n        _this.contextualMenuService = contextualMenuService;\r\n        return _this;\r\n    }\r\n    /* @ngInject */ FeatureService.prototype.addDecorator = function (configuration) {\r\n        var prevEnablingCallback = configuration.enablingCallback;\r\n        var prevDisablingCallback = configuration.disablingCallback;\r\n        var displayCondition = configuration.displayCondition;\r\n        configuration.enablingCallback = function () {\r\n            this.enable(configuration.key, displayCondition);\r\n            if (prevEnablingCallback) {\r\n                prevEnablingCallback();\r\n            }\r\n        }.bind(this.decoratorService);\r\n        configuration.disablingCallback = function () {\r\n            this.disable(configuration.key);\r\n            if (prevDisablingCallback) {\r\n                prevDisablingCallback();\r\n            }\r\n        }.bind(this.decoratorService);\r\n        delete configuration.displayCondition;\r\n        return this.register(configuration);\r\n    };\r\n    /* @ngInject */ FeatureService.prototype.addContextualMenuButton = function (item) {\r\n        var clone = __assign({}, item);\r\n        delete item.nameI18nKey;\r\n        delete item.descriptionI18nKey;\r\n        delete item.regexpKeys;\r\n        clone.enablingCallback = function () {\r\n            var mapping = {};\r\n            clone.regexpKeys.forEach(function (regexpKey) {\r\n                mapping[regexpKey] = [item];\r\n            });\r\n            if (!this.containsItem(clone.key)) {\r\n                this.addItems(mapping);\r\n            }\r\n        }.bind(this.contextualMenuService);\r\n        clone.disablingCallback = function () {\r\n            this.removeItemByKey(clone.key);\r\n        }.bind(this.contextualMenuService);\r\n        return this.register(clone);\r\n    };\r\n    /* @ngInject */ FeatureService.prototype._remoteEnablingFromInner = function (key) {\r\n        if (this._featuresToAlias && this._featuresToAlias[key]) {\r\n            this._featuresToAlias[key].enablingCallback();\r\n        }\r\n        else {\r\n            this.logService.warn('could not enable feature named ' + key + ', it was not found in the iframe');\r\n        }\r\n        return Promise.resolve();\r\n    };\r\n    /* @ngInject */ FeatureService.prototype._remoteDisablingFromInner = function (key) {\r\n        if (this._featuresToAlias && this._featuresToAlias[key]) {\r\n            this._featuresToAlias[key].disablingCallback();\r\n        }\r\n        else {\r\n            this.logService.warn('could not disable feature named ' + key + ', it was not found in the iframe');\r\n        }\r\n        return Promise.resolve();\r\n    };\r\n    /* @ngInject */ FeatureService = __decorate([\r\n        SeDowngradeService(IFeatureService),\r\n        GatewayProxied('_registerAliases', 'addToolbarItem', 'register', 'enable', 'disable', '_remoteEnablingFromInner', '_remoteDisablingFromInner', 'addDecorator', 'getFeatureProperty', 'addContextualMenuButton'),\r\n        __metadata(\"design:paramtypes\", [LogService,\r\n            IDecoratorService,\r\n            CloneableUtils,\r\n            IContextualMenuService])\r\n    ], /* @ngInject */ FeatureService);\r\n    return /* @ngInject */ FeatureService;\r\n}(IFeatureService));\r\nexport { /* @ngInject */ FeatureService };\r\n//# sourceMappingURL=FeatureServiceInner.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts"],"map":"{\"version\":3,\"file\":\"FeatureServiceInner.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/services/FeatureServiceInner.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit/services/FeatureServiceInner.d.ts","writeByteOrderMark":false,"text":"import { CloneableUtils, IContextualMenuButton, IContextualMenuService, IDecorator, IDecoratorService, IFeatureService, LogService } from 'smarteditcommons';\r\n/** @internal */\r\nexport declare class FeatureService extends IFeatureService {\r\n    private logService;\r\n    private decoratorService;\r\n    private contextualMenuService;\r\n    constructor(logService: LogService, decoratorService: IDecoratorService, cloneableUtils: CloneableUtils, contextualMenuService: IContextualMenuService);\r\n    addDecorator(configuration: IDecorator): Promise<void>;\r\n    addContextualMenuButton(item: IContextualMenuButton): Promise<void>;\r\n    protected _remoteEnablingFromInner(key: string): Promise<void>;\r\n    protected _remoteDisablingFromInner(key: string): Promise<void>;\r\n}\r\n"}}
