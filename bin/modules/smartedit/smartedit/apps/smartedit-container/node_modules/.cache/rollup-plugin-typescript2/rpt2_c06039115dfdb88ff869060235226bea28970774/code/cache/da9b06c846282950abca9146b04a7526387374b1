{"code":"/** @internal */\r\nvar WebStorage = /** @class */ (function () {\r\n    function WebStorage(controller, storageConfiguration) {\r\n        this.controller = controller;\r\n        this.storageConfiguration = storageConfiguration;\r\n    }\r\n    WebStorage.ERR_INVALID_QUERY_OBJECT = function (queryObjec, storageId) {\r\n        return new Error(\"WebStorage exception for storage [\" + storageId + \"]. Invalid key [\" + queryObjec + \"]\");\r\n    };\r\n    WebStorage.prototype.clear = function () {\r\n        this.controller.saveStorageData({});\r\n        return Promise.resolve(true);\r\n    };\r\n    WebStorage.prototype.find = function (queryObject) {\r\n        if (queryObject === undefined) {\r\n            throw WebStorage.ERR_INVALID_QUERY_OBJECT(queryObject, this.storageConfiguration.storageId);\r\n        }\r\n        return this.get(queryObject).then(function (result) { return [result]; });\r\n    };\r\n    WebStorage.prototype.get = function (queryObject) {\r\n        var _this = this;\r\n        return this.controller.getStorageData().then(function (data) {\r\n            var key = _this.getKeyFromQueryObj(queryObject);\r\n            return Promise.resolve(data[key]);\r\n        });\r\n    };\r\n    WebStorage.prototype.put = function (obj, queryObject) {\r\n        var _this = this;\r\n        return this.controller.getStorageData().then(function (data) {\r\n            data[_this.getKeyFromQueryObj(queryObject)] = obj;\r\n            _this.controller.saveStorageData(data);\r\n            return Promise.resolve(true);\r\n        });\r\n    };\r\n    WebStorage.prototype.remove = function (queryObject) {\r\n        var _this = this;\r\n        if (queryObject === undefined) {\r\n            throw WebStorage.ERR_INVALID_QUERY_OBJECT(queryObject, this.storageConfiguration.storageId);\r\n        }\r\n        var getPromise = this.get(queryObject);\r\n        return this.controller.getStorageData().then(function (data) {\r\n            delete data[_this.getKeyFromQueryObj(queryObject)];\r\n            _this.controller.saveStorageData(data);\r\n            return getPromise;\r\n        });\r\n    };\r\n    WebStorage.prototype.getLength = function () {\r\n        return this.controller\r\n            .getStorageData()\r\n            .then(function (data) { return Promise.resolve(Object.keys(data).length); });\r\n    };\r\n    WebStorage.prototype.dispose = function () {\r\n        return Promise.resolve(true);\r\n    };\r\n    WebStorage.prototype.entries = function () {\r\n        var _this = this;\r\n        var entries = [];\r\n        return new Promise(function (resolve) {\r\n            _this.controller.getStorageData().then(function (data) {\r\n                Object.keys(data).forEach(function (key) {\r\n                    entries.push([JSON.parse(key), data[key]]);\r\n                });\r\n                resolve(entries);\r\n            });\r\n        });\r\n    };\r\n    WebStorage.prototype.getKeyFromQueryObj = function (queryObj) {\r\n        return JSON.stringify(queryObj);\r\n    };\r\n    return WebStorage;\r\n}());\r\nexport { WebStorage };\r\n//# sourceMappingURL=WebStorage.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-container/src/services/storage/controller/webstorage/WebStorageBridge.ts"],"map":"{\"version\":3,\"file\":\"WebStorage.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../../src/services/storage/controller/webstorage/WebStorage.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-container/services/storage/controller/webstorage/WebStorage.d.ts","writeByteOrderMark":false,"text":"import { Cloneable, IStorage, IStorageOptions } from 'smarteditcommons';\r\nimport { WebStorageBridge } from './WebStorageBridge';\r\n/** @internal */\r\nexport declare class WebStorage<Q extends Cloneable, D extends Cloneable> implements IStorage<Q, D> {\r\n    private readonly controller;\r\n    private readonly storageConfiguration;\r\n    static ERR_INVALID_QUERY_OBJECT(queryObjec: any, storageId: string): Error;\r\n    constructor(controller: WebStorageBridge, storageConfiguration: IStorageOptions);\r\n    clear(): Promise<boolean>;\r\n    find(queryObject?: Q): Promise<D[]>;\r\n    get(queryObject?: Q): Promise<D>;\r\n    put(obj: D, queryObject?: Q): Promise<boolean>;\r\n    remove(queryObject?: Q): Promise<D>;\r\n    getLength(): Promise<number>;\r\n    dispose(): Promise<boolean>;\r\n    entries(): Promise<any[]>;\r\n    private getKeyFromQueryObj;\r\n}\r\n"}}
