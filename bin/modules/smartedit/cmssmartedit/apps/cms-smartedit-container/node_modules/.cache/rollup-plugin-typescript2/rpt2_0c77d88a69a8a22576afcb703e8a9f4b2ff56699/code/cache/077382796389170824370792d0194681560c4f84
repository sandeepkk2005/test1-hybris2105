{"code":"import { __awaiter, __decorate, __generator, __metadata, __param } from \"tslib\";\r\n/*\r\n * Copyright (c) 2021 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, Inject } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { ManagePageService } from 'cmssmarteditcontainer/services/pages/ManagePageService';\r\nimport { DATA_TABLE_COMPONENT_DATA, ICatalogVersionPermissionService } from 'smarteditcommons';\r\nimport { EditPageItemComponent, ClonePageItemComponent, DeletePageItemComponent, SyncPageItemComponent } from '../pageItems';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"PageListDropdownItemsWrapperComponent\", {\r\n    selector: 'se-page-list-dropdown-items-wrapper',\r\n    template: \"<div\\n        *seHasOperationPermission=\\\"'se.edit.page'\\\"\\n        class=\\\"paged-list-table__body__td paged-list-table__body__td-menu\\\"\\n    >\\n        <se-dropdown-menu\\n            [dropdownItems]=\\\"dropdownItems\\\"\\n            [selectedItem]=\\\"item\\\"\\n            class=\\\"pull-right\\\"\\n        ></se-dropdown-menu>\\n    </div>\",\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n});\r\nvar PageListDropdownItemsWrapperComponent = /** @class */ (function () {\r\n    function PageListDropdownItemsWrapperComponent(route, data, catalogVersionPermissionService, managePageService, cdr) {\r\n        this.route = route;\r\n        this.data = data;\r\n        this.catalogVersionPermissionService = catalogVersionPermissionService;\r\n        this.managePageService = managePageService;\r\n        this.cdr = cdr;\r\n        this.dropdownItems = [];\r\n    }\r\n    PageListDropdownItemsWrapperComponent.prototype.ngOnInit = function () {\r\n        return this.setDropdownItems();\r\n    };\r\n    PageListDropdownItemsWrapperComponent.prototype.setDropdownItems = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, catalogId, catalogVersion, _b, hasSyncPermission, hasClonePermission;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        this.item = this.data.item;\r\n                        _a = this.route.snapshot.params, catalogId = _a.catalogId, catalogVersion = _a.catalogVersion;\r\n                        return [4 /*yield*/, Promise.all([\r\n                                this.catalogVersionPermissionService.hasSyncPermissionToActiveCatalogVersion(catalogId, catalogVersion),\r\n                                /**\r\n                                 * Normally we would use something like `isPermitted` from PermissionService but as we are in pages\r\n                                 * which are container (outer) part of app and PermissionService uses some data retrieved from inner\r\n                                 * (which in this case can be also obtained from outer) we had to use methods available in outer\r\n                                 * to see if the clone button can be cloned or not.\r\n                                 *\r\n                                 * Using here PermissionService.isPermitted will throw error\r\n                                 * as there is no iframe in Pages site\r\n                                 */\r\n                                this.managePageService.isPageCloneable(this.data.item.uuid, this.data.item.catalogVersion)\r\n                            ])];\r\n                    case 1:\r\n                        _b = _c.sent(), hasSyncPermission = _b[0], hasClonePermission = _b[1];\r\n                        this.addDropdownItem(EditPageItemComponent);\r\n                        if (hasSyncPermission) {\r\n                            this.addDropdownItem(SyncPageItemComponent);\r\n                        }\r\n                        if (hasClonePermission) {\r\n                            this.addDropdownItem(ClonePageItemComponent);\r\n                        }\r\n                        this.addDropdownItem(DeletePageItemComponent);\r\n                        this.cdr.detectChanges();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PageListDropdownItemsWrapperComponent.prototype.addDropdownItem = function (item) {\r\n        this.dropdownItems = this.dropdownItems.concat({\r\n            component: item\r\n        });\r\n    };\r\n    PageListDropdownItemsWrapperComponent = __decorate([\r\n        Component({\r\n            selector: 'se-page-list-dropdown-items-wrapper',\r\n            template: \"<div\\n        *seHasOperationPermission=\\\"'se.edit.page'\\\"\\n        class=\\\"paged-list-table__body__td paged-list-table__body__td-menu\\\"\\n    >\\n        <se-dropdown-menu\\n            [dropdownItems]=\\\"dropdownItems\\\"\\n            [selectedItem]=\\\"item\\\"\\n            class=\\\"pull-right\\\"\\n        ></se-dropdown-menu>\\n    </div>\",\r\n            changeDetection: ChangeDetectionStrategy.OnPush\r\n        }),\r\n        __param(1, Inject(DATA_TABLE_COMPONENT_DATA)),\r\n        __metadata(\"design:paramtypes\", [ActivatedRoute, Object, ICatalogVersionPermissionService,\r\n            ManagePageService,\r\n            ChangeDetectorRef])\r\n    ], PageListDropdownItemsWrapperComponent);\r\n    return PageListDropdownItemsWrapperComponent;\r\n}());\r\nexport { PageListDropdownItemsWrapperComponent };\r\n//# sourceMappingURL=PageListDropdownItemsWrapperComponent.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/router@8.2.14_e9fbe5720e9434eb9ae0f6720f1ca3f4/node_modules/@angular/router/router.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/pages/ManagePageService.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/pages/pageItems/index.ts"],"map":"{\"version\":3,\"file\":\"PageListDropdownItemsWrapperComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/components/pages/pageListComponentWrappers/PageListDropdownItemsWrapperComponent.ts\"],\"names\":[],\"mappings\":\";AAAA;;GAEG;AACH,OAAO,EACH,uBAAuB,EACvB,iBAAiB,EACjB,SAAS,EACT,MAAM,EAGT,MAAM,eAAe,CAAC;AACvB,OAAO,EAAE,cAAc,EAAE,MAAM,iBAAiB,CAAC;AAEjD,OAAO,EAAE,iBAAiB,EAAE,MAAM,wDAAwD,CAAC;AAC3F,OAAO,EAEH,yBAAyB,EACzB,gCAAgC,EAEnC,MAAM,kBAAkB,CAAC;AAC1B,OAAO,EACH,qBAAqB,EACrB,sBAAsB,EACtB,uBAAuB,EACvB,qBAAqB,EACxB,MAAM,cAAc,CAAC;+FAEX;IACP,QAAQ,EAAE,qCAAqC;IAC/C,QAAQ,EAAE,4UASH;IACP,eAAe,EAAE,uBAAuB,CAAC,MAAM;CAClD;AACD;IAII,+CACY,KAAqB,EACa,IAA4B,EAC9D,+BAAiE,EACjE,iBAAoC,EACpC,GAAsB;QAJtB,UAAK,GAAL,KAAK,CAAgB;QACa,SAAI,GAAJ,IAAI,CAAwB;QAC9D,oCAA+B,GAA/B,+BAA+B,CAAkC;QACjE,sBAAiB,GAAjB,iBAAiB,CAAmB;QACpC,QAAG,GAAH,GAAG,CAAmB;QAR3B,kBAAa,GAAwB,EAAE,CAAC;IAS5C,CAAC;IAEJ,wDAAQ,GAAR;QACI,OAAO,IAAI,CAAC,gBAAgB,EAAE,CAAC;IACnC,CAAC;IAEa,gEAAgB,GAA9B;;;;;;wBACI,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAgB,CAAC;wBAEjC,KAAgC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,EAAxD,SAAS,eAAA,EAAE,cAAc,oBAAA,CAAgC;wBAEjB,qBAAM,OAAO,CAAC,GAAG,CAAC;gCAC9D,IAAI,CAAC,+BAA+B,CAAC,uCAAuC,CACxE,SAAS,EACT,cAAc,CACjB;gCACD;;;;;;;;mCAQG;gCACH,IAAI,CAAC,iBAAiB,CAAC,eAAe,CAClC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EACnB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAChC;6BACJ,CAAC,EAAA;;wBAlBI,KAA0C,SAkB9C,EAlBK,iBAAiB,QAAA,EAAE,kBAAkB,QAAA;wBAoB5C,IAAI,CAAC,eAAe,CAAC,qBAAqB,CAAC,CAAC;wBAE5C,IAAI,iBAAiB,EAAE;4BACnB,IAAI,CAAC,eAAe,CAAC,qBAAqB,CAAC,CAAC;yBAC/C;wBAED,IAAI,kBAAkB,EAAE;4BACpB,IAAI,CAAC,eAAe,CAAC,sBAAsB,CAAC,CAAC;yBAChD;wBAED,IAAI,CAAC,eAAe,CAAC,uBAAuB,CAAC,CAAC;wBAE9C,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC;;;;;KAC5B;IAEO,+DAAe,GAAvB,UAAwB,IAAe;QACnC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC;YAC3C,SAAS,EAAE,IAAI;SAClB,CAAC,CAAC;IACP,CAAC;IA5DQ,qCAAqC;QAdjD,SAAS,CAAC;YACP,QAAQ,EAAE,qCAAqC;YAC/C,QAAQ,EAAE,4UASH;YACP,eAAe,EAAE,uBAAuB,CAAC,MAAM;SAClD,CAAC;QAOO,WAAA,MAAM,CAAC,yBAAyB,CAAC,CAAA;yCADnB,cAAc,UAEY,gCAAgC;YAC9C,iBAAiB;YAC/B,iBAAiB;OATzB,qCAAqC,CA6DjD;IAAD,4CAAC;CAAA,AA7DD,IA6DC;SA7DY,qCAAqC\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/components/pages/pageListComponentWrappers/PageListDropdownItemsWrapperComponent.d.ts","writeByteOrderMark":false,"text":"import { ChangeDetectorRef, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { ICMSPage } from 'cmscommons';\r\nimport { ManagePageService } from 'cmssmarteditcontainer/services/pages/ManagePageService';\r\nimport { DataTableComponentData, ICatalogVersionPermissionService, IDropdownMenuItem } from 'smarteditcommons';\r\nexport declare class PageListDropdownItemsWrapperComponent implements OnInit {\r\n    private route;\r\n    data: DataTableComponentData;\r\n    private catalogVersionPermissionService;\r\n    private managePageService;\r\n    private cdr;\r\n    dropdownItems: IDropdownMenuItem[];\r\n    item: ICMSPage;\r\n    constructor(route: ActivatedRoute, data: DataTableComponentData, catalogVersionPermissionService: ICatalogVersionPermissionService, managePageService: ManagePageService, cdr: ChangeDetectorRef);\r\n    ngOnInit(): Promise<void>;\r\n    private setDropdownItems;\r\n    private addDropdownItem;\r\n}\r\n"}}
