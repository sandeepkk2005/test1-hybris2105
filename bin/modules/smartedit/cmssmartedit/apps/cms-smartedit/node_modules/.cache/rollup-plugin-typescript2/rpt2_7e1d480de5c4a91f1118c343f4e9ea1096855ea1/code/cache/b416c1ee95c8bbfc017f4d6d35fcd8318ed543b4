{"code":"import { __decorate, __extends, __metadata, __param } from \"tslib\";\r\nimport { Component, Inject } from '@angular/core';\r\nimport { AbstractDecorator, CrossFrameEventService, ICatalogService, IPageInfoService, SeDecorator } from 'smarteditcommons';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"SyncIndicatorDecorator\", {\r\n    selector: 'sync-indicator',\r\n    template: \"<div class=\\\"sync-indicator-decorator\\\" [ngClass]=\\\"syncStatus.status\\\" [attr.sync-status]=\\\"syncStatus.status\\\"><ng-content class=\\\"se-wrapper-data\\\"></ng-content></div>\"\r\n});\r\nvar /* @ngInject */ SyncIndicatorDecorator = /** @class */ (function (_super) {\r\n    __extends(/* @ngInject */ SyncIndicatorDecorator, _super);\r\n    function /* @ngInject */ SyncIndicatorDecorator($q, catalogService, slotSynchronizationService, crossFrameEventService, pageInfoService, SYNCHRONIZATION_STATUSES, SYNCHRONIZATION_POLLING) {\r\n        var _this = _super.call(this) || this;\r\n        _this.$q = $q;\r\n        _this.catalogService = catalogService;\r\n        _this.slotSynchronizationService = slotSynchronizationService;\r\n        _this.crossFrameEventService = crossFrameEventService;\r\n        _this.pageInfoService = pageInfoService;\r\n        _this.SYNCHRONIZATION_STATUSES = SYNCHRONIZATION_STATUSES;\r\n        _this.SYNCHRONIZATION_POLLING = SYNCHRONIZATION_POLLING;\r\n        _this.isVersionNonActive = false;\r\n        return _this;\r\n    }\r\n    /* @ngInject */ SyncIndicatorDecorator.prototype.ngOnInit = function () {\r\n        var _this = this;\r\n        this.syncStatus = {\r\n            status: this.SYNCHRONIZATION_STATUSES.UNAVAILABLE\r\n        };\r\n        this.pageInfoService.getPageUUID().then(function (pageUUID) {\r\n            _this.pageUUID = pageUUID;\r\n            _this.unRegisterSyncPolling = _this.crossFrameEventService.subscribe(_this.SYNCHRONIZATION_POLLING.FAST_FETCH, _this.fetchSyncStatus.bind(_this));\r\n            _this.catalogService.isContentCatalogVersionNonActive().then(function (isNonActive) {\r\n                _this.isVersionNonActive = isNonActive;\r\n                if (_this.isVersionNonActive) {\r\n                    _this.fetchSyncStatus();\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ SyncIndicatorDecorator.prototype.ngOnDestroy = function () {\r\n        if (this.unRegisterSyncPolling) {\r\n            this.unRegisterSyncPolling();\r\n        }\r\n    };\r\n    /* @ngInject */ SyncIndicatorDecorator.prototype.fetchSyncStatus = function () {\r\n        var _this = this;\r\n        return this.isVersionNonActive\r\n            ? this.slotSynchronizationService\r\n                .getSyncStatus(this.pageUUID, this.componentAttributes.smarteditComponentId)\r\n                .then(function (syncStatus) {\r\n                if (_this.slotSynchronizationService.syncStatusExists(syncStatus)) {\r\n                    _this.syncStatus = syncStatus;\r\n                }\r\n            }, function () {\r\n                _this.syncStatus.status = _this.SYNCHRONIZATION_STATUSES.UNAVAILABLE;\r\n            })\r\n            : this.$q.when();\r\n    };\r\n    /* @ngInject */ SyncIndicatorDecorator = __decorate([\r\n        SeDecorator(),\r\n        Component({\r\n            selector: 'sync-indicator',\r\n            template: \"<div class=\\\"sync-indicator-decorator\\\" [ngClass]=\\\"syncStatus.status\\\" [attr.sync-status]=\\\"syncStatus.status\\\"><ng-content class=\\\"se-wrapper-data\\\"></ng-content></div>\"\r\n        }),\r\n        __param(0, Inject('$q')),\r\n        __param(2, Inject('slotSynchronizationService')),\r\n        __param(4, Inject('pageInfoService')),\r\n        __param(5, Inject('SYNCHRONIZATION_STATUSES')),\r\n        __param(6, Inject('SYNCHRONIZATION_POLLING')),\r\n        __metadata(\"design:paramtypes\", [Function, ICatalogService, Object, CrossFrameEventService,\r\n            IPageInfoService, Object, Object])\r\n    ], /* @ngInject */ SyncIndicatorDecorator);\r\n    return /* @ngInject */ SyncIndicatorDecorator;\r\n}(AbstractDecorator));\r\nexport { /* @ngInject */ SyncIndicatorDecorator };\r\n//# sourceMappingURL=SyncIndicatorDecorator.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts"],"map":"{\"version\":3,\"file\":\"SyncIndicatorDecorator.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/components/synchronize/slots/SyncIndicatorDecorator.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit/components/synchronize/slots/SyncIndicatorDecorator.d.ts","writeByteOrderMark":false,"text":"/// <reference types=\"angular\" />\r\nimport { AbstractDecorator, CrossFrameEventService, ICatalogService, IPageInfoService, TypedMap } from 'smarteditcommons';\r\nexport declare class SyncIndicatorDecorator extends AbstractDecorator {\r\n    private $q;\r\n    private catalogService;\r\n    private slotSynchronizationService;\r\n    private crossFrameEventService;\r\n    private pageInfoService;\r\n    private SYNCHRONIZATION_STATUSES;\r\n    private SYNCHRONIZATION_POLLING;\r\n    pageUUID: string;\r\n    syncStatus: TypedMap<string>;\r\n    isVersionNonActive: boolean;\r\n    private unRegisterSyncPolling;\r\n    constructor($q: angular.IQService, catalogService: ICatalogService, slotSynchronizationService: any, crossFrameEventService: CrossFrameEventService, pageInfoService: IPageInfoService, SYNCHRONIZATION_STATUSES: TypedMap<string>, SYNCHRONIZATION_POLLING: TypedMap<string>);\r\n    ngOnInit(): void;\r\n    ngOnDestroy(): void;\r\n    fetchSyncStatus(): any;\r\n}\r\n"}}
