{"code":"import { __awaiter, __decorate, __generator, __metadata } from \"tslib\";\r\n/*\r\n * Copyright (c) 2021 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { SeDowngradeService } from 'smarteditcommons';\r\nimport { DisplayConditionsFacade } from '../../facades/DisplayConditionsFacade';\r\n/**\r\n * Initializes a Page data such as type, name for Primary or Variation Page.\r\n * Used as a local instance of DisplayConditionsEditor.\r\n */\r\nvar /* @ngInject */ DisplayConditionsEditorModel = /** @class */ (function () {\r\n    function /* @ngInject */ DisplayConditionsEditorModel(displayConditionsFacade) {\r\n        this.displayConditionsFacade = displayConditionsFacade;\r\n        this.variations = [];\r\n    }\r\n    /* @ngInject */ DisplayConditionsEditorModel.prototype.initModel = function (pageUid) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var page;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        this.pageUid = pageUid;\r\n                        return [4 /*yield*/, this.displayConditionsFacade.getPageInfoForPageUid(pageUid)];\r\n                    case 1:\r\n                        page = _a.sent();\r\n                        (this.pageName = page.pageName, this.pageType = page.pageType, this.isPrimary = page.isPrimary);\r\n                        if (this.isPrimary) {\r\n                            return [2 /*return*/, this.initModelForPrimary(pageUid)];\r\n                        }\r\n                        return [2 /*return*/, this.initModelForVariation(pageUid)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ DisplayConditionsEditorModel.prototype.initModelForPrimary = function (pageUid) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = this;\r\n                        return [4 /*yield*/, this.displayConditionsFacade.getVariationsForPageUid(pageUid)];\r\n                    case 1:\r\n                        _a.variations = _b.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ DisplayConditionsEditorModel.prototype.initModelForVariation = function (pageUid) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var associatedPrimaryPage;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        this.isAssociatedPrimaryReadOnly = this.pageType !== 'ContentPage';\r\n                        return [4 /*yield*/, this.displayConditionsFacade.getPrimaryPageForVariationPage(pageUid)];\r\n                    case 1:\r\n                        associatedPrimaryPage = _a.sent();\r\n                        this.associatedPrimaryPage = associatedPrimaryPage;\r\n                        this.originalPrimaryPage = associatedPrimaryPage;\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ DisplayConditionsEditorModel = __decorate([\r\n        SeDowngradeService(),\r\n        __metadata(\"design:paramtypes\", [DisplayConditionsFacade])\r\n    ], /* @ngInject */ DisplayConditionsEditorModel);\r\n    return /* @ngInject */ DisplayConditionsEditorModel;\r\n}());\r\nexport { /* @ngInject */ DisplayConditionsEditorModel };\r\n//# sourceMappingURL=DisplayConditionsEditorModel.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/facades/DisplayConditionsFacade.ts"],"map":"{\"version\":3,\"file\":\"DisplayConditionsEditorModel.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/services/pageDisplayConditions/DisplayConditionsEditorModel.ts\"],\"names\":[],\"mappings\":\";AAAA;;GAEG;AACH,OAAO,EAAE,kBAAkB,EAAE,MAAM,kBAAkB,CAAC;AAEtD,OAAO,EACH,uBAAuB,EAG1B,MAAM,uCAAuC,CAAC;AAE/C;;;GAGG;AAEH;IAUI,sDAAoB,uBAAgD;QAAhD,4BAAuB,GAAvB,uBAAuB,CAAyB;QAChE,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;IACzB,CAAC;IAEY,gEAAS,GAAtB,UAAuB,OAAe;;;;;;wBAClC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;wBAEV,qBAAM,IAAI,CAAC,uBAAuB,CAAC,qBAAqB,CAAC,OAAO,CAAC,EAAA;;wBAAxE,IAAI,GAAG,SAAiE;wBAE9E,CAAa,IAAI,CAAC,QAAQ,GAAyD,IAAI,SAA7D,EAAY,IAAI,CAAC,QAAQ,GAAgC,IAAI,SAApC,EAAa,IAAI,CAAC,SAAS,GAAK,IAAI,UAAT,CAAU,CAAC;wBAEzF,IAAI,IAAI,CAAC,SAAS,EAAE;4BAChB,sBAAO,IAAI,CAAC,mBAAmB,CAAC,OAAO,CAAC,EAAC;yBAC5C;wBACD,sBAAO,IAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,EAAC;;;;KAC9C;IAEa,0EAAmB,GAAjC,UAAkC,OAAe;;;;;;wBAC7C,KAAA,IAAI,CAAA;wBAAc,qBAAM,IAAI,CAAC,uBAAuB,CAAC,uBAAuB,CAAC,OAAO,CAAC,EAAA;;wBAArF,GAAK,UAAU,GAAG,SAAmE,CAAC;;;;;KACzF;IAEa,4EAAqB,GAAnC,UAAoC,OAAe;;;;;;wBAC/C,IAAI,CAAC,2BAA2B,GAAG,IAAI,CAAC,QAAQ,KAAK,aAAa,CAAC;wBAErC,qBAAM,IAAI,CAAC,uBAAuB,CAAC,8BAA8B,CAC3F,OAAO,CACV,EAAA;;wBAFK,qBAAqB,GAAG,SAE7B;wBAED,IAAI,CAAC,qBAAqB,GAAG,qBAAqB,CAAC;wBACnD,IAAI,CAAC,mBAAmB,GAAG,qBAAqB,CAAC;;;;;KACpD;IAxCL;QADC,kBAAkB,EAAE;yCAW4B,uBAAuB;oDA+BvE;IAAD,mDAAC;CAAA,AAzCD,IAyCC\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/services/pageDisplayConditions/DisplayConditionsEditorModel.d.ts","writeByteOrderMark":false,"text":"import { DisplayConditionsFacade, IDisplayConditionsPageVariation, IDisplayConditionsPrimaryPage } from '../../facades/DisplayConditionsFacade';\r\n/**\r\n * Initializes a Page data such as type, name for Primary or Variation Page.\r\n * Used as a local instance of DisplayConditionsEditor.\r\n */\r\nexport declare class DisplayConditionsEditorModel {\r\n    private displayConditionsFacade;\r\n    variations: IDisplayConditionsPageVariation[];\r\n    associatedPrimaryPage: Partial<IDisplayConditionsPrimaryPage>;\r\n    originalPrimaryPage: Partial<IDisplayConditionsPrimaryPage>;\r\n    isAssociatedPrimaryReadOnly: boolean;\r\n    pageType: string;\r\n    pageUid: string;\r\n    pageName: string;\r\n    isPrimary: boolean;\r\n    constructor(displayConditionsFacade: DisplayConditionsFacade);\r\n    initModel(pageUid: string): Promise<void>;\r\n    private initModelForPrimary;\r\n    private initModelForVariation;\r\n}\r\n"}}
