{"code":"import { __decorate, __metadata, __param } from \"tslib\";\r\nimport './inflectionPointSelectorWidget.scss';\r\nimport { Component, Inject } from '@angular/core';\r\nimport { fromEvent } from 'rxjs';\r\nimport { filter } from 'rxjs/operators';\r\nimport { windowUtils, IIframeClickDetectionService, OVERLAY_DISABLED_EVENT, SeDowngradeComponent, SystemEventService, YJQUERY_TOKEN } from 'smarteditcommons';\r\nimport { DEVICE_SUPPORTS } from '../iframe/DeviceSupportsValue';\r\nimport { IframeManagerService } from '../iframe/IframeManagerService';\r\nimport { IframeClickDetectionService } from '../IframeClickDetectionServiceOuter';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"InflectionPointSelectorComponent\", {\r\n    selector: 'inflection-point-selector',\r\n    template: \"<div class=\\\"se-inflection-point dropdown\\\" [class.open]=\\\"isOpen\\\" id=\\\"inflectionPtDropdown\\\"><button type=\\\"button\\\" class=\\\"se-inflection-point__toggle\\\" (click)=\\\"toggleDropdown($event)\\\" aria-pressed=\\\"false\\\" [attr.aria-expanded]=\\\"isOpen\\\"><span [ngClass]=\\\"getIconClass()\\\" class=\\\"se-inflection-point___selected\\\"></span></button><div class=\\\"se-inflection-point-dropdown\\\"><nav class=\\\"fd-menu\\\"><ul class=\\\"fd-menu__list\\\" role=\\\"menu\\\"><li *ngFor=\\\"let choice of points\\\" class=\\\"fd-menu__item inflection-point__device\\\" [ngClass]=\\\"{selected: isSelected(choice)}\\\" id=\\\"se-device-{{choice.type}}\\\" (click)=\\\"selectPoint(choice)\\\"><span [ngClass]=\\\"getIconClass(choice)\\\"></span></li></ul></nav></div></div>\"\r\n});\r\nvar /* @ngInject */ InflectionPointSelectorComponent = /** @class */ (function () {\r\n    function /* @ngInject */ InflectionPointSelectorComponent(systemEventService, iframeManagerService, iframeClickDetectionService, yjQuery) {\r\n        this.systemEventService = systemEventService;\r\n        this.iframeManagerService = iframeManagerService;\r\n        this.iframeClickDetectionService = iframeClickDetectionService;\r\n        this.yjQuery = yjQuery;\r\n        this.currentPointSelected = DEVICE_SUPPORTS.find(function (deviceSupport) { return deviceSupport.default; });\r\n        this.points = DEVICE_SUPPORTS;\r\n        this.isOpen = false;\r\n    }\r\n    /* @ngInject */ InflectionPointSelectorComponent.prototype.ngOnInit = function () {\r\n        var _this = this;\r\n        this.iframeClickDetectionService.registerCallback('inflectionPointClose', function () { return (_this.isOpen = false); });\r\n        var window = windowUtils.getWindow();\r\n        this.documentClick$ = fromEvent(window.document, 'click')\r\n            .pipe(filter(function (event) {\r\n            return _this.yjQuery(event.target).parents('inflection-point-selector').length <=\r\n                0 && _this.isOpen;\r\n        }))\r\n            .subscribe(function (event) { return (_this.isOpen = false); });\r\n        this.unRegFn = this.systemEventService.subscribe(OVERLAY_DISABLED_EVENT, function () { return (_this.isOpen = false); });\r\n    };\r\n    /* @ngInject */ InflectionPointSelectorComponent.prototype.ngOnDestroy = function () {\r\n        this.unRegFn();\r\n        this.documentClick$.unsubscribe();\r\n    };\r\n    /* @ngInject */ InflectionPointSelectorComponent.prototype.selectPoint = function (choice) {\r\n        this.currentPointSelected = choice;\r\n        this.isOpen = !this.isOpen;\r\n        if (choice !== undefined) {\r\n            this.iframeManagerService.apply(choice);\r\n        }\r\n    };\r\n    /* @ngInject */ InflectionPointSelectorComponent.prototype.toggleDropdown = function (event) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        this.isOpen = !this.isOpen;\r\n    };\r\n    /* @ngInject */ InflectionPointSelectorComponent.prototype.getIconClass = function (choice) {\r\n        if (choice !== undefined) {\r\n            return choice.iconClass;\r\n        }\r\n        else {\r\n            return this.currentPointSelected.iconClass;\r\n        }\r\n    };\r\n    /* @ngInject */ InflectionPointSelectorComponent.prototype.isSelected = function (choice) {\r\n        if (choice !== undefined) {\r\n            return choice.type === this.currentPointSelected.type;\r\n        }\r\n        return false;\r\n    };\r\n    /* @ngInject */ InflectionPointSelectorComponent = __decorate([\r\n        SeDowngradeComponent(),\r\n        Component({\r\n            selector: 'inflection-point-selector',\r\n            template: \"<div class=\\\"se-inflection-point dropdown\\\" [class.open]=\\\"isOpen\\\" id=\\\"inflectionPtDropdown\\\"><button type=\\\"button\\\" class=\\\"se-inflection-point__toggle\\\" (click)=\\\"toggleDropdown($event)\\\" aria-pressed=\\\"false\\\" [attr.aria-expanded]=\\\"isOpen\\\"><span [ngClass]=\\\"getIconClass()\\\" class=\\\"se-inflection-point___selected\\\"></span></button><div class=\\\"se-inflection-point-dropdown\\\"><nav class=\\\"fd-menu\\\"><ul class=\\\"fd-menu__list\\\" role=\\\"menu\\\"><li *ngFor=\\\"let choice of points\\\" class=\\\"fd-menu__item inflection-point__device\\\" [ngClass]=\\\"{selected: isSelected(choice)}\\\" id=\\\"se-device-{{choice.type}}\\\" (click)=\\\"selectPoint(choice)\\\"><span [ngClass]=\\\"getIconClass(choice)\\\"></span></li></ul></nav></div></div>\"\r\n        }),\r\n        __param(2, Inject(IIframeClickDetectionService)),\r\n        __param(3, Inject(YJQUERY_TOKEN)),\r\n        __metadata(\"design:paramtypes\", [SystemEventService,\r\n            IframeManagerService,\r\n            IframeClickDetectionService, Function])\r\n    ], /* @ngInject */ InflectionPointSelectorComponent);\r\n    return /* @ngInject */ InflectionPointSelectorComponent;\r\n}());\r\nexport { /* @ngInject */ InflectionPointSelectorComponent };\r\n//# sourceMappingURL=InflectionPointSelectorComponent.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/rxjs@6.5.4/node_modules/rxjs/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/rxjs@6.5.4/node_modules/rxjs/operators/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-container/src/services/iframe/DeviceSupportsValue.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-container/src/services/iframe/IframeManagerService.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-container/src/services/IframeClickDetectionServiceOuter.ts"],"map":"{\"version\":3,\"file\":\"InflectionPointSelectorComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/services/inflectionPointSelectorWidget/InflectionPointSelectorComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-container/services/inflectionPointSelectorWidget/InflectionPointSelectorComponent.d.ts","writeByteOrderMark":false,"text":"import './inflectionPointSelectorWidget.scss';\r\nimport { OnDestroy, OnInit } from '@angular/core';\r\nimport { SystemEventService, YJQuery } from 'smarteditcommons';\r\nimport { DeviceSupport } from '../iframe/DeviceSupportsValue';\r\nimport { IframeManagerService } from '../iframe/IframeManagerService';\r\nimport { IframeClickDetectionService } from '../IframeClickDetectionServiceOuter';\r\nexport declare class InflectionPointSelectorComponent implements OnInit, OnDestroy {\r\n    private systemEventService;\r\n    private iframeManagerService;\r\n    private iframeClickDetectionService;\r\n    private yjQuery;\r\n    points: DeviceSupport[];\r\n    currentPointSelected: DeviceSupport | undefined;\r\n    isOpen: boolean;\r\n    private unRegFn;\r\n    private documentClick$;\r\n    constructor(systemEventService: SystemEventService, iframeManagerService: IframeManagerService, iframeClickDetectionService: IframeClickDetectionService, yjQuery: YJQuery);\r\n    ngOnInit(): void;\r\n    ngOnDestroy(): void;\r\n    selectPoint(choice: DeviceSupport): void;\r\n    toggleDropdown(event: MouseEvent): void;\r\n    getIconClass(choice: DeviceSupport | undefined): string;\r\n    isSelected(choice: DeviceSupport | undefined): boolean;\r\n}\r\n"}}
