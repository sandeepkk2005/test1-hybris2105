{"code":"import { __awaiter, __decorate, __generator, __metadata, __param } from \"tslib\";\r\nimport { Component, Inject, ViewEncapsulation } from '@angular/core';\r\nimport { CONTEXT_SITE_ID } from 'cmscommons';\r\nimport { SeDowngradeComponent, GENERIC_EDITOR_WIDGET_DATA, ICatalogService } from 'smarteditcommons';\r\nimport { SingeActiveCatalogAwareItemSelectorItemRendererComponent } from './SingeActiveCatalogAwareItemSelectorItemRendererComponent';\r\nexport var SINGLE_CATALOG_AWARE_ITEM_MAPPING;\r\n(function (SINGLE_CATALOG_AWARE_ITEM_MAPPING) {\r\n    SINGLE_CATALOG_AWARE_ITEM_MAPPING[\"SingleOnlineProductSelector\"] = \"product\";\r\n    SINGLE_CATALOG_AWARE_ITEM_MAPPING[\"SingleOnlineCategorySelector\"] = \"category\";\r\n})(SINGLE_CATALOG_AWARE_ITEM_MAPPING || (SINGLE_CATALOG_AWARE_ITEM_MAPPING = {}));\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"SingleActiveCatalogAwareItemSelectorComponent\", {\r\n    selector: 'se-single-active-catalog-aware-item-selector',\r\n    template: \"<div *ngIf=\\\"propertyType\\\"><div id=\\\"product-catalog\\\"><label class=\\\"se-control-label\\\" [ngClass]=\\\"{ 'required': field.required }\\\" *ngIf=\\\"catalogs.length === 1\\\">{{ catalogName | seL10n | async }}</label><se-generic-editor-dropdown id=\\\"se-catalog-selector-dropdown\\\" *ngIf=\\\"catalogs.length > 1\\\" [field]=\\\"productCatalogField\\\" [qualifier]=\\\"'productCatalog'\\\" [model]=\\\"model\\\"></se-generic-editor-dropdown></div><div><label class=\\\"se-control-label\\\" [translate]=\\\"mainDropDownI18nKey\\\"></label><se-generic-editor-dropdown id=\\\"se-items-selector-dropdown\\\" [field]=\\\"field\\\" [qualifier]=\\\"qualifier\\\" [model]=\\\"model\\\" [itemComponent]=\\\"itemComponent\\\"></se-generic-editor-dropdown></div></div><div class=\\\"product-catalog-item-type-missing\\\" *ngIf=\\\"!propertyType\\\" translate=\\\"se.cms.catalogawareitem.itemtype.notsupported\\\"></div>\",\r\n    styles: [\"se-single-active-catalog-aware-item-selector .se-single-catalog-item{display:grid;grid-template-columns:1fr auto;grid-column-gap:1rem}se-single-active-catalog-aware-item-selector .se-single-catalog-item__label{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}se-single-active-catalog-aware-item-selector .selected-item>.se-item-printer{width:100%;padding-right:12px}\"],\r\n    encapsulation: ViewEncapsulation.None\r\n});\r\nvar /* @ngInject */ SingleActiveCatalogAwareItemSelectorComponent = /** @class */ (function () {\r\n    function /* @ngInject */ SingleActiveCatalogAwareItemSelectorComponent(data, catalogService) {\r\n        var _a;\r\n        this.data = data;\r\n        this.catalogService = catalogService;\r\n        (_a = this.data, this.editor = _a.editor, this.field = _a.field, this.model = _a.model, this.qualifier = _a.qualifier);\r\n        this.catalogName = {};\r\n        this.catalogs = [];\r\n        this.itemComponent = SingeActiveCatalogAwareItemSelectorItemRendererComponent;\r\n    }\r\n    /* @ngInject */ SingleActiveCatalogAwareItemSelectorComponent.prototype.ngOnInit = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                this.augmentDropdownAttributes();\r\n                return [2 /*return*/, this.initProductCatalogs()];\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ SingleActiveCatalogAwareItemSelectorComponent.prototype.augmentDropdownAttributes = function () {\r\n        this.propertyType = this.getFieldPropertyType(this.field);\r\n        if (this.propertyType) {\r\n            this.productCatalogField = {\r\n                idAttribute: 'catalogId',\r\n                labelAttributes: ['name'],\r\n                editable: true,\r\n                propertyType: 'productCatalog'\r\n            };\r\n            this.mainDropDownI18nKey = this.field.i18nKey;\r\n            delete this.field.i18nKey;\r\n            this.field.paged = true;\r\n            this.field.editable = true;\r\n            this.field.idAttribute = 'uid';\r\n            this.field.labelAttributes = ['name'];\r\n            this.field.dependsOn = 'productCatalog';\r\n            this.field.propertyType = this.propertyType;\r\n        }\r\n    };\r\n    /* @ngInject */ SingleActiveCatalogAwareItemSelectorComponent.prototype.initProductCatalogs = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var catalogs;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.catalogService.getProductCatalogsBySiteKey(CONTEXT_SITE_ID)];\r\n                    case 1:\r\n                        catalogs = _a.sent();\r\n                        this.catalogs = catalogs;\r\n                        if (this.catalogs.length === 1) {\r\n                            this.model.productCatalog = this.catalogs[0].catalogId;\r\n                            this.editor.form.pristine.productCatalog = this.catalogs[0].catalogId;\r\n                            this.catalogName = this.catalogs[0].name;\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ SingleActiveCatalogAwareItemSelectorComponent.prototype.getFieldPropertyType = function (field) {\r\n        var type = field.cmsStructureType;\r\n        return SINGLE_CATALOG_AWARE_ITEM_MAPPING[type];\r\n    };\r\n    /* @ngInject */ SingleActiveCatalogAwareItemSelectorComponent = __decorate([\r\n        SeDowngradeComponent(),\r\n        Component({\r\n            selector: 'se-single-active-catalog-aware-item-selector',\r\n            template: \"<div *ngIf=\\\"propertyType\\\"><div id=\\\"product-catalog\\\"><label class=\\\"se-control-label\\\" [ngClass]=\\\"{ 'required': field.required }\\\" *ngIf=\\\"catalogs.length === 1\\\">{{ catalogName | seL10n | async }}</label><se-generic-editor-dropdown id=\\\"se-catalog-selector-dropdown\\\" *ngIf=\\\"catalogs.length > 1\\\" [field]=\\\"productCatalogField\\\" [qualifier]=\\\"'productCatalog'\\\" [model]=\\\"model\\\"></se-generic-editor-dropdown></div><div><label class=\\\"se-control-label\\\" [translate]=\\\"mainDropDownI18nKey\\\"></label><se-generic-editor-dropdown id=\\\"se-items-selector-dropdown\\\" [field]=\\\"field\\\" [qualifier]=\\\"qualifier\\\" [model]=\\\"model\\\" [itemComponent]=\\\"itemComponent\\\"></se-generic-editor-dropdown></div></div><div class=\\\"product-catalog-item-type-missing\\\" *ngIf=\\\"!propertyType\\\" translate=\\\"se.cms.catalogawareitem.itemtype.notsupported\\\"></div>\",\r\n            styles: [\"se-single-active-catalog-aware-item-selector .se-single-catalog-item{display:grid;grid-template-columns:1fr auto;grid-column-gap:1rem}se-single-active-catalog-aware-item-selector .se-single-catalog-item__label{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}se-single-active-catalog-aware-item-selector .selected-item>.se-item-printer{width:100%;padding-right:12px}\"],\r\n            encapsulation: ViewEncapsulation.None\r\n        }),\r\n        __param(0, Inject(GENERIC_EDITOR_WIDGET_DATA)),\r\n        __metadata(\"design:paramtypes\", [Object, ICatalogService])\r\n    ], /* @ngInject */ SingleActiveCatalogAwareItemSelectorComponent);\r\n    return /* @ngInject */ SingleActiveCatalogAwareItemSelectorComponent;\r\n}());\r\nexport { /* @ngInject */ SingleActiveCatalogAwareItemSelectorComponent };\r\n//# sourceMappingURL=SingleActiveCatalogAwareItemSelectorComponent.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/legacyGenericEditor/singleActiveCatalogAwareSelector/SingeActiveCatalogAwareItemSelectorItemRendererComponent.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/legacyGenericEditor/singleActiveCatalogAwareSelector/types.ts"],"map":"{\"version\":3,\"file\":\"SingleActiveCatalogAwareItemSelectorComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/components/legacyGenericEditor/singleActiveCatalogAwareSelector/SingleActiveCatalogAwareItemSelectorComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/components/legacyGenericEditor/singleActiveCatalogAwareSelector/SingleActiveCatalogAwareItemSelectorComponent.d.ts","writeByteOrderMark":false,"text":"import { OnInit } from '@angular/core';\r\nimport { GenericEditorWidgetData, GenericEditorField, ICatalogService, IBaseCatalog, IGenericEditor, TypedMap } from 'smarteditcommons';\r\nimport { SingeActiveCatalogAwareItemSelectorItemRendererComponent } from './SingeActiveCatalogAwareItemSelectorItemRendererComponent';\r\nimport { CMSLinkItem } from './types';\r\nexport declare enum SINGLE_CATALOG_AWARE_ITEM_MAPPING {\r\n    SingleOnlineProductSelector = \"product\",\r\n    SingleOnlineCategorySelector = \"category\"\r\n}\r\nexport declare class SingleActiveCatalogAwareItemSelectorComponent implements OnInit {\r\n    private data;\r\n    private catalogService;\r\n    mainDropDownI18nKey: string;\r\n    propertyType: SINGLE_CATALOG_AWARE_ITEM_MAPPING;\r\n    qualifier: string;\r\n    catalogName: TypedMap<string>;\r\n    catalogs: IBaseCatalog[];\r\n    editor: IGenericEditor;\r\n    field: GenericEditorField;\r\n    itemComponent: typeof SingeActiveCatalogAwareItemSelectorItemRendererComponent;\r\n    model: CMSLinkItem;\r\n    productCatalogField: GenericEditorField;\r\n    constructor(data: GenericEditorWidgetData<CMSLinkItem>, catalogService: ICatalogService);\r\n    ngOnInit(): Promise<void>;\r\n    private augmentDropdownAttributes;\r\n    private initProductCatalogs;\r\n    private getFieldPropertyType;\r\n}\r\n"}}
