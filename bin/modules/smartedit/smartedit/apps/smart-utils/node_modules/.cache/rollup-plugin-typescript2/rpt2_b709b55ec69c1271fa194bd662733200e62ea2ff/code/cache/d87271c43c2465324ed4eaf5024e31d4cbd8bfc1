{"code":"/*\r\n * Copyright (c) 2021 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\n/**\r\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n * @module smartutils\r\n */\r\nimport { __decorate, __metadata } from \"tslib\";\r\nimport { Input } from '@angular/core';\r\nimport { DEFAULT_LANGUAGE_ISO, SWITCH_LANGUAGE_EVENT } from '../../constants';\r\nimport { LanguageDropdownAdapter } from './language-dropdown-adapter';\r\nimport { LanguageDropdownHelper, LanguageSortStrategy } from './language-dropdown-helper';\r\nvar LanguageDropdown = /** @class */ (function () {\r\n    function LanguageDropdown(languageService, eventService) {\r\n        this.languageService = languageService;\r\n        this.eventService = eventService;\r\n        this.languageSortStrategy = LanguageSortStrategy.Default;\r\n        this.selectedLanguage = null;\r\n        this.items = [];\r\n        this.initialLanguage = null;\r\n        this.languages = [];\r\n        this.unRegisterEventService = null;\r\n    }\r\n    LanguageDropdown.prototype.ngOnInit = function () {\r\n        var _this = this;\r\n        Promise.all([\r\n            this.languageService.getResolveLocale(),\r\n            this.languageService.getToolingLanguages()\r\n        ]).then(function (_a) {\r\n            var isoCode = _a[0], languages = _a[1];\r\n            _this.items = languages.map(LanguageDropdownAdapter.transform);\r\n            _this.languages = languages;\r\n            _this.setSelectedLanguage(isoCode);\r\n            _this.setInitialLanguage(isoCode);\r\n        });\r\n        this.unRegisterEventService = this.eventService.subscribe(SWITCH_LANGUAGE_EVENT, function () {\r\n            return _this.handleLanguageChange();\r\n        });\r\n    };\r\n    LanguageDropdown.prototype.ngOnDestroy = function () {\r\n        this.unRegisterEventService();\r\n    };\r\n    /**\r\n     * Triggered when an user selects a language.\r\n     * @param {IToolingLanguage} language\r\n     */\r\n    LanguageDropdown.prototype.onSelectedLanguage = function (item) {\r\n        this.languageService.setSelectedToolingLanguage(item.value);\r\n    };\r\n    /**\r\n     * Set initial language to be displayed in dropdown\r\n     *\r\n     * @param {string} isoCode\r\n     */\r\n    LanguageDropdown.prototype.setInitialLanguage = function (isoCode) {\r\n        this.initialLanguage =\r\n            this.items.find(LanguageDropdownHelper.findSelectLanguageWithIsoCodePredicate(isoCode)) ||\r\n                this.items.find(LanguageDropdownHelper.findSelectLanguageWithIsoCodePredicate(DEFAULT_LANGUAGE_ISO));\r\n    };\r\n    /**\r\n     * Triggered onInit and when language service sets a new language.\r\n     *\r\n     * @param {IToolingLanguage[]} languages\r\n     * @param {string} isoCode\r\n     */\r\n    LanguageDropdown.prototype.setSelectedLanguage = function (isoCode) {\r\n        var _this = this;\r\n        this.selectedLanguage = LanguageDropdownHelper.findLanguageWithIsoCode(isoCode, this.languages);\r\n        if (this.selectedLanguage) {\r\n            var sortedLanguages = LanguageDropdownHelper.order(this.selectedLanguage, this.languages, { strategy: this.languageSortStrategy });\r\n            this.items = sortedLanguages.map(LanguageDropdownAdapter.transform);\r\n            return;\r\n        }\r\n        // In case the iso code is too specific, it will use the more generic iso code to set the language.\r\n        this.languageService.getResolveLocaleIsoCode().then(function (code) {\r\n            _this.selectedLanguage = LanguageDropdownHelper.findLanguageWithIsoCode(code, _this.languages);\r\n            var sortedLanguages = LanguageDropdownHelper.order(_this.selectedLanguage, _this.languages, { strategy: _this.languageSortStrategy });\r\n            _this.items = sortedLanguages.map(LanguageDropdownAdapter.transform);\r\n        });\r\n    };\r\n    /**\r\n     * Callback for setting the selected language.\r\n     */\r\n    LanguageDropdown.prototype.handleLanguageChange = function () {\r\n        var _this = this;\r\n        this.languageService.getResolveLocale().then(function (isoCode) {\r\n            _this.setSelectedLanguage(isoCode);\r\n        });\r\n    };\r\n    __decorate([\r\n        Input(),\r\n        __metadata(\"design:type\", String)\r\n    ], LanguageDropdown.prototype, \"languageSortStrategy\", void 0);\r\n    return LanguageDropdown;\r\n}());\r\nexport { LanguageDropdown };\r\n//# sourceMappingURL=language-dropdown.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/src/constants.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/src/interfaces/i-event.service.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/src/interfaces/i-select-item.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/src/services/language.service.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/src/components/language-dropdown/language-dropdown-adapter.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/src/components/language-dropdown/language-dropdown-helper.ts"],"map":"{\"version\":3,\"file\":\"language-dropdown.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/components/language-dropdown/language-dropdown.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/components/language-dropdown/language-dropdown.d.ts","writeByteOrderMark":false,"text":"/**\r\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n * @module smartutils\r\n */\r\nimport { IEventService } from '../../interfaces/i-event.service';\r\nimport { ISelectItem } from '../../interfaces/i-select-item';\r\nimport { IToolingLanguage, LanguageService } from '../../services/language.service';\r\nimport { LanguageSortStrategy } from './language-dropdown-helper';\r\nexport declare class LanguageDropdown {\r\n    languageService: LanguageService;\r\n    eventService: IEventService;\r\n    languageSortStrategy: LanguageSortStrategy;\r\n    selectedLanguage: IToolingLanguage;\r\n    items: ISelectItem<IToolingLanguage>[];\r\n    initialLanguage: ISelectItem<IToolingLanguage>;\r\n    private languages;\r\n    private unRegisterEventService;\r\n    constructor(languageService: LanguageService, eventService: IEventService);\r\n    ngOnInit(): void;\r\n    ngOnDestroy(): void;\r\n    /**\r\n     * Triggered when an user selects a language.\r\n     * @param {IToolingLanguage} language\r\n     */\r\n    onSelectedLanguage(item: ISelectItem<IToolingLanguage>): void;\r\n    /**\r\n     * Set initial language to be displayed in dropdown\r\n     *\r\n     * @param {string} isoCode\r\n     */\r\n    private setInitialLanguage;\r\n    /**\r\n     * Triggered onInit and when language service sets a new language.\r\n     *\r\n     * @param {IToolingLanguage[]} languages\r\n     * @param {string} isoCode\r\n     */\r\n    private setSelectedLanguage;\r\n    /**\r\n     * Callback for setting the selected language.\r\n     */\r\n    private handleLanguageChange;\r\n}\r\n"}}
