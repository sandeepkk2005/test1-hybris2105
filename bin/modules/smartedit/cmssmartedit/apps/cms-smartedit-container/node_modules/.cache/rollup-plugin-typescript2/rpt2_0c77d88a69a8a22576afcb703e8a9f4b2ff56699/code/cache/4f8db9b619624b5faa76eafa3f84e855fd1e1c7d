{"code":"import { __awaiter, __decorate, __generator, __metadata, __param } from \"tslib\";\r\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, Inject, ViewEncapsulation } from '@angular/core';\r\nimport { WORKFLOW_FINISHED_EVENT, IPageService } from 'cmscommons';\r\nimport { EVENT_PERSPECTIVE_CHANGED, SeDowngradeComponent, SmarteditRoutingService, SystemEventService, TOOLBAR_ITEM } from 'smarteditcommons';\r\nimport { CMS_EVENT_OPEN_PAGE_WORKFLOW_MENU, WORKFLOW_DECISION_SELECTED_EVENT, WORKFLOW_REFRESH_EVENT, WORKFLOW_TASKS_MENU_OPENED_EVENT } from '../../constants';\r\nimport { WorkflowActionStatus } from '../../dtos';\r\nimport { WorkflowFacade } from '../../services/WorkflowFacade';\r\nimport { WorkflowService } from '../../services/WorkflowService';\r\nimport { PageWorkflowMenuAllTasksTabComponent } from './tabs/PageWorkflowMenuAllTasksTabComponent';\r\nimport { PageWorkflowMenuCurrentTasksTabComponent } from './tabs/PageWorkflowMenuCurrentTasksTabComponent';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"PageWorkflowMenuComponent\", {\r\n    selector: 'se-page-workflow-menu',\r\n    template: \"<div *ngIf=\\\"isReady\\\"><div *ngIf=\\\"!pageHasWorkflow && isWorkflowEnabled\\\"><ng-container *seHasOperationPermission=\\\"'se.start.page.workflow'\\\"><button id=\\\"smartEditPerspectiveToolbar_option_se.cms.startWorkflow_btn\\\" class=\\\"btn toolbar-action--button\\\" type=\\\"button\\\" (click)=\\\"startWorkflow()\\\" aria-expanded=\\\"false\\\"><span id=\\\"smartEditPerspectiveToolbar_option_se.cms.startWorkflow_btn_lbl\\\" class=\\\"toolbar-action-button__txt\\\" translate=\\\"se.cms.workflow.toolbar.start.workflow\\\"></span></button></ng-container></div><div *seHasOperationPermission=\\\"'se.view.page.workflowMenu'\\\"><fd-popover *ngIf=\\\"pageHasWorkflow\\\" class=\\\"toolbar-action\\\" [closeOnOutsideClick]=\\\"true\\\" [isOpen]=\\\"actionItem.isOpen\\\" (isOpenChange)=\\\"onDropdownToggle($event)\\\"><fd-popover-control><button type=\\\"button\\\" class=\\\"page-tasks-btn toolbar-action--button\\\" [attr.aria-expanded]=\\\"actionItem.isOpen\\\"><span class=\\\"page-tasks-btn__icon sap-icon--workflow-tasks\\\"></span> <span class=\\\"page-tasks-btn__label\\\" translate=\\\"se.cms.workflow.toolbar.view.workflow.menu\\\"></span></button></fd-popover-control><fd-popover-body><div *ngIf=\\\"actionItem.isOpen\\\" class=\\\"toolbar-action--include se-page-workflow-menu\\\"><div class=\\\"se-page-workflow-menu__header\\\"><div class=\\\"se-page-workflow-menu__header-text\\\" translate=\\\"se.cms.workflow.toolbar.view.workflow.menu\\\"></div><div class=\\\"se-page-workflow-menu__header-menu\\\"><se-workflow-item-menu [workflowInfo]=\\\"workflow\\\"></se-workflow-item-menu></div></div><div class=\\\"se-version-toolbar-menu-content__body\\\"><div class=\\\"se-page-workflow-menu-tabs\\\"><se-tabs *ngIf=\\\"areTabsReady; else spinner\\\" [tabsList]=\\\"tabsList\\\" [model]=\\\"tabsData\\\" [numTabsDisplayed]=\\\"2\\\"></se-tabs><ng-template #spinner><se-spinner [isSpinning]=\\\"true\\\"></se-spinner></ng-template></div></div></div></fd-popover-body></fd-popover></div></div>\",\r\n    styles: [\"/*!\\n * Fundamental Library Styles v0.4.1\\n * Copyright (c) 2020 SAP SE or an SAP affiliate company.\\n * Licensed under Apache License 2.0 (https://github.com/SAP/fundamental-styles/blob/master/LICENSE)\\n *//*!\\n.fd-button-split+()\\n    .fd-button\\n*/.fd-button-split{font-size:.875rem;font-size:var(--sapFontSize,.875rem);line-height:1.42857;color:#32363a;color:var(--sapTextColor,#32363a);font-family:\\\"72\\\",\\\"72full\\\",Arial,Helvetica,sans-serif;font-family:var(--sapFontFamily, \\\"72\\\", \\\"72full\\\", Arial, Helvetica, sans-serif);font-weight:400;-webkit-font-smoothing:antialiased;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0;margin:0;border:0;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;position:relative}.fd-button-split:after,.fd-button-split:before{-webkit-box-sizing:inherit;box-sizing:inherit;font-size:inherit}.fd-button-split :first-child{margin:0;border-top-right-radius:0;border-bottom-right-radius:0}.fd-button-split :nth-child(2){margin:0;border-top-left-radius:0;border-bottom-left-radius:0;border-left-width:0}.fd-button-split[dir=rtl] :first-child,[dir=rtl] .fd-button-split :first-child{border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:.25rem;border-top-right-radius:var(--sapButton_BorderCornerRadius,.25rem);border-bottom-right-radius:.25rem;border-bottom-right-radius:var(--sapButton_BorderCornerRadius,.25rem)}.fd-button-split[dir=rtl] :nth-child(2),[dir=rtl] .fd-button-split :nth-child(2){border-top-left-radius:.25rem;border-top-left-radius:var(--sapButton_BorderCornerRadius,.25rem);border-bottom-left-radius:.25rem;border-bottom-left-radius:var(--sapButton_BorderCornerRadius,.25rem);border-top-right-radius:0;border-bottom-right-radius:0;border-left-width:.0625rem;border-left-width:var(--sapButton_BorderWidth,.0625rem);border-right-width:0}.fd-button-split [class*=\\\"--emphasized\\\"]:first-child{margin-right:1px}.fd-button-split [class*=\\\"--emphasized\\\"][dir=rtl]:first-child,[dir=rtl] .fd-button-split [class*=\\\"--emphasized\\\"]:first-child{margin-right:0;margin-left:1px}se-page-workflow-menu .toolbar-action .page-tasks-btn[aria-expanded=true]{background-color:rgba(10,110,209,.07)}se-page-workflow-menu .toolbar-action .page-tasks-btn__label{font-size:14px;color:#32363a}se-page-workflow-menu .toolbar-action .page-tasks-btn__icon{color:#0a6ed1;font-size:18px;margin-right:8px}se-page-workflow-menu .se-page-workflow-menu{box-shadow:0 6px 12px rgba(0,0,0,.175);background-color:#fff;border-radius:4px!important;min-width:100px;width:fit-content;position:absolute;border:1px solid #d9d9d9;z-index:2000;top:96%;min-width:350px;min-height:130px;right:-126px;left:auto;font-size:14px;font-family:'72',-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;line-height:20/14}se-page-workflow-menu .se-page-workflow-menu::before{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#d9d9d9;border-bottom-color:var(var(--fd-color-neutral-4));border-left-color:transparent;border-right-color:transparent;content:\\\"\\\";position:absolute;top:-8px}se-page-workflow-menu .se-page-workflow-menu::after{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#fff;border-bottom-color:var(var(--fd-color-background-4));border-left-color:transparent;border-right-color:transparent;content:\\\"\\\";position:absolute;top:-7px}se-page-workflow-menu .se-page-workflow-menu,se-page-workflow-menu .se-page-workflow-menu::after,se-page-workflow-menu .se-page-workflow-menu::before{left:50%;transform:translate(-50%)}se-page-workflow-menu .se-page-workflow-menu__header{display:flex;justify-content:space-between}se-page-workflow-menu .se-page-workflow-menu__header-text{font-size:16px;padding:20px 0 0 16px}se-page-workflow-menu .se-page-workflow-menu__header-menu{padding:16px 16px 0 0}se-page-workflow-menu .se-page-workflow-menu-tabs .se-tabset{margin:0}se-page-workflow-menu .se-page-workflow-menu-tabs .se-tabset__tab{margin-left:16px}se-page-workflow-menu .se-page-workflow-menu-tabs .se-tabset__link{color:#32363a}se-page-workflow-menu .se-page-workflow-menu-tabs .se-tabset__link:hover{color:#0a6ed1}\"],\r\n    encapsulation: ViewEncapsulation.None,\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n});\r\nvar /* @ngInject */ PageWorkflowMenuComponent = /** @class */ (function () {\r\n    function /* @ngInject */ PageWorkflowMenuComponent(workflowService, workflowFacade, systemEventService, routingService, pageService, cdr, actionItem) {\r\n        this.workflowService = workflowService;\r\n        this.workflowFacade = workflowFacade;\r\n        this.systemEventService = systemEventService;\r\n        this.routingService = routingService;\r\n        this.pageService = pageService;\r\n        this.cdr = cdr;\r\n        this.actionItem = actionItem;\r\n        this.isReady = false;\r\n        this.isWorkflowEnabled = false;\r\n        this.areTabsReady = false;\r\n        this.pageHasWorkflow = false;\r\n        this.tabsList = [\r\n            {\r\n                id: 'currentTasksTab',\r\n                title: 'se.cms.page.workflow.tabs.currenttasks',\r\n                hasErrors: false,\r\n                component: PageWorkflowMenuCurrentTasksTabComponent\r\n            },\r\n            {\r\n                id: 'allTasksTab',\r\n                title: 'se.cms.page.workflow.tabs.alltasks',\r\n                hasErrors: false,\r\n                component: PageWorkflowMenuAllTasksTabComponent\r\n            }\r\n        ];\r\n        this.tabsData = {\r\n            workflow: null,\r\n            actions: []\r\n        };\r\n    }\r\n    /* @ngInject */ PageWorkflowMenuComponent.prototype.ngOnInit = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        this.unRegOpenMenuEvent = this.systemEventService.subscribe(CMS_EVENT_OPEN_PAGE_WORKFLOW_MENU, function (_eventId, open) { return _this.onDropdownToggle(open); });\r\n                        this.unRegPerspectiveChangedEvent = this.systemEventService.subscribe(EVENT_PERSPECTIVE_CHANGED, function () { return _this.loadWorkflow(); });\r\n                        this.unRegWorkflowFinishedEvent = this.systemEventService.subscribe(WORKFLOW_FINISHED_EVENT, function () { return _this.loadWorkflow(); });\r\n                        this.unRegDecisionSelectedEvent = this.systemEventService.subscribe(WORKFLOW_DECISION_SELECTED_EVENT, function () { return _this.closeDropdown(); });\r\n                        this.unRegWorkflowRefreshEvent = this.systemEventService.subscribe(WORKFLOW_REFRESH_EVENT, function () { return _this.loadWorkflow(); });\r\n                        return [4 /*yield*/, this.loadWorkflow()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        this.isReady = true;\r\n                        this.actionItem.isOpen = false;\r\n                        this.cdr.detectChanges();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ PageWorkflowMenuComponent.prototype.ngOnDestroy = function () {\r\n        this.unRegOpenMenuEvent();\r\n        this.unRegPerspectiveChangedEvent();\r\n        this.unRegWorkflowFinishedEvent();\r\n        this.unRegDecisionSelectedEvent();\r\n        this.unRegWorkflowRefreshEvent();\r\n    };\r\n    Object.defineProperty(/* @ngInject */ PageWorkflowMenuComponent.prototype, \"workflow\", {\r\n        get: function () {\r\n            return this._workflow;\r\n        },\r\n        set: function (value) {\r\n            this._workflow = value;\r\n            this.tabsData.workflow = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /* @ngInject */ PageWorkflowMenuComponent.prototype.onDropdownToggle = function (open) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        this.actionItem.isOpen = open;\r\n                        if (!open) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        this.systemEventService.publish(WORKFLOW_TASKS_MENU_OPENED_EVENT);\r\n                        return [4 /*yield*/, this.loadWorkflowAndActions()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ PageWorkflowMenuComponent.prototype.startWorkflow = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.workflowFacade.startWorkflow()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        this.routingService.reload();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ PageWorkflowMenuComponent.prototype.loadWorkflowAndActions = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        this.areTabsReady = false;\r\n                        this.cdr.detectChanges();\r\n                        return [4 /*yield*/, this.loadWorkflow(false)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.loadActions()];\r\n                    case 2:\r\n                        _a.sent();\r\n                        this.areTabsReady = true;\r\n                        this.cdr.detectChanges();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ PageWorkflowMenuComponent.prototype.loadWorkflow = function (detectChanges) {\r\n        if (detectChanges === void 0) { detectChanges = true; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var page, workflow;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.pageService.getCurrentPageInfo()];\r\n                    case 1:\r\n                        page = _a.sent();\r\n                        return [4 /*yield*/, this.workflowService.getActiveWorkflowForPageUuid(page.uuid)];\r\n                    case 2:\r\n                        workflow = _a.sent();\r\n                        this.workflow = workflow;\r\n                        this.pageHasWorkflow = !!workflow;\r\n                        this.isWorkflowEnabled = page.displayStatus === 'DRAFT';\r\n                        if (detectChanges) {\r\n                            this.cdr.detectChanges();\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ PageWorkflowMenuComponent.prototype.loadActions = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var actions;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.workflowFacade.getAllActionsForWorkflow(this.workflow.workflowCode)];\r\n                    case 1:\r\n                        actions = _a.sent();\r\n                        this.setActions(actions);\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ PageWorkflowMenuComponent.prototype.setActions = function (actions) {\r\n        var _this = this;\r\n        actions.sort(function (a, b) { return _this.actionComparator(a, b); });\r\n        this.tabsData.actions = actions;\r\n    };\r\n    /* @ngInject */ PageWorkflowMenuComponent.prototype.closeDropdown = function () {\r\n        this.actionItem.isOpen = false;\r\n        this.cdr.detectChanges();\r\n    };\r\n    /* @ngInject */ PageWorkflowMenuComponent.prototype.actionComparator = function (a, b) {\r\n        var priorityA = this.getActionPriority(a);\r\n        var priorityB = this.getActionPriority(b);\r\n        return priorityA !== priorityB\r\n            ? priorityA - priorityB\r\n            : a.startedAgoInMillis - b.startedAgoInMillis;\r\n    };\r\n    /* @ngInject */ PageWorkflowMenuComponent.prototype.getActionPriority = function (action) {\r\n        switch (action.status.toLowerCase()) {\r\n            case WorkflowActionStatus.IN_PROGRESS:\r\n                return 1;\r\n            case WorkflowActionStatus.PENDING:\r\n                return 2;\r\n            case WorkflowActionStatus.COMPLETED:\r\n                return 3;\r\n            default:\r\n                return 4;\r\n        }\r\n    };\r\n    /* @ngInject */ PageWorkflowMenuComponent = __decorate([\r\n        SeDowngradeComponent(),\r\n        Component({\r\n            selector: 'se-page-workflow-menu',\r\n            template: \"<div *ngIf=\\\"isReady\\\"><div *ngIf=\\\"!pageHasWorkflow && isWorkflowEnabled\\\"><ng-container *seHasOperationPermission=\\\"'se.start.page.workflow'\\\"><button id=\\\"smartEditPerspectiveToolbar_option_se.cms.startWorkflow_btn\\\" class=\\\"btn toolbar-action--button\\\" type=\\\"button\\\" (click)=\\\"startWorkflow()\\\" aria-expanded=\\\"false\\\"><span id=\\\"smartEditPerspectiveToolbar_option_se.cms.startWorkflow_btn_lbl\\\" class=\\\"toolbar-action-button__txt\\\" translate=\\\"se.cms.workflow.toolbar.start.workflow\\\"></span></button></ng-container></div><div *seHasOperationPermission=\\\"'se.view.page.workflowMenu'\\\"><fd-popover *ngIf=\\\"pageHasWorkflow\\\" class=\\\"toolbar-action\\\" [closeOnOutsideClick]=\\\"true\\\" [isOpen]=\\\"actionItem.isOpen\\\" (isOpenChange)=\\\"onDropdownToggle($event)\\\"><fd-popover-control><button type=\\\"button\\\" class=\\\"page-tasks-btn toolbar-action--button\\\" [attr.aria-expanded]=\\\"actionItem.isOpen\\\"><span class=\\\"page-tasks-btn__icon sap-icon--workflow-tasks\\\"></span> <span class=\\\"page-tasks-btn__label\\\" translate=\\\"se.cms.workflow.toolbar.view.workflow.menu\\\"></span></button></fd-popover-control><fd-popover-body><div *ngIf=\\\"actionItem.isOpen\\\" class=\\\"toolbar-action--include se-page-workflow-menu\\\"><div class=\\\"se-page-workflow-menu__header\\\"><div class=\\\"se-page-workflow-menu__header-text\\\" translate=\\\"se.cms.workflow.toolbar.view.workflow.menu\\\"></div><div class=\\\"se-page-workflow-menu__header-menu\\\"><se-workflow-item-menu [workflowInfo]=\\\"workflow\\\"></se-workflow-item-menu></div></div><div class=\\\"se-version-toolbar-menu-content__body\\\"><div class=\\\"se-page-workflow-menu-tabs\\\"><se-tabs *ngIf=\\\"areTabsReady; else spinner\\\" [tabsList]=\\\"tabsList\\\" [model]=\\\"tabsData\\\" [numTabsDisplayed]=\\\"2\\\"></se-tabs><ng-template #spinner><se-spinner [isSpinning]=\\\"true\\\"></se-spinner></ng-template></div></div></div></fd-popover-body></fd-popover></div></div>\",\r\n            styles: [\"/*!\\n * Fundamental Library Styles v0.4.1\\n * Copyright (c) 2020 SAP SE or an SAP affiliate company.\\n * Licensed under Apache License 2.0 (https://github.com/SAP/fundamental-styles/blob/master/LICENSE)\\n *//*!\\n.fd-button-split+()\\n    .fd-button\\n*/.fd-button-split{font-size:.875rem;font-size:var(--sapFontSize,.875rem);line-height:1.42857;color:#32363a;color:var(--sapTextColor,#32363a);font-family:\\\"72\\\",\\\"72full\\\",Arial,Helvetica,sans-serif;font-family:var(--sapFontFamily, \\\"72\\\", \\\"72full\\\", Arial, Helvetica, sans-serif);font-weight:400;-webkit-font-smoothing:antialiased;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0;margin:0;border:0;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;position:relative}.fd-button-split:after,.fd-button-split:before{-webkit-box-sizing:inherit;box-sizing:inherit;font-size:inherit}.fd-button-split :first-child{margin:0;border-top-right-radius:0;border-bottom-right-radius:0}.fd-button-split :nth-child(2){margin:0;border-top-left-radius:0;border-bottom-left-radius:0;border-left-width:0}.fd-button-split[dir=rtl] :first-child,[dir=rtl] .fd-button-split :first-child{border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:.25rem;border-top-right-radius:var(--sapButton_BorderCornerRadius,.25rem);border-bottom-right-radius:.25rem;border-bottom-right-radius:var(--sapButton_BorderCornerRadius,.25rem)}.fd-button-split[dir=rtl] :nth-child(2),[dir=rtl] .fd-button-split :nth-child(2){border-top-left-radius:.25rem;border-top-left-radius:var(--sapButton_BorderCornerRadius,.25rem);border-bottom-left-radius:.25rem;border-bottom-left-radius:var(--sapButton_BorderCornerRadius,.25rem);border-top-right-radius:0;border-bottom-right-radius:0;border-left-width:.0625rem;border-left-width:var(--sapButton_BorderWidth,.0625rem);border-right-width:0}.fd-button-split [class*=\\\"--emphasized\\\"]:first-child{margin-right:1px}.fd-button-split [class*=\\\"--emphasized\\\"][dir=rtl]:first-child,[dir=rtl] .fd-button-split [class*=\\\"--emphasized\\\"]:first-child{margin-right:0;margin-left:1px}se-page-workflow-menu .toolbar-action .page-tasks-btn[aria-expanded=true]{background-color:rgba(10,110,209,.07)}se-page-workflow-menu .toolbar-action .page-tasks-btn__label{font-size:14px;color:#32363a}se-page-workflow-menu .toolbar-action .page-tasks-btn__icon{color:#0a6ed1;font-size:18px;margin-right:8px}se-page-workflow-menu .se-page-workflow-menu{box-shadow:0 6px 12px rgba(0,0,0,.175);background-color:#fff;border-radius:4px!important;min-width:100px;width:fit-content;position:absolute;border:1px solid #d9d9d9;z-index:2000;top:96%;min-width:350px;min-height:130px;right:-126px;left:auto;font-size:14px;font-family:'72',-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;line-height:20/14}se-page-workflow-menu .se-page-workflow-menu::before{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#d9d9d9;border-bottom-color:var(var(--fd-color-neutral-4));border-left-color:transparent;border-right-color:transparent;content:\\\"\\\";position:absolute;top:-8px}se-page-workflow-menu .se-page-workflow-menu::after{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#fff;border-bottom-color:var(var(--fd-color-background-4));border-left-color:transparent;border-right-color:transparent;content:\\\"\\\";position:absolute;top:-7px}se-page-workflow-menu .se-page-workflow-menu,se-page-workflow-menu .se-page-workflow-menu::after,se-page-workflow-menu .se-page-workflow-menu::before{left:50%;transform:translate(-50%)}se-page-workflow-menu .se-page-workflow-menu__header{display:flex;justify-content:space-between}se-page-workflow-menu .se-page-workflow-menu__header-text{font-size:16px;padding:20px 0 0 16px}se-page-workflow-menu .se-page-workflow-menu__header-menu{padding:16px 16px 0 0}se-page-workflow-menu .se-page-workflow-menu-tabs .se-tabset{margin:0}se-page-workflow-menu .se-page-workflow-menu-tabs .se-tabset__tab{margin-left:16px}se-page-workflow-menu .se-page-workflow-menu-tabs .se-tabset__link{color:#32363a}se-page-workflow-menu .se-page-workflow-menu-tabs .se-tabset__link:hover{color:#0a6ed1}\"],\r\n            encapsulation: ViewEncapsulation.None,\r\n            changeDetection: ChangeDetectionStrategy.OnPush\r\n        }),\r\n        __param(6, Inject(TOOLBAR_ITEM)),\r\n        __metadata(\"design:paramtypes\", [WorkflowService,\r\n            WorkflowFacade,\r\n            SystemEventService,\r\n            SmarteditRoutingService,\r\n            IPageService,\r\n            ChangeDetectorRef, Object])\r\n    ], /* @ngInject */ PageWorkflowMenuComponent);\r\n    return /* @ngInject */ PageWorkflowMenuComponent;\r\n}());\r\nexport { /* @ngInject */ PageWorkflowMenuComponent };\r\n//# sourceMappingURL=PageWorkflowMenuComponent.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/workflow/constants.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/workflow/dtos/index.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/workflow/services/WorkflowFacade.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/workflow/services/WorkflowService.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/workflow/components/pageWorkflowMenu/tabs/PageWorkflowMenuAllTasksTabComponent.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/workflow/components/pageWorkflowMenu/tabs/PageWorkflowMenuCurrentTasksTabComponent.ts"],"map":"{\"version\":3,\"file\":\"PageWorkflowMenuComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../../src/components/workflow/components/pageWorkflowMenu/PageWorkflowMenuComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/components/workflow/components/pageWorkflowMenu/PageWorkflowMenuComponent.d.ts","writeByteOrderMark":false,"text":"import { ChangeDetectorRef, OnDestroy, OnInit } from '@angular/core';\r\nimport { IPageService } from 'cmscommons';\r\nimport { SmarteditRoutingService, SystemEventService, Tab, ToolbarItemInternal } from 'smarteditcommons';\r\nimport { Workflow, WorkflowAction } from '../../dtos';\r\nimport { WorkflowFacade } from '../../services/WorkflowFacade';\r\nimport { WorkflowService } from '../../services/WorkflowService';\r\nexport interface PageWorkflowMenuTabsData {\r\n    workflow: Workflow;\r\n    actions: WorkflowAction[];\r\n}\r\nexport declare class PageWorkflowMenuComponent implements OnInit, OnDestroy {\r\n    private workflowService;\r\n    private workflowFacade;\r\n    private systemEventService;\r\n    private routingService;\r\n    private pageService;\r\n    private cdr;\r\n    actionItem: ToolbarItemInternal;\r\n    isReady: boolean;\r\n    isWorkflowEnabled: boolean;\r\n    areTabsReady: boolean;\r\n    pageHasWorkflow: boolean;\r\n    tabsList: Tab[];\r\n    tabsData: PageWorkflowMenuTabsData;\r\n    private _workflow;\r\n    private unRegOpenMenuEvent;\r\n    private unRegPerspectiveChangedEvent;\r\n    private unRegWorkflowFinishedEvent;\r\n    private unRegDecisionSelectedEvent;\r\n    private unRegWorkflowRefreshEvent;\r\n    constructor(workflowService: WorkflowService, workflowFacade: WorkflowFacade, systemEventService: SystemEventService, routingService: SmarteditRoutingService, pageService: IPageService, cdr: ChangeDetectorRef, actionItem: ToolbarItemInternal);\r\n    ngOnInit(): Promise<void>;\r\n    ngOnDestroy(): void;\r\n    set workflow(value: Workflow);\r\n    get workflow(): Workflow;\r\n    onDropdownToggle(open: boolean): Promise<void>;\r\n    startWorkflow(): Promise<void>;\r\n    private loadWorkflowAndActions;\r\n    private loadWorkflow;\r\n    private loadActions;\r\n    private setActions;\r\n    private closeDropdown;\r\n    private actionComparator;\r\n    private getActionPriority;\r\n}\r\n"}}
