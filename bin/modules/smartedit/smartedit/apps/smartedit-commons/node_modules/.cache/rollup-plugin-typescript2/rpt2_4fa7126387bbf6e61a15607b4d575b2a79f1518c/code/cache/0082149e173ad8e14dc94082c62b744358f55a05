{"code":"import { __decorate, __extends, __metadata } from \"tslib\";\r\n/*\r\n * Copyright (c) 2021 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { NgZone } from '@angular/core';\r\nimport { annotationService, functionsUtils, urlUtils, WindowUtils as ParentWindowUtils } from '@smart/utils';\r\nimport * as lodash from 'lodash';\r\nimport { SeDowngradeService } from 'smarteditcommons/di/SeDowngradeService';\r\n/* forbiddenNameSpaces window._:false */\r\nwindow.__smartedit__ = window.__smartedit__ || {};\r\nfunction getDecoratorKey(className, decoratorName) {\r\n    return className + \"-\" + decoratorName + \":definition\";\r\n}\r\nlodash.merge(window.__smartedit__, {\r\n    modules: {},\r\n    pushedModules: [],\r\n    smarteditDecoratorPayloads: {},\r\n    addDecoratorPayload: function (decorator, className, payload) {\r\n        var key = getDecoratorKey(decorator, className);\r\n        if (window.__smartedit__.smarteditDecoratorPayloads[key]) {\r\n            throw new Error('Duplicate class/decorator pair');\r\n        }\r\n        window.__smartedit__.smarteditDecoratorPayloads[key] = payload;\r\n    },\r\n    getDecoratorPayload: function (decorator, constructor) {\r\n        var className = functionsUtils.getConstructorName(annotationService.getOriginalConstructor(constructor));\r\n        return window.__smartedit__.smarteditDecoratorPayloads[getDecoratorKey(decorator, className)];\r\n    },\r\n    getComponentDecoratorPayload: function (className) {\r\n        return window.__smartedit__.smarteditDecoratorPayloads[getDecoratorKey('Component', className)];\r\n    },\r\n    downgradedService: {}\r\n});\r\n/**\r\n * Add here a spread of modules containing invocations of HttpBackendService to mocks some calls to the backend\r\n */\r\nwindow.pushModules = function () {\r\n    var modules = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        modules[_i] = arguments[_i];\r\n    }\r\n    window.__smartedit__.pushedModules = window.__smartedit__.pushedModules.concat(modules);\r\n};\r\n/**\r\n * A collection of utility methods for windows.\r\n */\r\nvar /* @ngInject */ WindowUtils = /** @class */ (function (_super) {\r\n    __extends(/* @ngInject */ WindowUtils, _super);\r\n    function /* @ngInject */ WindowUtils(ngZone) {\r\n        var _this = _super.call(this, ngZone) || this;\r\n        /**\r\n         * Given the current frame, retrieves the target frame for gateway purposes\r\n         *\r\n         * @returns The content window or null if it does not exists.\r\n         */\r\n        _this.getGatewayTargetFrame = function () {\r\n            if (_this.isIframe()) {\r\n                return _this.getWindow().parent;\r\n            }\r\n            else if (_this.getWindow().document.getElementById(/* @ngInject */ WindowUtils_1.SMARTEDIT_IFRAME_ID)) {\r\n                return _this.getWindow().document.getElementById(/* @ngInject */ WindowUtils_1.SMARTEDIT_IFRAME_ID).contentWindow;\r\n            }\r\n            return null;\r\n        };\r\n        return _this;\r\n    }\r\n    /* @ngInject */ WindowUtils_1 = /* @ngInject */ WindowUtils;\r\n    /* @ngInject */ WindowUtils.prototype.getSmarteditIframe = function () {\r\n        return document.querySelector('iframe#' + /* @ngInject */ WindowUtils_1.SMARTEDIT_IFRAME_ID);\r\n    };\r\n    /* @ngInject */ WindowUtils.prototype.getIframe = function () {\r\n        return document.querySelector('iframe');\r\n    };\r\n    /* @ngInject */ WindowUtils.prototype.setTrustedIframeDomain = function (trustedIframeSource) {\r\n        this.trustedIframeDomain = urlUtils.getOrigin(trustedIframeSource);\r\n    };\r\n    /* @ngInject */ WindowUtils.prototype.getTrustedIframeDomain = function () {\r\n        return this.trustedIframeDomain;\r\n    };\r\n    /* @ngInject */ WindowUtils.prototype.isCrossOrigin = function (location) {\r\n        return urlUtils.getOrigin() !== urlUtils.getOrigin(location);\r\n    };\r\n    var /* @ngInject */ WindowUtils_1;\r\n    /* @ngInject */ WindowUtils.SMARTEDIT_IFRAME_ID = 'ySmartEditFrame';\r\n    /* @ngInject */ WindowUtils = /* @ngInject */ WindowUtils_1 = __decorate([\r\n        SeDowngradeService(),\r\n        __metadata(\"design:paramtypes\", [NgZone])\r\n    ], /* @ngInject */ WindowUtils);\r\n    return /* @ngInject */ WindowUtils;\r\n}(ParentWindowUtils));\r\nexport { /* @ngInject */ WindowUtils };\r\nexport var windowUtils = new WindowUtils();\r\nexport { ParentWindowUtils };\r\n//# sourceMappingURL=WindowUtils.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@types/angular@1.7.3/node_modules/@types/angular/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@types/lodash@4.14.159/node_modules/@types/lodash/ts3.1/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/di/SeDowngradeService.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/di/types.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/services/index.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/dtos/index.ts"],"map":"{\"version\":3,\"file\":\"WindowUtils.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/utils/WindowUtils.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/utils/WindowUtils.d.ts","writeByteOrderMark":false,"text":"/// <reference types=\"angular-mocks\" />\r\nimport { NgModule, NgZone } from '@angular/core';\r\nimport { WindowUtils as ParentWindowUtils } from '@smart/utils';\r\nimport * as angular from 'angular';\r\nimport * as lodash from 'lodash';\r\nimport { SeConstructor } from 'smarteditcommons/di/types';\r\nimport { YJQuery } from 'smarteditcommons/services';\r\nimport { TypedMap } from '../dtos';\r\ndeclare global {\r\n    interface InternalSmartedit {\r\n        modules: TypedMap<NgModule>;\r\n        pushedModules: NgModule[];\r\n        smarteditDecoratorPayloads: TypedMap<any>;\r\n        addDecoratorPayload: (className: string, decoratorName: string, payload: any) => void;\r\n        getDecoratorPayload: (decorator: string, constructor: SeConstructor) => any;\r\n        getComponentDecoratorPayload: (className: string) => {\r\n            selector: string;\r\n            template: string;\r\n        };\r\n        downgradedService: TypedMap<SeConstructor>;\r\n        smartEditContainerAngularApps: string[];\r\n        smartEditInnerAngularApps: string[];\r\n    }\r\n    interface Window {\r\n        Zone: any;\r\n        angular: angular.IAngularStatic;\r\n        CKEDITOR: any;\r\n        smarteditLodash: lodash.LoDashStatic;\r\n        smarteditJQuery: YJQuery;\r\n        __karma__: any;\r\n        __smartedit__: InternalSmartedit;\r\n        pushModules(...modules: any[]): void;\r\n    }\r\n}\r\n/**\r\n * A collection of utility methods for windows.\r\n */\r\nexport declare class WindowUtils extends ParentWindowUtils {\r\n    static SMARTEDIT_IFRAME_ID: string;\r\n    private trustedIframeDomain;\r\n    constructor(ngZone?: NgZone);\r\n    /**\r\n     * Given the current frame, retrieves the target frame for gateway purposes\r\n     *\r\n     * @returns The content window or null if it does not exists.\r\n     */\r\n    getGatewayTargetFrame: () => Window;\r\n    getSmarteditIframe(): HTMLElement;\r\n    getIframe(): HTMLElement;\r\n    setTrustedIframeDomain(trustedIframeSource: string): void;\r\n    getTrustedIframeDomain(): string;\r\n    isCrossOrigin(location: string): boolean;\r\n}\r\nexport declare const windowUtils: WindowUtils;\r\nexport { ParentWindowUtils };\r\n"}}
