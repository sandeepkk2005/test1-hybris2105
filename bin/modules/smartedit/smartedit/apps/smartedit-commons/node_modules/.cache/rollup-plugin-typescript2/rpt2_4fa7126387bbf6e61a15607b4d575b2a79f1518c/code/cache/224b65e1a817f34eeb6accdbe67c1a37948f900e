{"code":"import { __awaiter, __decorate, __generator, __metadata, __param } from \"tslib\";\r\n/*\r\n * Copyright (c) 2021 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { Inject } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { SeDowngradeService } from 'smarteditcommons/di';\r\nimport { LanguageService } from '../../../../services/language/LanguageService';\r\nimport { RESOLVED_LOCALE_TO_MOMENT_LOCALE_MAP, TOOLTIPS_MAP } from './tokens';\r\n/**\r\n * The DateTimePickerLocalizationService is responsible for both localizing the date time picker as well as the tooltips\r\n */\r\nvar /* @ngInject */ DateTimePickerLocalizationService = /** @class */ (function () {\r\n    function /* @ngInject */ DateTimePickerLocalizationService(translate, resolvedLocaleToMomentLocaleMap, tooltipsMap, languageService) {\r\n        this.translate = translate;\r\n        this.resolvedLocaleToMomentLocaleMap = resolvedLocaleToMomentLocaleMap;\r\n        this.tooltipsMap = tooltipsMap;\r\n        this.languageService = languageService;\r\n    }\r\n    /* @ngInject */ DateTimePickerLocalizationService.prototype.localizeDateTimePicker = function (datetimepicker) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.localizeDateTimePickerUI(datetimepicker)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        this.localizeDateTimePickerTooltips(datetimepicker);\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ DateTimePickerLocalizationService.prototype.convertResolvedToMomentLocale = function (resolvedLocale) {\r\n        var conversion = this.resolvedLocaleToMomentLocaleMap[resolvedLocale];\r\n        if (conversion) {\r\n            return conversion;\r\n        }\r\n        else {\r\n            return resolvedLocale;\r\n        }\r\n    };\r\n    /* @ngInject */ DateTimePickerLocalizationService.prototype.getLocalizedTooltips = function () {\r\n        var localizedTooltips = {};\r\n        for (var index in this.tooltipsMap) {\r\n            if (this.tooltipsMap.hasOwnProperty(index)) {\r\n                localizedTooltips[index] = this.translate.instant(this.tooltipsMap[index]);\r\n            }\r\n        }\r\n        return localizedTooltips;\r\n    };\r\n    /* @ngInject */ DateTimePickerLocalizationService.prototype.compareTooltips = function (tooltips1, tooltips2) {\r\n        for (var index in this.tooltipsMap) {\r\n            if (tooltips1[index] !== tooltips2[index]) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    /* @ngInject */ DateTimePickerLocalizationService.prototype.localizeDateTimePickerUI = function (datetimepicker) {\r\n        var _this = this;\r\n        return this.languageService.getResolveLocale().then(function (language) {\r\n            var momentLocale = _this.convertResolvedToMomentLocale(language);\r\n            // This if statement was added to prevent infinite recursion, at the moment it triggers twice\r\n            // due to what seems like datetimepicker.locale(<string>) broadcasting dp.show\r\n            if (datetimepicker.locale() !== momentLocale) {\r\n                datetimepicker.locale(momentLocale);\r\n            }\r\n        });\r\n    };\r\n    /* @ngInject */ DateTimePickerLocalizationService.prototype.localizeDateTimePickerTooltips = function (datetimepicker) {\r\n        var currentTooltips = datetimepicker.tooltips();\r\n        var translatedTooltips = this.getLocalizedTooltips();\r\n        // This if statement was added to prevent infinite recursion, at the moment it triggers twice\r\n        // due to what seems like datetimepicker.tooltips(<tooltips obj>) broadcasting dp.show\r\n        if (!this.compareTooltips(currentTooltips, translatedTooltips)) {\r\n            datetimepicker.tooltips(translatedTooltips);\r\n        }\r\n    };\r\n    /* @ngInject */ DateTimePickerLocalizationService = __decorate([\r\n        SeDowngradeService(),\r\n        __param(1, Inject(RESOLVED_LOCALE_TO_MOMENT_LOCALE_MAP)),\r\n        __param(2, Inject(TOOLTIPS_MAP)),\r\n        __metadata(\"design:paramtypes\", [TranslateService, Object, Object, LanguageService])\r\n    ], /* @ngInject */ DateTimePickerLocalizationService);\r\n    return /* @ngInject */ DateTimePickerLocalizationService;\r\n}());\r\nexport { /* @ngInject */ DateTimePickerLocalizationService };\r\n//# sourceMappingURL=DateTimePickerLocalizationService.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@ngx-translate/core@11.0.1_@angular+core@8.2.14+rxjs@6.5.4/node_modules/@ngx-translate/core/ngx-translate-core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@types/eonasdan-bootstrap-datetimepicker@4.17.26/node_modules/@types/eonasdan-bootstrap-datetimepicker/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/di/index.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/services/language/LanguageService.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/components/genericEditor/widgets/DateTimePickerComponent/tokens.ts"],"map":"{\"version\":3,\"file\":\"DateTimePickerLocalizationService.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../../src/components/genericEditor/widgets/DateTimePickerComponent/DateTimePickerLocalizationService.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/components/genericEditor/widgets/DateTimePickerComponent/DateTimePickerLocalizationService.d.ts","writeByteOrderMark":false,"text":"import { TranslateService } from '@ngx-translate/core';\r\nimport { TypedMap } from '@smart/utils';\r\nimport { Datetimepicker, Tooltips } from 'eonasdan-bootstrap-datetimepicker';\r\nimport { LanguageService } from '../../../../services/language/LanguageService';\r\n/**\r\n * The DateTimePickerLocalizationService is responsible for both localizing the date time picker as well as the tooltips\r\n */\r\nexport declare class DateTimePickerLocalizationService {\r\n    private translate;\r\n    private resolvedLocaleToMomentLocaleMap;\r\n    private tooltipsMap;\r\n    private languageService;\r\n    constructor(translate: TranslateService, resolvedLocaleToMomentLocaleMap: TypedMap<string>, tooltipsMap: Tooltips, languageService: LanguageService);\r\n    localizeDateTimePicker(datetimepicker: Datetimepicker): Promise<void>;\r\n    private convertResolvedToMomentLocale;\r\n    private getLocalizedTooltips;\r\n    private compareTooltips;\r\n    private localizeDateTimePickerUI;\r\n    private localizeDateTimePickerTooltips;\r\n}\r\n"}}
