{"code":"import { __decorate, __metadata } from \"tslib\";\r\n/*\r\n * Copyright (c) 2021 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { CONTEXT_CATALOG, CONTEXT_CATALOG_VERSION, CONTEXT_SITE_ID, PAGE_CONTEXT_CATALOG, PAGE_CONTEXT_CATALOG_VERSION, PAGE_CONTEXT_SITE_ID, RestServiceFactory, SeDowngradeService } from 'smarteditcommons';\r\n/**\r\n * Provides REST API for the CMS fallbacks endpoint.\r\n *\r\n * Used to fetch Primary Pages IDs for Variation Pages.\r\n */\r\nvar /* @ngInject */ PagesFallbacksRestService = /** @class */ (function () {\r\n    function /* @ngInject */ PagesFallbacksRestService(restServiceFactory) {\r\n        this.restServiceFactory = restServiceFactory;\r\n        this.fallbacksForPageIdResource = restServiceFactory.get(this.getUri());\r\n    }\r\n    /* @ngInject */ PagesFallbacksRestService.prototype.getFallbacksForPageId = function (pageId) {\r\n        return this.fallbacksForPageIdResource.get({ pageId: pageId }).then(function (response) { return response.uids; });\r\n    };\r\n    /* @ngInject */ PagesFallbacksRestService.prototype.getFallbacksForPageIdAndContext = function (pageId, uriContext) {\r\n        var uri = this.getUri(uriContext[CONTEXT_SITE_ID], uriContext[CONTEXT_CATALOG], uriContext[CONTEXT_CATALOG_VERSION]);\r\n        var resource = this.restServiceFactory.get(uri);\r\n        return resource.get({ pageId: pageId }).then(function (response) { return response.uids; });\r\n    };\r\n    /* @ngInject */ PagesFallbacksRestService.prototype.getUri = function (siteId, catalogId, catalogVersionId) {\r\n        if (siteId === void 0) { siteId = PAGE_CONTEXT_SITE_ID; }\r\n        if (catalogId === void 0) { catalogId = PAGE_CONTEXT_CATALOG; }\r\n        if (catalogVersionId === void 0) { catalogVersionId = PAGE_CONTEXT_CATALOG_VERSION; }\r\n        return \"/cmswebservices/v1/sites/\" + siteId + \"/catalogs/\" + catalogId + \"/versions/\" + catalogVersionId + \"/pages/:pageId/fallbacks\";\r\n    };\r\n    /* @ngInject */ PagesFallbacksRestService = __decorate([\r\n        SeDowngradeService(),\r\n        __metadata(\"design:paramtypes\", [RestServiceFactory])\r\n    ], /* @ngInject */ PagesFallbacksRestService);\r\n    return /* @ngInject */ PagesFallbacksRestService;\r\n}());\r\nexport { /* @ngInject */ PagesFallbacksRestService };\r\n//# sourceMappingURL=PagesFallbacksRestService.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts"],"map":"{\"version\":3,\"file\":\"PagesFallbacksRestService.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/dao/PagesFallbacksRestService.ts\"],\"names\":[],\"mappings\":\";AAAA;;GAEG;AACH,OAAO,EACH,eAAe,EACf,uBAAuB,EACvB,eAAe,EAGf,oBAAoB,EACpB,4BAA4B,EAC5B,oBAAoB,EACpB,kBAAkB,EAClB,kBAAkB,EACrB,MAAM,kBAAkB,CAAC;AAM1B;;;;GAIG;AAEH;IAGI,mDAAoB,kBAAsC;QAAtC,uBAAkB,GAAlB,kBAAkB,CAAoB;QACtD,IAAI,CAAC,0BAA0B,GAAG,kBAAkB,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;IAC5E,CAAC;IAEM,yEAAqB,GAA5B,UAA6B,MAAc;QACvC,OAAO,IAAI,CAAC,0BAA0B,CAAC,GAAG,CAAC,EAAE,MAAM,QAAA,EAAE,CAAC,CAAC,IAAI,CAAC,UAAC,QAAQ,IAAK,OAAA,QAAQ,CAAC,IAAI,EAAb,CAAa,CAAC,CAAC;IAC7F,CAAC;IAEM,mFAA+B,GAAtC,UACI,MAAc,EACd,UAAuB;QAEvB,IAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CACnB,UAAU,CAAC,eAAe,CAAC,EAC3B,UAAU,CAAC,eAAe,CAAC,EAC3B,UAAU,CAAC,uBAAuB,CAAC,CACtC,CAAC;QACF,IAAM,QAAQ,GAAG,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAoB,GAAG,CAAC,CAAC;QACrE,OAAO,QAAQ,CAAC,GAAG,CAAC,EAAE,MAAM,QAAA,EAAE,CAAC,CAAC,IAAI,CAAC,UAAC,QAAQ,IAAK,OAAA,QAAQ,CAAC,IAAI,EAAb,CAAa,CAAC,CAAC;IACtE,CAAC;IAEO,0DAAM,GAAd,UACI,MAA6B,EAC7B,SAAgC,EAChC,gBAA+C;QAF/C,uBAAA,EAAA,6BAA6B;QAC7B,0BAAA,EAAA,gCAAgC;QAChC,iCAAA,EAAA,+CAA+C;QAE/C,OAAO,8BAA4B,MAAM,kBAAa,SAAS,kBAAa,gBAAgB,6BAA0B,CAAC;IAC3H,CAAC;IA9BL;QADC,kBAAkB,EAAE;yCAIuB,kBAAkB;iDA4B7D;IAAD,gDAAC;CAAA,AA/BD,IA+BC\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/dao/PagesFallbacksRestService.d.ts","writeByteOrderMark":false,"text":"import { IUriContext, RestServiceFactory } from 'smarteditcommons';\r\n/**\r\n * Provides REST API for the CMS fallbacks endpoint.\r\n *\r\n * Used to fetch Primary Pages IDs for Variation Pages.\r\n */\r\nexport declare class PagesFallbacksRestService {\r\n    private restServiceFactory;\r\n    private readonly fallbacksForPageIdResource;\r\n    constructor(restServiceFactory: RestServiceFactory);\r\n    getFallbacksForPageId(pageId: string): Promise<string[]>;\r\n    getFallbacksForPageIdAndContext(pageId: string, uriContext: IUriContext): Promise<string[]>;\r\n    private getUri;\r\n}\r\n"}}
