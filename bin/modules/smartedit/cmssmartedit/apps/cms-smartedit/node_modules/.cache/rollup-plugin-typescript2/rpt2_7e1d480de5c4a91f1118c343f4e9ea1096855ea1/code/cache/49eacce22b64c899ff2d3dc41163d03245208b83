{"code":"import { __decorate, __metadata } from \"tslib\";\r\n/*\r\n * Copyright (c) 2021 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { IPageService, SlotStatus } from 'cmscommons';\r\nimport { IAlertServiceType, IPageInfoService, SeComponent } from 'smarteditcommons';\r\nvar /* @ngInject */ SlotSynchronizationPanel = /** @class */ (function () {\r\n    function /* @ngInject */ SlotSynchronizationPanel(pageService, pageInfoService, slotSynchronizationService, pageContentSlotsService, $translate, $q) {\r\n        var _this = this;\r\n        this.pageService = pageService;\r\n        this.pageInfoService = pageInfoService;\r\n        this.slotSynchronizationService = slotSynchronizationService;\r\n        this.pageContentSlotsService = pageContentSlotsService;\r\n        this.$translate = $translate;\r\n        this.$q = $q;\r\n        this.SYNCHRONIZATION_SLOTS_SELECT_ALL_COMPONENTS_LABEL = 'se.cms.synchronization.slots.select.all.components';\r\n        this.getSyncStatus = function () {\r\n            var promise = _this.pageInfoService.getPageUID().then(function (pageId) {\r\n                return _this.slotSynchronizationService\r\n                    .getSyncStatus(pageId, _this.slotId)\r\n                    .then(function (syncStatus) {\r\n                    if (!_this.slotSynchronizationService.syncStatusExists(syncStatus)) {\r\n                        throw new Error('The SlotSynchronizationPanel must only be called for the slot whose sync status is available.');\r\n                    }\r\n                    else {\r\n                        return _this.isSyncDisallowed().then(function (isDisallowed) {\r\n                            if (isDisallowed) {\r\n                                _this.disableSync();\r\n                            }\r\n                            return syncStatus;\r\n                        });\r\n                    }\r\n                });\r\n            });\r\n            return _this.$q.when(promise);\r\n        };\r\n        this.performSync = function (itemsToSync) {\r\n            return _this.slotSynchronizationService.performSync(itemsToSync);\r\n        };\r\n    }\r\n    /* @ngInject */ SlotSynchronizationPanel.prototype.getApi = function ($api) {\r\n        this.synchronizationPanelApi = $api;\r\n    };\r\n    /* @ngInject */ SlotSynchronizationPanel.prototype.isSyncDisallowed = function () {\r\n        var _this = this;\r\n        return this.isPageSlot().then(function (isPageSlot) {\r\n            return _this.isPageApproved().then(function (isPageApproved) { return isPageSlot && !isPageApproved; });\r\n        });\r\n    };\r\n    /* @ngInject */ SlotSynchronizationPanel.prototype.isPageSlot = function () {\r\n        return this.pageContentSlotsService\r\n            .getSlotStatus(this.slotId)\r\n            .then(function (slotStatus) {\r\n            return slotStatus === SlotStatus.PAGE || slotStatus === SlotStatus.OVERRIDE;\r\n        });\r\n    };\r\n    /* @ngInject */ SlotSynchronizationPanel.prototype.isPageApproved = function () {\r\n        var _this = this;\r\n        var promise = this.pageInfoService\r\n            .getPageUUID()\r\n            .then(function (pageUuid) { return _this.pageService.isPageApproved(pageUuid); });\r\n        return this.$q.when(promise);\r\n    };\r\n    /* @ngInject */ SlotSynchronizationPanel.prototype.disableSync = function () {\r\n        this.synchronizationPanelApi.setMessage({\r\n            type: IAlertServiceType.WARNING,\r\n            description: this.$translate.instant('se.cms.synchronization.slot.disabled.msg')\r\n        });\r\n        this.synchronizationPanelApi.disableItemList(true);\r\n    };\r\n    /* @ngInject */ SlotSynchronizationPanel = __decorate([\r\n        SeComponent({\r\n            templateUrl: 'slotSynchronizationPanelTemplate.html',\r\n            inputs: ['slotId']\r\n        }),\r\n        __metadata(\"design:paramtypes\", [IPageService,\r\n            IPageInfoService, Object, Object, Function, Function])\r\n    ], /* @ngInject */ SlotSynchronizationPanel);\r\n    return /* @ngInject */ SlotSynchronizationPanel;\r\n}());\r\nexport { /* @ngInject */ SlotSynchronizationPanel };\r\n//# sourceMappingURL=SlotSynchronizationPanel.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts"],"map":"{\"version\":3,\"file\":\"SlotSynchronizationPanel.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/components/synchronize/slots/SlotSynchronizationPanel.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit/components/synchronize/slots/SlotSynchronizationPanel.d.ts","writeByteOrderMark":false,"text":"/// <reference types=\"angular-translate\" />\r\n/// <reference types=\"angular\" />\r\nimport { IPageService } from 'cmscommons';\r\nimport { IPageInfoService, ISeComponent, TypedMap } from 'smarteditcommons';\r\nexport declare class SlotSynchronizationPanel implements ISeComponent {\r\n    private pageService;\r\n    private pageInfoService;\r\n    private slotSynchronizationService;\r\n    private pageContentSlotsService;\r\n    private $translate;\r\n    private $q;\r\n    SYNCHRONIZATION_SLOTS_SELECT_ALL_COMPONENTS_LABEL: string;\r\n    private synchronizationPanelApi;\r\n    private slotId;\r\n    constructor(pageService: IPageService, pageInfoService: IPageInfoService, slotSynchronizationService: any, pageContentSlotsService: any, $translate: angular.translate.ITranslateService, $q: angular.IQService);\r\n    getApi($api: any): void;\r\n    getSyncStatus: () => angular.IPromise<any>;\r\n    performSync: (itemsToSync: TypedMap<string>[]) => angular.IPromise<void>;\r\n    private isSyncDisallowed;\r\n    private isPageSlot;\r\n    private isPageApproved;\r\n    private disableSync;\r\n}\r\n"}}
