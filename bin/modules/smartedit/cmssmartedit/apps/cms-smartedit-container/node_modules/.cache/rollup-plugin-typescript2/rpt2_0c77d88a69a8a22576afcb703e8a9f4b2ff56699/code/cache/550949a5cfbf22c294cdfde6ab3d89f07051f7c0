{"code":"import { __awaiter, __decorate, __generator, __metadata, __spreadArrays } from \"tslib\";\r\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { SeDowngradeComponent } from 'smarteditcommons';\r\nimport { PageTemplateService } from '../../../../../services/PageTemplateService';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"SelectPageTemplateComponent\", {\r\n    selector: 'se-select-page-template',\r\n    template: \"<div class=\\\"se-page-type-step-template\\\"><div class=\\\"se-add-page__sub-header\\\"><div class=\\\"se-add-page__sub-header-title\\\">{{ 'se.cms.addpagewizard.pagetemplate.description' | translate }}</div><div class=\\\"se-input-group se-page-type-step-template-list-search\\\"><input type=\\\"text\\\" class=\\\"se-input-group__input-area ySEPage-list-search-input\\\" placeholder=\\\"{{ 'se.cms.pagewizard.templatestep.searchplaceholder' | translate }}\\\" [ngModel]=\\\"searchString\\\" (ngModelChange)=\\\"onSearchChange($event)\\\" name=\\\"query\\\"/> <span class=\\\"sap-icon--search se-input-group__addon\\\"></span><div *ngIf=\\\"searchString\\\" class=\\\"se-input-group__addon se-input-group__clear-btn\\\" (click)=\\\"clearSearch()\\\"><span class=\\\"sap-icon--decline\\\"></span></div></div></div><div class=\\\"se-add-page__list fd-menu\\\" *ngIf=\\\"pageTemplates.length > 0\\\"><div *ngFor=\\\"let template of filteredPageTemplates\\\" [ngClass]=\\\"{ 'is-selected': isSelected(template)}\\\" (click)=\\\"templateSelected(template)\\\" class=\\\"se-add-page__item se-add-page__item--page-template fd-menu__item\\\"><div class=\\\"se-add-page__item-title\\\">{{ template.name }}</div></div></div></div>\",\r\n    styles: [\".se-add-page__sub-header{padding-bottom:16px;color:#51555a}.se-add-page__sub-header-title{margin-bottom:8px}.se-add-page__list.fd-menu{border-top:1px solid #d9d9d9;padding:0}.se-add-page__item{cursor:pointer}.se-add-page__item--page-template{height:48px;display:flex;flex-direction:row;align-items:center}.se-add-page__item-title{font-weight:700}.se-add-page__item-description{white-space:normal}\"],\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n});\r\nvar /* @ngInject */ SelectPageTemplateComponent = /** @class */ (function () {\r\n    function /* @ngInject */ SelectPageTemplateComponent(pageTemplateService, cdr) {\r\n        this.pageTemplateService = pageTemplateService;\r\n        this.cdr = cdr;\r\n        this.searchString = '';\r\n        this.onTemplateSelected = new EventEmitter();\r\n        this.cache = {};\r\n        this.pageTemplates = [];\r\n    }\r\n    /* @ngInject */ SelectPageTemplateComponent.prototype.ngOnChanges = function (changes) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        if (!((_a = changes.pageTypeCode) === null || _a === void 0 ? void 0 : _a.currentValue)) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.onInputUpdated()];\r\n                    case 1:\r\n                        _b.sent();\r\n                        this.setDefaultFilteredPageTemplates();\r\n                        this.cdr.detectChanges();\r\n                        _b.label = 2;\r\n                    case 2: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ SelectPageTemplateComponent.prototype.templateSelected = function (pageTemplate) {\r\n        this.selectedTemplate = pageTemplate;\r\n        this.onTemplateSelected.emit(pageTemplate);\r\n    };\r\n    /* @ngInject */ SelectPageTemplateComponent.prototype.isSelected = function (pageTemplate) {\r\n        var _a;\r\n        return pageTemplate.uid === ((_a = this.selectedTemplate) === null || _a === void 0 ? void 0 : _a.uid);\r\n    };\r\n    /* @ngInject */ SelectPageTemplateComponent.prototype.clearSearch = function () {\r\n        this.searchString = '';\r\n        this.setDefaultFilteredPageTemplates();\r\n    };\r\n    /* @ngInject */ SelectPageTemplateComponent.prototype.onSearchChange = function (value) {\r\n        this.searchString = value;\r\n        this.filterByQuery(this.searchString);\r\n    };\r\n    /* @ngInject */ SelectPageTemplateComponent.prototype.onInputUpdated = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                this.clearSearch();\r\n                this.selectedTemplate = null;\r\n                return [2 /*return*/, this.setPageTemplates()];\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ SelectPageTemplateComponent.prototype.setPageTemplates = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var pageTemplates;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (this.cache[this.pageTypeCode]) {\r\n                            this.pageTemplates = this.cache[this.pageTypeCode];\r\n                            return [2 /*return*/];\r\n                        }\r\n                        this.pageTemplates = [];\r\n                        return [4 /*yield*/, this.pageTemplateService.getPageTemplatesForType(this.uriContext, this.pageTypeCode)];\r\n                    case 1:\r\n                        pageTemplates = _a.sent();\r\n                        this.cache[this.pageTypeCode] = pageTemplates.templates;\r\n                        this.pageTemplates = this.cache[this.pageTypeCode];\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ SelectPageTemplateComponent.prototype.filterByQuery = function (query) {\r\n        if (!query) {\r\n            this.setDefaultFilteredPageTemplates();\r\n            return;\r\n        }\r\n        this.filteredPageTemplates = this.pageTemplates.filter(function (template) {\r\n            var terms = query.split(' ');\r\n            return terms.every(function (term) { return template.name.toLowerCase().includes(term.toLowerCase()); });\r\n        });\r\n    };\r\n    /* @ngInject */ SelectPageTemplateComponent.prototype.setDefaultFilteredPageTemplates = function () {\r\n        this.filteredPageTemplates = __spreadArrays(this.pageTemplates);\r\n    };\r\n    __decorate([\r\n        Input(),\r\n        __metadata(\"design:type\", Object)\r\n    ], /* @ngInject */ SelectPageTemplateComponent.prototype, \"uriContext\", void 0);\r\n    __decorate([\r\n        Input(),\r\n        __metadata(\"design:type\", String)\r\n    ], /* @ngInject */ SelectPageTemplateComponent.prototype, \"pageTypeCode\", void 0);\r\n    __decorate([\r\n        Output(),\r\n        __metadata(\"design:type\", EventEmitter)\r\n    ], /* @ngInject */ SelectPageTemplateComponent.prototype, \"onTemplateSelected\", void 0);\r\n    /* @ngInject */ SelectPageTemplateComponent = __decorate([\r\n        SeDowngradeComponent(),\r\n        Component({\r\n            selector: 'se-select-page-template',\r\n            template: \"<div class=\\\"se-page-type-step-template\\\"><div class=\\\"se-add-page__sub-header\\\"><div class=\\\"se-add-page__sub-header-title\\\">{{ 'se.cms.addpagewizard.pagetemplate.description' | translate }}</div><div class=\\\"se-input-group se-page-type-step-template-list-search\\\"><input type=\\\"text\\\" class=\\\"se-input-group__input-area ySEPage-list-search-input\\\" placeholder=\\\"{{ 'se.cms.pagewizard.templatestep.searchplaceholder' | translate }}\\\" [ngModel]=\\\"searchString\\\" (ngModelChange)=\\\"onSearchChange($event)\\\" name=\\\"query\\\"/> <span class=\\\"sap-icon--search se-input-group__addon\\\"></span><div *ngIf=\\\"searchString\\\" class=\\\"se-input-group__addon se-input-group__clear-btn\\\" (click)=\\\"clearSearch()\\\"><span class=\\\"sap-icon--decline\\\"></span></div></div></div><div class=\\\"se-add-page__list fd-menu\\\" *ngIf=\\\"pageTemplates.length > 0\\\"><div *ngFor=\\\"let template of filteredPageTemplates\\\" [ngClass]=\\\"{ 'is-selected': isSelected(template)}\\\" (click)=\\\"templateSelected(template)\\\" class=\\\"se-add-page__item se-add-page__item--page-template fd-menu__item\\\"><div class=\\\"se-add-page__item-title\\\">{{ template.name }}</div></div></div></div>\",\r\n            styles: [\".se-add-page__sub-header{padding-bottom:16px;color:#51555a}.se-add-page__sub-header-title{margin-bottom:8px}.se-add-page__list.fd-menu{border-top:1px solid #d9d9d9;padding:0}.se-add-page__item{cursor:pointer}.se-add-page__item--page-template{height:48px;display:flex;flex-direction:row;align-items:center}.se-add-page__item-title{font-weight:700}.se-add-page__item-description{white-space:normal}\"],\r\n            changeDetection: ChangeDetectionStrategy.OnPush\r\n        }),\r\n        __metadata(\"design:paramtypes\", [PageTemplateService, ChangeDetectorRef])\r\n    ], /* @ngInject */ SelectPageTemplateComponent);\r\n    return /* @ngInject */ SelectPageTemplateComponent;\r\n}());\r\nexport { /* @ngInject */ SelectPageTemplateComponent };\r\n//# sourceMappingURL=SelectPageTemplateComponent.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/pages/types.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/PageTemplateService.ts"],"map":"{\"version\":3,\"file\":\"SelectPageTemplateComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../../../src/components/pages/addPageWizard/components/selectPageTemplate/SelectPageTemplateComponent.ts\"],\"names\":[],\"mappings\":\";AACA,OAAO,EACH,uBAAuB,EACvB,iBAAiB,EACjB,SAAS,EACT,YAAY,EACZ,KAAK,EAEL,MAAM,EAET,MAAM,eAAe,CAAC;AAEvB,OAAO,EAAe,oBAAoB,EAAY,MAAM,kBAAkB,CAAC;AAE/E,OAAO,EAAE,mBAAmB,EAAE,MAAM,6CAA6C,CAAC;qFAGvE;IACP,QAAQ,EAAE,yBAAyB;IACnC,QAAQ,EAAE,gnCAAokC;IAC9kC,MAAM,EAAE,CAAC,8YAA8Y,CAAC;IACxZ,eAAe,EAAE,uBAAuB,CAAC,MAAM;CAClD;AACD;IAYI,qDAAoB,mBAAwC,EAAU,GAAsB;QAAxE,wBAAmB,GAAnB,mBAAmB,CAAqB;QAAU,QAAG,GAAH,GAAG,CAAmB;QACxF,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;QACvB,IAAI,CAAC,kBAAkB,GAAG,IAAI,YAAY,EAAE,CAAC;QAC7C,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;QAChB,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;IAC5B,CAAC;IAEK,iEAAW,GAAjB,UAAkB,OAAsB;;;;;;oCAChC,OAAO,CAAC,YAAY,0CAAE,YAAY;wBAClC,qBAAM,IAAI,CAAC,cAAc,EAAE,EAAA;;wBAA3B,SAA2B,CAAC;wBAC5B,IAAI,CAAC,+BAA+B,EAAE,CAAC;wBAEvC,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC;;;;;;KAEhC;IAEM,sEAAgB,GAAvB,UAAwB,YAA8B;QAClD,IAAI,CAAC,gBAAgB,GAAG,YAAY,CAAC;QACrC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;IAC/C,CAAC;IAEM,gEAAU,GAAjB,UAAkB,YAA8B;;QAC5C,OAAO,YAAY,CAAC,GAAG,YAAK,IAAI,CAAC,gBAAgB,0CAAE,GAAG,CAAA,CAAC;IAC3D,CAAC;IAEM,iEAAW,GAAlB;QACI,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;QACvB,IAAI,CAAC,+BAA+B,EAAE,CAAC;IAC3C,CAAC;IAEM,oEAAc,GAArB,UAAsB,KAAa;QAC/B,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAC1B,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;IAC1C,CAAC;IAEa,oEAAc,GAA5B;;;gBACI,IAAI,CAAC,WAAW,EAAE,CAAC;gBACnB,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;gBAE7B,sBAAO,IAAI,CAAC,gBAAgB,EAAE,EAAC;;;KAClC;IAEa,sEAAgB,GAA9B;;;;;;wBACI,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE;4BAC/B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;4BACnD,sBAAO;yBACV;wBACD,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;wBAEF,qBAAM,IAAI,CAAC,mBAAmB,CAAC,uBAAuB,CACxE,IAAI,CAAC,UAAU,EACf,IAAI,CAAC,YAA4B,CACpC,EAAA;;wBAHK,aAAa,GAAG,SAGrB;wBACD,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,aAAa,CAAC,SAAS,CAAC;wBACxD,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;;;;;KACtD;IAEO,mEAAa,GAArB,UAAsB,KAAc;QAChC,IAAI,CAAC,KAAK,EAAE;YACR,IAAI,CAAC,+BAA+B,EAAE,CAAC;YACvC,OAAO;SACV;QAED,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,UAAC,QAAQ;YAC5D,IAAM,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAC/B,OAAO,KAAK,CAAC,KAAK,CAAC,UAAC,IAAI,IAAK,OAAA,QAAQ,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,EAAxD,CAAwD,CAAC,CAAC;QAC3F,CAAC,CAAC,CAAC;IACP,CAAC;IAEO,qFAA+B,GAAvC;QACI,IAAI,CAAC,qBAAqB,kBAAO,IAAI,CAAC,aAAa,CAAC,CAAC;IACzD,CAAC;IAlFQ;QAAR,KAAK,EAAE;;mFAAyB;IACxB;QAAR,KAAK,EAAE;;qFAAsB;IACpB;QAAT,MAAM,EAAE;kCAAqB,YAAY;2FAAmB;IAHjE;QAPC,oBAAoB,EAAE;QACtB,SAAS,CAAC;YACP,QAAQ,EAAE,yBAAyB;YACnC,QAAQ,EAAE,gnCAAokC;YAC9kC,MAAM,EAAE,CAAC,8YAA8Y,CAAC;YACxZ,eAAe,EAAE,uBAAuB,CAAC,MAAM;SAClD,CAAC;yCAa2C,mBAAmB,EAAe,iBAAiB;mDAwE/F;IAAD,kDAAC;CAAA,AApFD,IAoFC\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/components/pages/addPageWizard/components/selectPageTemplate/SelectPageTemplateComponent.d.ts","writeByteOrderMark":false,"text":"import { ChangeDetectorRef, EventEmitter, OnChanges, SimpleChanges } from '@angular/core';\r\nimport { IUriContext } from 'smarteditcommons';\r\nimport { PageTemplateType } from '../../../../../services/pages/types';\r\nimport { PageTemplateService } from '../../../../../services/PageTemplateService';\r\nexport declare class SelectPageTemplateComponent implements OnChanges {\r\n    private pageTemplateService;\r\n    private cdr;\r\n    uriContext: IUriContext;\r\n    pageTypeCode: string;\r\n    onTemplateSelected: EventEmitter<PageTemplateType>;\r\n    searchString: string;\r\n    pageTemplates: PageTemplateType[];\r\n    filteredPageTemplates: PageTemplateType[];\r\n    private selectedTemplate;\r\n    private cache;\r\n    constructor(pageTemplateService: PageTemplateService, cdr: ChangeDetectorRef);\r\n    ngOnChanges(changes: SimpleChanges): Promise<void>;\r\n    templateSelected(pageTemplate: PageTemplateType): void;\r\n    isSelected(pageTemplate: PageTemplateType): boolean;\r\n    clearSearch(): void;\r\n    onSearchChange(value: string): void;\r\n    private onInputUpdated;\r\n    private setPageTemplates;\r\n    private filterByQuery;\r\n    private setDefaultFilteredPageTemplates;\r\n}\r\n"}}
