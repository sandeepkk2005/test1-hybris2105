{"code":"import { __awaiter, __decorate, __generator, __metadata } from \"tslib\";\r\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, Input } from '@angular/core';\r\nimport { WorkflowService } from '../../../services/WorkflowService';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"PageStatusComponent\", {\r\n    selector: 'se-page-status',\r\n    template: \"<div class=\\\"se-page-status\\\"><div class=\\\"se-page-status__icon\\\" [ngClass]=\\\"statusIconCssClass\\\"></div><div class=\\\"se-page-status__label\\\">{{ statusLabel | translate }}</div></div>\",\r\n    styles: [\".se-page-status{display:flex;flex-direction:row;align-items:center}.se-page-status__label{white-space:nowrap}.se-page-status__icon{float:left;margin-left:10px;margin-right:10px}.se-page-status__icon--draft{width:12px;height:12px;border-radius:50%;background-color:#74777a}.se-page-status__icon--in_progress{width:12px;height:12px;border-radius:50%;background-color:#e9730c}.se-page-status__icon--ready_to_sync{width:12px;height:12px;border-radius:50%;background-color:#0a6ed1}.se-page-status__icon--synced{width:12px;height:12px;border-radius:50%;background-color:#0a7e3e}.se-page-status__icon--locked{color:#32363a}\"],\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n});\r\nvar PageStatusComponent = /** @class */ (function () {\r\n    function PageStatusComponent(workflowService, cdr) {\r\n        this.workflowService = workflowService;\r\n        this.cdr = cdr;\r\n        this.LOCALIZATION_PREFIX = 'se.cms.page.displaystatus.';\r\n    }\r\n    PageStatusComponent.prototype.ngOnChanges = function (changes) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var uuidChange, displayStatusChange, detectChanges, _a, displayStatusLC;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        uuidChange = changes.uuid;\r\n                        displayStatusChange = changes.displayStatus;\r\n                        detectChanges = false;\r\n                        if (!(uuidChange && uuidChange.currentValue)) return [3 /*break*/, 2];\r\n                        _a = this;\r\n                        return [4 /*yield*/, this.isPageLockedToCurrentUser(this.uuid)];\r\n                    case 1:\r\n                        _a.isPageLocked = _b.sent();\r\n                        detectChanges = true;\r\n                        _b.label = 2;\r\n                    case 2:\r\n                        if (displayStatusChange && displayStatusChange.currentValue) {\r\n                            displayStatusLC = this.displayStatus.toLowerCase();\r\n                            this.statusLabel = \"\" + this.LOCALIZATION_PREFIX + displayStatusLC;\r\n                            this.statusIconCssClass = this.getStatusIconCssClass(this.isPageLocked, displayStatusLC);\r\n                        }\r\n                        if (detectChanges) {\r\n                            this.cdr.detectChanges();\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PageStatusComponent.prototype.isPageLockedToCurrentUser = function (uuid) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var workflow;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.workflowService.getActiveWorkflowForPageUuid(uuid)];\r\n                    case 1:\r\n                        workflow = _a.sent();\r\n                        return [2 /*return*/, workflow && !workflow.isAvailableForCurrentPrincipal];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PageStatusComponent.prototype.getStatusIconCssClass = function (isPageLocked, displayStatus) {\r\n        return isPageLocked\r\n            ? 'icon-locked se-page-status__icon--locked'\r\n            : \"se-page-status__icon--\" + displayStatus;\r\n    };\r\n    __decorate([\r\n        Input(),\r\n        __metadata(\"design:type\", Object)\r\n    ], PageStatusComponent.prototype, \"uuid\", void 0);\r\n    __decorate([\r\n        Input(),\r\n        __metadata(\"design:type\", Object)\r\n    ], PageStatusComponent.prototype, \"displayStatus\", void 0);\r\n    PageStatusComponent = __decorate([\r\n        Component({\r\n            selector: 'se-page-status',\r\n            template: \"<div class=\\\"se-page-status\\\"><div class=\\\"se-page-status__icon\\\" [ngClass]=\\\"statusIconCssClass\\\"></div><div class=\\\"se-page-status__label\\\">{{ statusLabel | translate }}</div></div>\",\r\n            styles: [\".se-page-status{display:flex;flex-direction:row;align-items:center}.se-page-status__label{white-space:nowrap}.se-page-status__icon{float:left;margin-left:10px;margin-right:10px}.se-page-status__icon--draft{width:12px;height:12px;border-radius:50%;background-color:#74777a}.se-page-status__icon--in_progress{width:12px;height:12px;border-radius:50%;background-color:#e9730c}.se-page-status__icon--ready_to_sync{width:12px;height:12px;border-radius:50%;background-color:#0a6ed1}.se-page-status__icon--synced{width:12px;height:12px;border-radius:50%;background-color:#0a7e3e}.se-page-status__icon--locked{color:#32363a}\"],\r\n            changeDetection: ChangeDetectionStrategy.OnPush\r\n        }),\r\n        __metadata(\"design:paramtypes\", [WorkflowService, ChangeDetectorRef])\r\n    ], PageStatusComponent);\r\n    return PageStatusComponent;\r\n}());\r\nexport { PageStatusComponent };\r\n//# sourceMappingURL=PageStatusComponent.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/workflow/services/WorkflowService.ts"],"map":"{\"version\":3,\"file\":\"PageStatusComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../../../src/components/workflow/components/pageDisplayStatus/pageStatus/PageStatusComponent.ts\"],\"names\":[],\"mappings\":\";AACA,OAAO,EACH,uBAAuB,EACvB,iBAAiB,EACjB,SAAS,EACT,KAAK,EAGR,MAAM,eAAe,CAAC;AAEvB,OAAO,EAAE,eAAe,EAAE,MAAM,mCAAmC,CAAC;6EAEzD;IACP,QAAQ,EAAE,gBAAgB;IAC1B,QAAQ,EAAE,yLAAiL;IAC3L,MAAM,EAAE,CAAC,0mBAA0mB,CAAC;IACpnB,eAAe,EAAE,uBAAuB,CAAC,MAAM;CAClD;AACD;IAYI,6BAAoB,eAAgC,EAAU,GAAsB;QAAhE,oBAAe,GAAf,eAAe,CAAiB;QAAU,QAAG,GAAH,GAAG,CAAmB;QAH5E,wBAAmB,GAAG,4BAA4B,CAAC;IAG4B,CAAC;IAElF,yCAAW,GAAjB,UAAkB,OAAsB;;;;;;wBAC9B,UAAU,GAAG,OAAO,CAAC,IAAI,CAAC;wBAC1B,mBAAmB,GAAG,OAAO,CAAC,aAAa,CAAC;wBAE9C,aAAa,GAAG,KAAK,CAAC;6BACtB,CAAA,UAAU,IAAI,UAAU,CAAC,YAAY,CAAA,EAArC,wBAAqC;wBACrC,KAAA,IAAI,CAAA;wBAAgB,qBAAM,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAA;;wBAAnE,GAAK,YAAY,GAAG,SAA+C,CAAC;wBACpE,aAAa,GAAG,IAAI,CAAC;;;wBAGzB,IAAI,mBAAmB,IAAI,mBAAmB,CAAC,YAAY,EAAE;4BACnD,eAAe,GAAG,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;4BAEzD,IAAI,CAAC,WAAW,GAAG,KAAG,IAAI,CAAC,mBAAmB,GAAG,eAAiB,CAAC;4BAEnE,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,qBAAqB,CAChD,IAAI,CAAC,YAAY,EACjB,eAAe,CAClB,CAAC;yBACL;wBAED,IAAI,aAAa,EAAE;4BACf,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC;yBAC5B;;;;;KACJ;IAEa,uDAAyB,GAAvC,UAAwC,IAAY;;;;;4BAC/B,qBAAM,IAAI,CAAC,eAAe,CAAC,4BAA4B,CAAC,IAAI,CAAC,EAAA;;wBAAxE,QAAQ,GAAG,SAA6D;wBAC9E,sBAAO,QAAQ,IAAI,CAAC,QAAQ,CAAC,8BAA8B,EAAC;;;;KAC/D;IAEO,mDAAqB,GAA7B,UAA8B,YAAqB,EAAE,aAAqB;QACtE,OAAO,YAAY;YACf,CAAC,CAAC,0CAA0C;YAC5C,CAAC,CAAC,2BAAyB,aAAe,CAAC;IACnD,CAAC;IAhDQ;QAAR,KAAK,EAAE;;qDAAwB;IACvB;QAAR,KAAK,EAAE;;8DAAiC;IAFhC,mBAAmB;QAN/B,SAAS,CAAC;YACP,QAAQ,EAAE,gBAAgB;YAC1B,QAAQ,EAAE,yLAAiL;YAC3L,MAAM,EAAE,CAAC,0mBAA0mB,CAAC;YACpnB,eAAe,EAAE,uBAAuB,CAAC,MAAM;SAClD,CAAC;yCAauC,eAAe,EAAe,iBAAiB;OAZ3E,mBAAmB,CAkD/B;IAAD,0BAAC;CAAA,AAlDD,IAkDC;SAlDY,mBAAmB\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/components/workflow/components/pageDisplayStatus/pageStatus/PageStatusComponent.d.ts","writeByteOrderMark":false,"text":"import { ChangeDetectorRef, OnChanges, SimpleChanges } from '@angular/core';\r\nimport { Nullable } from 'smarteditcommons';\r\nimport { WorkflowService } from '../../../services/WorkflowService';\r\nexport declare class PageStatusComponent implements OnChanges {\r\n    private workflowService;\r\n    private cdr;\r\n    uuid: Nullable<string>;\r\n    displayStatus: Nullable<string>;\r\n    statusLabel: string;\r\n    statusIconCssClass: string;\r\n    private LOCALIZATION_PREFIX;\r\n    private isPageLocked;\r\n    constructor(workflowService: WorkflowService, cdr: ChangeDetectorRef);\r\n    ngOnChanges(changes: SimpleChanges): Promise<void>;\r\n    private isPageLockedToCurrentUser;\r\n    private getStatusIconCssClass;\r\n}\r\n"}}
