{"code":"import { YTreeDndEvent } from './types';\r\n/* @internal */\r\nexport var TreeDndOptionFactory = function ($timeout, treeConfig, confirmationModalService, $q, alertService) {\r\n    'ngInject';\r\n    return /** @class */ (function () {\r\n        function class_1(options) {\r\n            this.dragEnabled = false;\r\n            this.dragDelay = treeConfig.dragDelay;\r\n            this.callbacks = {};\r\n            if (!options) {\r\n                return;\r\n            }\r\n            if (options.onDropCallback) {\r\n                this.dragEnabled = true;\r\n                this.callbacks.dropped = function (event) {\r\n                    if (event.source === null || event.dest === null) {\r\n                        return;\r\n                    }\r\n                    var dndEvent = new YTreeDndEvent(event.source.nodeScope.$modelValue, event.dest.nodesScope.$modelValue, event.dest.index, event.source.nodeScope.$parentNodeScope, event.dest.nodesScope.$nodeScope);\r\n                    $timeout(function () {\r\n                        options.onDropCallback(dndEvent);\r\n                    });\r\n                };\r\n            }\r\n            if (options.beforeDropCallback) {\r\n                this.dragEnabled = true;\r\n                this.callbacks.beforeDrop = function (event) {\r\n                    if (event.source === null || event.dest === null) {\r\n                        return true;\r\n                    }\r\n                    var dndEvent = new YTreeDndEvent(event.source.nodeScope.$modelValue, event.dest.nodesScope.$modelValue, event.dest.index);\r\n                    var condition = options.beforeDropCallback(dndEvent);\r\n                    return $q.when(condition).then(function (result) {\r\n                        if (typeof result === 'object') {\r\n                            if (result.confirmDropI18nKey) {\r\n                                var message = {\r\n                                    description: result.confirmDropI18nKey\r\n                                };\r\n                                return confirmationModalService.confirm(message);\r\n                            }\r\n                            if (result.rejectDropI18nKey) {\r\n                                alertService.showDanger({\r\n                                    message: result.rejectDropI18nKey\r\n                                });\r\n                                return false;\r\n                            }\r\n                            throw new Error('Unexpected return value for beforeDropCallback does not contain confirmDropI18nKey nor rejectDropI18nKey: ' +\r\n                                result);\r\n                        }\r\n                        return result;\r\n                    });\r\n                };\r\n            }\r\n            if (options.allowDropCallback) {\r\n                this.dragEnabled = true;\r\n                this.callbacks.accept = function (sourceNodeScope, destNodesScope, destIndex) {\r\n                    var dndEvent = new YTreeDndEvent(sourceNodeScope.$modelValue, destNodesScope.$modelValue, destIndex);\r\n                    return options.allowDropCallback(dndEvent);\r\n                };\r\n            }\r\n        }\r\n        return class_1;\r\n    }());\r\n};\r\n//# sourceMappingURL=TreeDndOptionsFactory.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@types/angular@1.7.3/node_modules/@types/angular/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/components/tree/types.ts"],"map":"{\"version\":3,\"file\":\"TreeDndOptionsFactory.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/components/tree/TreeDndOptionsFactory.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/components/tree/TreeDndOptionsFactory.d.ts","writeByteOrderMark":false,"text":"import { IAlertService } from '@smart/utils';\r\nimport * as angular from 'angular';\r\nimport { TreeConfiguration } from './types';\r\nexport declare const TreeDndOptionFactory: ($timeout: angular.ITimeoutService, treeConfig: TreeConfiguration, confirmationModalService: any, $q: angular.IQService, alertService: IAlertService) => any;\r\n"}}
