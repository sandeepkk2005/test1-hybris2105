{"code":"/*\r\n * Copyright (c) 2021 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\n/* eslint-disable max-classes-per-file */\r\n/*\r\n * Copyright (c) 2020 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\n/* tslint:disable:max-classes-per-file */\r\nimport { __decorate, __extends, __metadata } from \"tslib\";\r\nimport { Injectable } from '@angular/core';\r\nimport { UpgradeModule } from '@angular/upgrade/static';\r\nimport { AbstractAngularJSBasedCustomElement, WindowUtils } from 'smarteditcommons/utils';\r\n/*\r\n * Custom Web Element class Factory aimed at hiding behing a framework agnostic <se-template-ge-widget> tag\r\n * the legacy AngularJS / ng-include / template based implementations of old Generic editor custom widgets.\r\n *\r\n */\r\nfunction genericEditorAngularJSTemplateBasedCustomElementClassFactory(upgrade) {\r\n    return /** @class */ (function (_super) {\r\n        __extends(class_1, _super);\r\n        function class_1() {\r\n            var _this = _super.call(this, upgrade) || this;\r\n            _this.angularJSBody = \"\\n            <div\\n                class=\\\"ySEGenericEditorField ySEGenericEditorField__input-page-name--color\\\"\\n                data-ng-include=\\\"field.template\\\"\\n            ></div>\\n        \";\r\n            return _this;\r\n        }\r\n        class_1.prototype.internalConnectedCallback = function () {\r\n            var parent = this.parentElement.closest(\"se-generic-editor-field\") ||\r\n                // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\r\n                this.parentElement.closest(\"generic-editor-field\");\r\n            if (!parent || !parent.field) {\r\n                return;\r\n            }\r\n            this.markAsProcessed();\r\n            var editor = parent.editor, model = parent.model, field = parent.field, qualifier = parent.qualifier, id = parent.id, editorStackId = parent.editorStackId, isFieldDisabled = parent.isFieldDisabled, $ctrl = parent.$ctrl;\r\n            while (this.firstChild) {\r\n                this.removeChild(this.firstChild);\r\n            }\r\n            this.appendChild(window.smarteditJQuery(this.angularJSBody)[0]);\r\n            this.scope = this.$rootScope.$new(false);\r\n            var scope = this\r\n                .scope;\r\n            scope.editor = editor;\r\n            scope.model = model;\r\n            scope.field = field;\r\n            scope.qualifier = qualifier;\r\n            scope.id = id;\r\n            scope.editorStackId = editorStackId;\r\n            scope.isFieldDisabled = isFieldDisabled;\r\n            scope.$ctrl = $ctrl;\r\n            this.$compile(this)(this.scope)[0];\r\n        };\r\n        return class_1;\r\n    }(AbstractAngularJSBasedCustomElement));\r\n}\r\nvar /* @ngInject */ LegacyGEWidgetToCustomElementConverter = /** @class */ (function () {\r\n    function /* @ngInject */ LegacyGEWidgetToCustomElementConverter(upgrade, windowUtils) {\r\n        this.upgrade = upgrade;\r\n        this.windowUtils = windowUtils;\r\n    }\r\n    /* @ngInject */ LegacyGEWidgetToCustomElementConverter_1 = /* @ngInject */ LegacyGEWidgetToCustomElementConverter;\r\n    /*\r\n     * must only happen in the container, and only once, where generic editor is eligible.\r\n     * If it happens first in smarteditloader or smartedit then the injection of those\r\n     * will be used and the app will miss dependencies and template cache.\r\n     */\r\n    /* @ngInject */ LegacyGEWidgetToCustomElementConverter.prototype.convert = function () {\r\n        if (!this.windowUtils.isIframe() &&\r\n            !customElements.get(/* @ngInject */ LegacyGEWidgetToCustomElementConverter_1.TEMPLATE_WIDGET_NAME)) {\r\n            var CustomComponentClass = genericEditorAngularJSTemplateBasedCustomElementClassFactory(this.upgrade);\r\n            customElements.define(/* @ngInject */ LegacyGEWidgetToCustomElementConverter_1.TEMPLATE_WIDGET_NAME, CustomComponentClass);\r\n        }\r\n    };\r\n    var /* @ngInject */ LegacyGEWidgetToCustomElementConverter_1;\r\n    /* @ngInject */ LegacyGEWidgetToCustomElementConverter.TEMPLATE_WIDGET_NAME = \"se-template-ge-widget\";\r\n    /* @ngInject */ LegacyGEWidgetToCustomElementConverter = /* @ngInject */ LegacyGEWidgetToCustomElementConverter_1 = __decorate([\r\n        Injectable(),\r\n        __metadata(\"design:paramtypes\", [UpgradeModule, WindowUtils])\r\n    ], /* @ngInject */ LegacyGEWidgetToCustomElementConverter);\r\n    return /* @ngInject */ LegacyGEWidgetToCustomElementConverter;\r\n}());\r\nexport { /* @ngInject */ LegacyGEWidgetToCustomElementConverter };\r\n//# sourceMappingURL=LegacyGEWidgetToCustomElementConverter.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/upgrade@8.2.14_d2ff5303d1bb22207cb4aaa9bb380a83/node_modules/@angular/upgrade/static.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/utils/index.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/components/genericEditor/components/GenericEditorFieldComponent.ts"],"map":"{\"version\":3,\"file\":\"LegacyGEWidgetToCustomElementConverter.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/components/genericEditor/services/LegacyGEWidgetToCustomElementConverter.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/components/genericEditor/services/LegacyGEWidgetToCustomElementConverter.d.ts","writeByteOrderMark":false,"text":"import { UpgradeModule } from '@angular/upgrade/static';\r\nimport { WindowUtils } from 'smarteditcommons/utils';\r\nexport declare class LegacyGEWidgetToCustomElementConverter {\r\n    private upgrade;\r\n    private windowUtils;\r\n    static readonly TEMPLATE_WIDGET_NAME = \"se-template-ge-widget\";\r\n    constructor(upgrade: UpgradeModule, windowUtils: WindowUtils);\r\n    convert(): void;\r\n}\r\n"}}
