{"code":"import { __extends, __spreadArrays } from \"tslib\";\r\n/*\r\n * Copyright (c) 2021 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { IToolbarService } from 'smarteditcommons';\r\nvar ToolbarService = /** @class */ (function (_super) {\r\n    __extends(ToolbarService, _super);\r\n    function ToolbarService(gatewayId, gatewayProxy, logService, $templateCache, permissionService) {\r\n        var _this = _super.call(this, logService, $templateCache, permissionService) || this;\r\n        _this.gatewayId = gatewayId;\r\n        _this.onAliasesChange = null;\r\n        gatewayProxy.initForService(_this, [\r\n            'addAliases',\r\n            'removeItemByKey',\r\n            'removeAliasByKey',\r\n            '_removeItemOnInner',\r\n            'triggerActionOnInner'\r\n        ]);\r\n        return _this;\r\n    }\r\n    ToolbarService.prototype.addAliases = function (aliases) {\r\n        var _this = this;\r\n        this.aliases = this.aliases.map(function (alias) { return _this.get(aliases, alias) || alias; });\r\n        this.aliases = __spreadArrays((this.aliases || []), (aliases || []).filter(function (alias) { return !_this.get(_this.aliases, alias); }));\r\n        this.aliases = this.sortAliases(this.aliases);\r\n        if (this.onAliasesChange) {\r\n            this.onAliasesChange(this.aliases);\r\n        }\r\n    };\r\n    /**\r\n     * This method removes the action and the aliases of the toolbar item identified by\r\n     * the provided key.\r\n     *\r\n     * @param itemKey - Identifier of the toolbar item to remove.\r\n     */\r\n    ToolbarService.prototype.removeItemByKey = function (itemKey) {\r\n        if (itemKey in this.actions) {\r\n            delete this.actions[itemKey];\r\n        }\r\n        else {\r\n            this._removeItemOnInner(itemKey);\r\n        }\r\n        this.removeAliasByKey(itemKey);\r\n    };\r\n    ToolbarService.prototype.removeAliasByKey = function (itemKey) {\r\n        var aliasIndex = 0;\r\n        for (; aliasIndex < this.aliases.length; aliasIndex++) {\r\n            if (this.aliases[aliasIndex].key === itemKey) {\r\n                break;\r\n            }\r\n        }\r\n        if (aliasIndex < this.aliases.length) {\r\n            this.aliases.splice(aliasIndex, 1);\r\n        }\r\n        if (this.onAliasesChange) {\r\n            this.onAliasesChange(this.aliases);\r\n        }\r\n    };\r\n    ToolbarService.prototype.setOnAliasesChange = function (onAliasesChange) {\r\n        this.onAliasesChange = onAliasesChange;\r\n    };\r\n    ToolbarService.prototype.triggerAction = function (action) {\r\n        if (action && this.actions[action.key]) {\r\n            this.actions[action.key].call(action);\r\n            return;\r\n        }\r\n        this.triggerActionOnInner(action);\r\n    };\r\n    ToolbarService.prototype.get = function (aliases, alias) {\r\n        return aliases.find(function (_a) {\r\n            var key = _a.key;\r\n            return key === alias.key;\r\n        });\r\n    };\r\n    ToolbarService.prototype.sortAliases = function (aliases) {\r\n        var samePriority = false;\r\n        var warning = 'In ' + this.gatewayId + ' the items ';\r\n        var _section = null;\r\n        var result = __spreadArrays((aliases || [])).sort(function (a, b) {\r\n            if (a.priority === b.priority && a.section === b.section) {\r\n                _section = a.section;\r\n                warning += a.key + ' and ' + b.key + ' ';\r\n                samePriority = true;\r\n                return a.key > b.key ? 1 : -1; // or the opposite ?\r\n            }\r\n            return a.priority - b.priority;\r\n        });\r\n        if (samePriority) {\r\n            this.logService.warn('WARNING: ' + warning + 'have the same priority withing section:' + _section);\r\n        }\r\n        return result;\r\n    };\r\n    return ToolbarService;\r\n}(IToolbarService));\r\nexport { ToolbarService };\r\n//# sourceMappingURL=ToolbarService.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts"],"map":"{\"version\":3,\"file\":\"ToolbarService.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/services/toolbar/services/ToolbarService.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-container/services/toolbar/services/ToolbarService.d.ts","writeByteOrderMark":false,"text":"/// <reference types=\"angular\" />\r\nimport { GatewayProxy, IPermissionService, IToolbarService, LogService, ToolbarItemInternal } from 'smarteditcommons';\r\nexport declare class ToolbarService extends IToolbarService {\r\n    gatewayId: string;\r\n    private onAliasesChange;\r\n    constructor(gatewayId: string, gatewayProxy: GatewayProxy, logService: LogService, $templateCache: angular.ITemplateCacheService, permissionService: IPermissionService);\r\n    addAliases(aliases: ToolbarItemInternal[]): void;\r\n    /**\r\n     * This method removes the action and the aliases of the toolbar item identified by\r\n     * the provided key.\r\n     *\r\n     * @param itemKey - Identifier of the toolbar item to remove.\r\n     */\r\n    removeItemByKey(itemKey: string): void;\r\n    removeAliasByKey(itemKey: string): void;\r\n    setOnAliasesChange(onAliasesChange: (aliases: ToolbarItemInternal[]) => void): void;\r\n    triggerAction(action: ToolbarItemInternal): void;\r\n    private get;\r\n    private sortAliases;\r\n}\r\n"}}
