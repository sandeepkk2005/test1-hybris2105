{"code":"import { __awaiter, __decorate, __extends, __generator, __metadata } from \"tslib\";\r\n/*\r\n * Copyright (c) 2021 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { IComponentVisibilityAlertService, ComponentVisibilityAlertComponent } from 'cmscommons';\r\nimport { GatewayProxied, IAlertService, IAlertServiceType, ISharedDataService, SeDowngradeService, EXPERIENCE_STORAGE_KEY } from 'smarteditcommons';\r\nimport { ActionableAlertService } from './ActionableAlertService';\r\nvar AlertMessage;\r\n(function (AlertMessage) {\r\n    AlertMessage[\"HIDDEN\"] = \"se.cms.component.visibility.alert.description.hidden\";\r\n    AlertMessage[\"RESTRICTED\"] = \"se.cms.component.visibility.alert.description.restricted\";\r\n})(AlertMessage || (AlertMessage = {}));\r\nvar /* @ngInject */ ComponentVisibilityAlertService = /** @class */ (function (_super) {\r\n    __extends(/* @ngInject */ ComponentVisibilityAlertService, _super);\r\n    function /* @ngInject */ ComponentVisibilityAlertService(sharedDataService, alertService, actionableAlertService) {\r\n        var _this = _super.call(this) || this;\r\n        _this.sharedDataService = sharedDataService;\r\n        _this.alertService = alertService;\r\n        _this.actionableAlertService = actionableAlertService;\r\n        return _this;\r\n    }\r\n    /* @ngInject */ ComponentVisibilityAlertService.prototype.checkAndAlertOnComponentVisibility = function (component) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var shouldShowAlert, experience, message, isExternal, actionableAlertConf;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        shouldShowAlert = !component.visible || component.restricted;\r\n                        if (!shouldShowAlert) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [4 /*yield*/, this.sharedDataService.get(EXPERIENCE_STORAGE_KEY)];\r\n                    case 1:\r\n                        experience = (_a.sent());\r\n                        message = !component.visible ? AlertMessage.HIDDEN : AlertMessage.RESTRICTED;\r\n                        isExternal = component.catalogVersion !== experience.pageContext.catalogVersionUuid;\r\n                        if (isExternal) {\r\n                            this.alertService.showAlert({\r\n                                message: message\r\n                            });\r\n                        }\r\n                        else {\r\n                            actionableAlertConf = {\r\n                                component: ComponentVisibilityAlertComponent,\r\n                                duration: 6000,\r\n                                data: {\r\n                                    component: component,\r\n                                    message: message\r\n                                }\r\n                            };\r\n                            this.actionableAlertService.displayActionableAlert(actionableAlertConf, IAlertServiceType.INFO);\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ ComponentVisibilityAlertService = __decorate([\r\n        SeDowngradeService(IComponentVisibilityAlertService),\r\n        GatewayProxied('checkAndAlertOnComponentVisibility'),\r\n        __metadata(\"design:paramtypes\", [ISharedDataService,\r\n            IAlertService,\r\n            ActionableAlertService])\r\n    ], /* @ngInject */ ComponentVisibilityAlertService);\r\n    return /* @ngInject */ ComponentVisibilityAlertService;\r\n}(IComponentVisibilityAlertService));\r\nexport { /* @ngInject */ ComponentVisibilityAlertService };\r\n//# sourceMappingURL=ComponentVisibilityAlertServiceOuter.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/actionableAlert/ActionableAlertService.ts"],"map":"{\"version\":3,\"file\":\"ComponentVisibilityAlertServiceOuter.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/services/actionableAlert/ComponentVisibilityAlertServiceOuter.ts\"],\"names\":[],\"mappings\":\";AAAA;;GAEG;AACH,OAAO,EACH,gCAAgC,EAChC,iCAAiC,EAEpC,MAAM,YAAY,CAAC;AACpB,OAAO,EACH,cAAc,EAEd,aAAa,EACb,iBAAiB,EAEjB,kBAAkB,EAClB,kBAAkB,EAClB,sBAAsB,EACzB,MAAM,kBAAkB,CAAC;AAC1B,OAAO,EAAE,sBAAsB,EAAE,MAAM,0BAA0B,CAAC;AAElE,IAAK,YAGJ;AAHD,WAAK,YAAY;IACb,+EAA+D,CAAA;IAC/D,uFAAuE,CAAA;AAC3E,CAAC,EAHI,YAAY,KAAZ,YAAY,QAGhB;AAID;IAAqD,mEAAgC;IACjF,yDACY,iBAAqC,EACrC,YAA2B,EAC3B,sBAA8C;QAH1D,YAKI,iBAAO,SACV;QALW,uBAAiB,GAAjB,iBAAiB,CAAoB;QACrC,kBAAY,GAAZ,YAAY,CAAe;QAC3B,4BAAsB,GAAtB,sBAAsB,CAAwB;;IAG1D,CAAC;IAEY,4FAAkC,GAA/C,UAAgD,SAAwB;;;;;;wBAC9D,eAAe,GAAG,CAAC,SAAS,CAAC,OAAO,IAAI,SAAS,CAAC,UAAU,CAAC;wBACnE,IAAI,CAAC,eAAe,EAAE;4BAClB,sBAAO;yBACV;wBAEmB,qBAAM,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAChD,sBAAsB,CACzB,EAAA;;wBAFK,UAAU,GAAG,CAAC,SAEnB,CAAgB;wBAEX,OAAO,GAAG,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC,YAAY,CAAC,UAAU,CAAC;wBAE7E,UAAU,GAAG,SAAS,CAAC,cAAc,KAAK,UAAU,CAAC,WAAW,CAAC,kBAAkB,CAAC;wBAC1F,IAAI,UAAU,EAAE;4BACZ,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC;gCACxB,OAAO,SAAA;6BACV,CAAC,CAAC;yBACN;6BAAM;4BACG,mBAAmB,GAAiB;gCACtC,SAAS,EAAE,iCAAiC;gCAC5C,QAAQ,EAAE,IAAI;gCACd,IAAI,EAAE;oCACF,SAAS,WAAA;oCACT,OAAO,SAAA;iCACV;6BACJ,CAAC;4BACF,IAAI,CAAC,sBAAsB,CAAC,sBAAsB,CAC9C,mBAAmB,EACnB,iBAAiB,CAAC,IAAI,CACzB,CAAC;yBACL;;;;;KACJ;IAxCL;QAFC,kBAAkB,CAAC,gCAAgC,CAAC;QACpD,cAAc,CAAC,oCAAoC,CAAC;yCAGlB,kBAAkB;YACvB,aAAa;YACH,sBAAsB;uDAqC7D;IAAD,sDAAC;CAAA,AAzCD,CAAqD,gCAAgC,GAyCpF\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/services/actionableAlert/ComponentVisibilityAlertServiceOuter.d.ts","writeByteOrderMark":false,"text":"import { IComponentVisibilityAlertService, SlotComponent } from 'cmscommons';\r\nimport { IAlertService, ISharedDataService } from 'smarteditcommons';\r\nimport { ActionableAlertService } from './ActionableAlertService';\r\nexport declare class ComponentVisibilityAlertService extends IComponentVisibilityAlertService {\r\n    private sharedDataService;\r\n    private alertService;\r\n    private actionableAlertService;\r\n    constructor(sharedDataService: ISharedDataService, alertService: IAlertService, actionableAlertService: ActionableAlertService);\r\n    checkAndAlertOnComponentVisibility(component: SlotComponent): Promise<void>;\r\n}\r\n"}}
