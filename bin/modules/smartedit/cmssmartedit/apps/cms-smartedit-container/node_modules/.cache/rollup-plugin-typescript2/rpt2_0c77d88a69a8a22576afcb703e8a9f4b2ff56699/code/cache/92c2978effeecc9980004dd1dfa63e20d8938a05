{"code":"import { __awaiter, __decorate, __generator, __metadata } from \"tslib\";\r\n/*\r\n * Copyright (c) 2021 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { SeDowngradeService } from 'smarteditcommons';\r\nimport { RestrictionTypesRestService } from '../../dao/RestrictionTypesRestService';\r\nimport { PageTypesRestrictionTypesService } from './PageTypesRestrictionTypesService';\r\nvar /* @ngInject */ RestrictionTypesService = /** @class */ (function () {\r\n    function /* @ngInject */ RestrictionTypesService(pageTypesRestrictionTypesService, restrictionTypesRestService) {\r\n        this.pageTypesRestrictionTypesService = pageTypesRestrictionTypesService;\r\n        this.restrictionTypesRestService = restrictionTypesRestService;\r\n    }\r\n    /* @ngInject */ RestrictionTypesService.prototype.getRestrictionTypesByPageType = function (pageType) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var restrictionTypes, restrictionTypeCodes;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.getRestrictionTypes()];\r\n                    case 1:\r\n                        restrictionTypes = _a.sent();\r\n                        return [4 /*yield*/, this.pageTypesRestrictionTypesService.getRestrictionTypeCodesForPageType(pageType)];\r\n                    case 2:\r\n                        restrictionTypeCodes = _a.sent();\r\n                        return [2 /*return*/, restrictionTypes.filter(function (restrictionType) { return restrictionTypeCodes.indexOf(restrictionType.code) >= 0; })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ RestrictionTypesService.prototype.getRestrictionTypeForTypeCode = function (typeCode) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var restrictionTypes;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.getRestrictionTypes()];\r\n                    case 1:\r\n                        restrictionTypes = _a.sent();\r\n                        return [2 /*return*/, restrictionTypes.find(function (restrictionType) { return restrictionType.code === typeCode; })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ RestrictionTypesService.prototype.getRestrictionTypes = function () {\r\n        if (this.cache) {\r\n            return this.cache;\r\n        }\r\n        else {\r\n            this.cache = this.restrictionTypesRestService\r\n                .getRestrictionTypes()\r\n                .then(function (response) { return response.restrictionTypes; });\r\n        }\r\n        return this.cache;\r\n    };\r\n    /* @ngInject */ RestrictionTypesService = __decorate([\r\n        SeDowngradeService(),\r\n        __metadata(\"design:paramtypes\", [PageTypesRestrictionTypesService,\r\n            RestrictionTypesRestService])\r\n    ], /* @ngInject */ RestrictionTypesService);\r\n    return /* @ngInject */ RestrictionTypesService;\r\n}());\r\nexport { /* @ngInject */ RestrictionTypesService };\r\n//# sourceMappingURL=RestrictionTypesService.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/dao/RestrictionTypesRestService.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/pageRestrictions/PageTypesRestrictionTypesService.ts"],"map":"{\"version\":3,\"file\":\"RestrictionTypesService.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/services/pageRestrictions/RestrictionTypesService.ts\"],\"names\":[],\"mappings\":\";AAAA;;GAEG;AACH,OAAO,EAAE,kBAAkB,EAAE,MAAM,kBAAkB,CAAC;AACtD,OAAO,EAEH,2BAA2B,EAC9B,MAAM,uCAAuC,CAAC;AAC/C,OAAO,EAAE,gCAAgC,EAAE,MAAM,oCAAoC,CAAC;AAGtF;IAGI,iDACY,gCAAkE,EAClE,2BAAwD;QADxD,qCAAgC,GAAhC,gCAAgC,CAAkC;QAClE,gCAA2B,GAA3B,2BAA2B,CAA6B;IACjE,CAAC;IAEE,+EAA6B,GAAnC,UAAoC,QAAgB;;;;;4BACvB,qBAAM,IAAI,CAAC,mBAAmB,EAAE,EAAA;;wBAAnD,gBAAgB,GAAG,SAAgC;wBAC5B,qBAAM,IAAI,CAAC,gCAAgC,CAAC,kCAAkC,CACvG,QAAQ,CACX,EAAA;;wBAFK,oBAAoB,GAAG,SAE5B;wBAED,sBAAO,gBAAgB,CAAC,MAAM,CAC1B,UAAC,eAAe,IAAK,OAAA,oBAAoB,CAAC,OAAO,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,EAAvD,CAAuD,CAC/E,EAAC;;;;KACL;IAEK,+EAA6B,GAAnC,UAAoC,QAAgB;;;;;4BACvB,qBAAM,IAAI,CAAC,mBAAmB,EAAE,EAAA;;wBAAnD,gBAAgB,GAAG,SAAgC;wBAEzD,sBAAO,gBAAgB,CAAC,IAAI,CAAC,UAAC,eAAe,IAAK,OAAA,eAAe,CAAC,IAAI,KAAK,QAAQ,EAAjC,CAAiC,CAAC,EAAC;;;;KACxF;IAED,qEAAmB,GAAnB;QACI,IAAI,IAAI,CAAC,KAAK,EAAE;YACZ,OAAO,IAAI,CAAC,KAAK,CAAC;SACrB;aAAM;YACH,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,2BAA2B;iBACxC,mBAAmB,EAAE;iBACrB,IAAI,CAAC,UAAC,QAAQ,IAAK,OAAA,QAAQ,CAAC,gBAAgB,EAAzB,CAAyB,CAAC,CAAC;SACtD;QACD,OAAO,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAlCL;QADC,kBAAkB,EAAE;yCAK6B,gCAAgC;YACrC,2BAA2B;+CA8BvE;IAAD,8CAAC;CAAA,AAnCD,IAmCC\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/services/pageRestrictions/RestrictionTypesService.d.ts","writeByteOrderMark":false,"text":"import { IRestrictionType, RestrictionTypesRestService } from '../../dao/RestrictionTypesRestService';\r\nimport { PageTypesRestrictionTypesService } from './PageTypesRestrictionTypesService';\r\nexport declare class RestrictionTypesService {\r\n    private pageTypesRestrictionTypesService;\r\n    private restrictionTypesRestService;\r\n    private cache;\r\n    constructor(pageTypesRestrictionTypesService: PageTypesRestrictionTypesService, restrictionTypesRestService: RestrictionTypesRestService);\r\n    getRestrictionTypesByPageType(pageType: string): Promise<IRestrictionType[]>;\r\n    getRestrictionTypeForTypeCode(typeCode: string): Promise<IRestrictionType>;\r\n    getRestrictionTypes(): Promise<IRestrictionType[]>;\r\n}\r\n"}}
