{"code":"import { __awaiter, __decorate, __extends, __generator, __metadata, __param } from \"tslib\";\r\n/*\r\n * Copyright (c) 2021 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Inject } from '@angular/core';\r\nimport * as lodash from 'lodash';\r\nimport { ComponentHandlerService } from 'smartedit/services/ComponentHandlerService';\r\nimport { SeNamespaceService } from 'smartedit/services/SeNamespaceService';\r\nimport { stringUtils, CrossFrameEventService, CATALOG_VERSION_UUID_ATTRIBUTE, COMPONENT_CLASS, CONTAINER_ID_ATTRIBUTE, CONTRACT_CHANGE_LISTENER_COMPONENT_PROCESS_STATUS, CONTRACT_CHANGE_LISTENER_PROCESS_EVENTS, ELEMENT_UUID_ATTRIBUTE, EVENT_PERSPECTIVE_CHANGED, EVENT_PERSPECTIVE_REFRESHED, GatewayProxied, IAlertService, ID_ATTRIBUTE, IExperienceService, INotificationService, IPageInfoService, IPerspectiveService, IRenderService, JQueryUtilsService, LogService, ModalService, OVERLAY_COMPONENT_CLASS, OVERLAY_ID, OVERLAY_RERENDERED_EVENT, SeDowngradeService, SmarteditBootstrapGateway, SystemEventService, SMARTEDIT_ATTRIBUTE_PREFIX, SMARTEDIT_COMPONENT_PROCESS_STATUS, TYPE_ATTRIBUTE, UUID_ATTRIBUTE, WindowUtils, YJQUERY_TOKEN } from 'smarteditcommons';\r\n/** @internal */\r\nvar /* @ngInject */ RenderService = /** @class */ (function (_super) {\r\n    __extends(/* @ngInject */ RenderService, _super);\r\n    function /* @ngInject */ RenderService(smarteditBootstrapGateway, httpClient, logService, yjQuery, alertService, componentHandlerService, crossFrameEventService, jQueryUtilsService, experienceService, seNamespaceService, systemEventService, notificationService, pageInfoService, perspectiveService, windowUtils, modalService) {\r\n        var _this = _super.call(this, yjQuery, systemEventService, notificationService, pageInfoService, perspectiveService, crossFrameEventService, windowUtils, modalService) || this;\r\n        _this.smarteditBootstrapGateway = smarteditBootstrapGateway;\r\n        _this.httpClient = httpClient;\r\n        _this.logService = logService;\r\n        _this.yjQuery = yjQuery;\r\n        _this.alertService = alertService;\r\n        _this.componentHandlerService = componentHandlerService;\r\n        _this.crossFrameEventService = crossFrameEventService;\r\n        _this.jQueryUtilsService = jQueryUtilsService;\r\n        _this.experienceService = experienceService;\r\n        _this.seNamespaceService = seNamespaceService;\r\n        _this.systemEventService = systemEventService;\r\n        _this.resizeSlots = lodash.debounce(_this._resizeSlots.bind(_this), 50);\r\n        _this._slotOriginalHeights = {};\r\n        _this.crossFrameEventService.subscribe(EVENT_PERSPECTIVE_CHANGED, function (eventId, isNonEmptyPerspective) {\r\n            _this.renderPage(isNonEmptyPerspective);\r\n        });\r\n        _this.crossFrameEventService.subscribe(EVENT_PERSPECTIVE_REFRESHED, function (eventId, isNonEmptyPerspective) {\r\n            _this.renderPage(isNonEmptyPerspective);\r\n        });\r\n        _this.systemEventService.subscribe(CONTRACT_CHANGE_LISTENER_PROCESS_EVENTS.PROCESS_COMPONENTS, function (eventId, componentsList) {\r\n            var components = lodash.map(componentsList, function (component) {\r\n                if (component.dataset[SMARTEDIT_COMPONENT_PROCESS_STATUS] !==\r\n                    CONTRACT_CHANGE_LISTENER_COMPONENT_PROCESS_STATUS.KEEP_VISIBLE) {\r\n                    component.dataset[SMARTEDIT_COMPONENT_PROCESS_STATUS] = _this.componentHandlerService.isOverlayOn()\r\n                        ? CONTRACT_CHANGE_LISTENER_COMPONENT_PROCESS_STATUS.PROCESS\r\n                        : CONTRACT_CHANGE_LISTENER_COMPONENT_PROCESS_STATUS.REMOVE;\r\n                }\r\n                return component;\r\n            });\r\n            return Promise.resolve(components);\r\n        });\r\n        return _this;\r\n    }\r\n    /* @ngInject */ RenderService.prototype.toggleOverlay = function (isVisible) {\r\n        var overlay = this.componentHandlerService.getOverlay();\r\n        overlay.css('visibility', isVisible ? 'visible' : 'hidden');\r\n    };\r\n    /* @ngInject */ RenderService.prototype.refreshOverlayDimensions = function (element) {\r\n        var _this = this;\r\n        if (element === void 0) { element = null; }\r\n        element = element || this.yjQuery('body');\r\n        var children = this.componentHandlerService.getFirstSmartEditComponentChildren(element);\r\n        children.each(function (index, childElement) {\r\n            _this.updateComponentSizeAndPosition(childElement);\r\n            _this.refreshOverlayDimensions(childElement);\r\n        });\r\n    };\r\n    /**\r\n     * Updates the dimensions of the overlay component element given the original component element and the overlay component itself.\r\n     * If no overlay component is provided, it will be fetched through {@link componentHandlerService.getOverlayComponent}\r\n     *\r\n     * The overlay component is resized to be the same dimensions of the component for which it overlays, and positioned absolutely\r\n     * on the page. Additionally, it is provided with a minimum height and width. The resizing takes into account both\r\n     * the size of the component element, and the position based on iframe scrolling.\r\n     *\r\n     * @param {HTMLElement} element The original CMS component element from the storefront.\r\n     * @param {HTMLElement =} componentOverlayElem The overlay component. If none is provided\r\n     */\r\n    /* @ngInject */ RenderService.prototype.updateComponentSizeAndPosition = function (element, componentOverlayElem) {\r\n        var componentElem = this.yjQuery(element);\r\n        componentOverlayElem =\r\n            componentOverlayElem ||\r\n                this.componentHandlerService.getComponentCloneInOverlay(componentElem).get(0);\r\n        if (!componentOverlayElem) {\r\n            return;\r\n        }\r\n        var parentPos = this._getParentInOverlay(componentElem).get(0).getBoundingClientRect();\r\n        var innerWidth = componentElem.get(0).offsetWidth;\r\n        var innerHeight = componentElem.get(0).offsetHeight;\r\n        // Update the position based on the IFrame Scrolling\r\n        var pos = componentElem.get(0).getBoundingClientRect();\r\n        var elementTopPos = pos.top - parentPos.top;\r\n        var elementLeftPos = pos.left - parentPos.left;\r\n        // In SakExecutorService.ts, the 'position' and 'top' will decide the slot-contextual-menu show at top of slot or bottom of slot\r\n        componentOverlayElem.style.position = 'absolute';\r\n        componentOverlayElem.style.top = elementTopPos + 'px';\r\n        componentOverlayElem.style.left = elementLeftPos + 'px';\r\n        componentOverlayElem.style.width = innerWidth + 'px';\r\n        componentOverlayElem.style.height = innerHeight + 'px';\r\n        componentOverlayElem.style.minWidth = '51px';\r\n        componentOverlayElem.style.minHeight = '48px';\r\n        var cloneId = this._buildShallowCloneId(componentElem.attr(ID_ATTRIBUTE), componentElem.attr(TYPE_ATTRIBUTE), componentElem.attr(CONTAINER_ID_ATTRIBUTE));\r\n        var shallowCopy = this.yjQuery(componentOverlayElem).find('[id=\"' + cloneId + '\"]');\r\n        shallowCopy.width(innerWidth);\r\n        shallowCopy.height(innerHeight);\r\n        shallowCopy.css('min-height', 49);\r\n        shallowCopy.css('min-width', 51);\r\n    };\r\n    /* @ngInject */ RenderService.prototype.renderPage = function (isRerender) {\r\n        var _this = this;\r\n        this.resizeSlots();\r\n        this.componentHandlerService.getOverlay().hide();\r\n        this.isRenderingBlocked().then(function (isRenderingBlocked) {\r\n            _this._markSmartEditAsReady();\r\n            var overlay = _this._createOverlay();\r\n            if (isRerender && !isRenderingBlocked) {\r\n                overlay.show();\r\n            }\r\n            _this.systemEventService.publish(CONTRACT_CHANGE_LISTENER_PROCESS_EVENTS.RESTART_PROCESS);\r\n            _this.crossFrameEventService.publish(OVERLAY_RERENDERED_EVENT);\r\n        });\r\n    };\r\n    /* @ngInject */ RenderService.prototype.renderSlots = function (_slotIds) {\r\n        if (_slotIds === void 0) { _slotIds = null; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var slotIds, slotsRemaining, storefrontUrl, response, e_1, e_2, root_1;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (stringUtils.isBlank(_slotIds) || (_slotIds instanceof Array && _slotIds.length === 0)) {\r\n                            return [2 /*return*/, Promise.reject('renderService.renderSlots.slotIds.required')];\r\n                        }\r\n                        if (typeof _slotIds === 'string') {\r\n                            _slotIds = [_slotIds];\r\n                        }\r\n                        slotIds = lodash.uniqBy(_slotIds, function (slotId) { return slotId; });\r\n                        slotsRemaining = slotIds.filter(function (id) { return !_this.seNamespaceService.renderComponent(id, 'ContentSlot'); });\r\n                        if (!(slotsRemaining.length <= 0)) return [3 /*break*/, 1];\r\n                        // all were handled by storefront\r\n                        return [2 /*return*/, true];\r\n                    case 1:\r\n                        storefrontUrl = void 0;\r\n                        response = void 0;\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        _a.trys.push([2, 4, , 5]);\r\n                        return [4 /*yield*/, this.experienceService.buildRefreshedPreviewUrl()];\r\n                    case 3:\r\n                        storefrontUrl = _a.sent();\r\n                        return [3 /*break*/, 5];\r\n                    case 4:\r\n                        e_1 = _a.sent();\r\n                        this.logService.error('renderService.renderSlots() - error with buildRefreshedPreviewUrl');\r\n                        return [2 /*return*/, Promise.reject(e_1)];\r\n                    case 5:\r\n                        _a.trys.push([5, 7, , 8]);\r\n                        return [4 /*yield*/, this.httpClient\r\n                                .get(storefrontUrl, {\r\n                                headers: {\r\n                                    Accept: 'text/html',\r\n                                    Pragma: 'no-cache'\r\n                                },\r\n                                responseType: 'text'\r\n                            })\r\n                                .toPromise()];\r\n                    case 6:\r\n                        response = _a.sent();\r\n                        return [3 /*break*/, 8];\r\n                    case 7:\r\n                        e_2 = _a.sent();\r\n                        this.alertService.showDanger({\r\n                            message: e_2\r\n                        });\r\n                        return [2 /*return*/, Promise.reject(e_2)];\r\n                    case 8:\r\n                        root_1 = this.jQueryUtilsService.unsafeParseHTML(response);\r\n                        slotsRemaining.forEach(function (slotId) {\r\n                            var slotSelector = '.' +\r\n                                COMPONENT_CLASS +\r\n                                '[' +\r\n                                TYPE_ATTRIBUTE +\r\n                                \"='ContentSlot'][\" +\r\n                                ID_ATTRIBUTE +\r\n                                \"='\" +\r\n                                slotId +\r\n                                \"']\";\r\n                            var slotToBeRerendered = _this.jQueryUtilsService.extractFromElement(root_1, slotSelector);\r\n                            var originalSlot = _this.yjQuery(slotSelector);\r\n                            originalSlot.html(slotToBeRerendered.html());\r\n                            if (originalSlot.data('smartedit-resized-slot')) {\r\n                                // reset the slot height to auto because the originalSlot height could have been changed previously with a specific height.\r\n                                originalSlot.css('height', 'auto');\r\n                            }\r\n                        });\r\n                        this._reprocessPage();\r\n                        return [2 /*return*/, Promise.resolve()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ RenderService.prototype.renderComponent = function (componentId, componentType) {\r\n        var component = this.componentHandlerService.getComponent(componentId, componentType);\r\n        var slotId = this.componentHandlerService.getParent(component).attr(ID_ATTRIBUTE);\r\n        if (this.seNamespaceService.renderComponent(componentId, componentType, slotId)) {\r\n            return Promise.resolve(true);\r\n        }\r\n        else {\r\n            return this.renderSlots(slotId);\r\n        }\r\n    };\r\n    /* @ngInject */ RenderService.prototype.renderRemoval = function (componentId, componentType, slotId) {\r\n        var removedComponents = this.componentHandlerService\r\n            .getComponentUnderSlot(componentId, componentType, slotId)\r\n            .remove();\r\n        this.refreshOverlayDimensions();\r\n        return removedComponents;\r\n    };\r\n    /**\r\n     * Given a smartEdit component in the storefront layer, its clone in the smartEdit overlay is removed and the pertaining decorators destroyed.\r\n     *\r\n     * @param {Element} element The original CMS component element from the storefront.\r\n     * @param {Element=} parent the closest smartEditComponent parent, expected to be null for the highest elements\r\n     * @param {Object=} oldAttributes The map of former attributes of the element. necessary when the element has mutated since the last creation\r\n     */\r\n    /* @ngInject */ RenderService.prototype.destroyComponent = function (_component, _parent, oldAttributes) {\r\n        var component = this.yjQuery(_component);\r\n        var parent = this.yjQuery(_parent);\r\n        var componentInOverlayId = oldAttributes && oldAttributes[ID_ATTRIBUTE]\r\n            ? oldAttributes[ID_ATTRIBUTE]\r\n            : component.attr(ID_ATTRIBUTE);\r\n        var componentInOverlayType = oldAttributes && oldAttributes[TYPE_ATTRIBUTE]\r\n            ? oldAttributes[TYPE_ATTRIBUTE]\r\n            : component.attr(TYPE_ATTRIBUTE);\r\n        // the node is no longer attached so can't find parent\r\n        if (parent.attr(ID_ATTRIBUTE)) {\r\n            this.componentHandlerService\r\n                .getOverlayComponentWithinSlot(componentInOverlayId, componentInOverlayType, parent.attr(ID_ATTRIBUTE))\r\n                .remove();\r\n        }\r\n        else {\r\n            this.componentHandlerService\r\n                .getComponentInOverlay(componentInOverlayId, componentInOverlayType)\r\n                .remove();\r\n        }\r\n    };\r\n    /**\r\n     * Given a smartEdit component in the storefront layer. An empty clone of it will be created, sized and positioned in the smartEdit overlay\r\n     * then compiled with all eligible decorators for the given perspective (see {@link smarteditServicesModule.interface:IPerspectiveService perspectiveService})\r\n     * @param {Element} element The original CMS component element from the storefront.\r\n     */\r\n    /* @ngInject */ RenderService.prototype.createComponent = function (element) {\r\n        if (this.componentHandlerService.isOverlayOn() && this._isComponentVisible(element)) {\r\n            this._cloneComponent(element);\r\n        }\r\n    };\r\n    /**\r\n     * Resizes the height of all slots on the page based on the sizes of the components. The new height of the\r\n     * slot is set to the minimum height encompassing its sub-components, calculated by comparing each of the\r\n     * sub-components' top and bottom bounding rectangle values.\r\n     *\r\n     * Slots that do not have components inside still appear in the DOM. If the CMS manager is in a perspective in which\r\n     * slot contextual menus are displayed, slots must have a height. Otherwise, overlays will overlap. Thus, empty slots\r\n     * are given a minimum size so that overlays match.\r\n     */\r\n    /* @ngInject */ RenderService.prototype._resizeSlots = function () {\r\n        var _this = this;\r\n        Array.prototype.slice\r\n            .call(this.componentHandlerService.getFirstSmartEditComponentChildren(document.body))\r\n            .forEach(function (slotComponent) {\r\n            var slotComponentID = _this.yjQuery(slotComponent).attr(ID_ATTRIBUTE);\r\n            var slotComponentType = _this.yjQuery(slotComponent).attr(TYPE_ATTRIBUTE);\r\n            var newSlotTop = -1;\r\n            var newSlotBottom = -1;\r\n            _this.yjQuery(slotComponent)\r\n                .find('.' + COMPONENT_CLASS)\r\n                .filter(function (idx, componentInSlotElement) {\r\n                var componentInSlot = _this.yjQuery(componentInSlotElement);\r\n                return (componentInSlot.attr(ID_ATTRIBUTE) !== slotComponentID &&\r\n                    componentInSlot.attr(TYPE_ATTRIBUTE) !== slotComponentType &&\r\n                    componentInSlot.is(':visible'));\r\n            })\r\n                .each(function (compIndex, component) {\r\n                var componentDimensions = component.getBoundingClientRect();\r\n                newSlotTop =\r\n                    newSlotTop === -1\r\n                        ? componentDimensions.top\r\n                        : Math.min(newSlotTop, componentDimensions.top);\r\n                newSlotBottom =\r\n                    newSlotBottom === -1\r\n                        ? componentDimensions.bottom\r\n                        : Math.max(newSlotBottom, componentDimensions.bottom);\r\n            });\r\n            var newSlotHeight = newSlotBottom - newSlotTop;\r\n            var currentSlotHeight = parseFloat(window.getComputedStyle(slotComponent).height) || 0;\r\n            if (Math.abs(currentSlotHeight - newSlotHeight) > 0.001) {\r\n                var currentSlotVerticalPadding = parseFloat(window.getComputedStyle(slotComponent).paddingTop) +\r\n                    parseFloat(window.getComputedStyle(slotComponent).paddingBottom);\r\n                var slotUniqueKey = slotComponentID + '_' + slotComponentType;\r\n                var oldSlotHeight = _this._slotOriginalHeights[slotUniqueKey];\r\n                if (!oldSlotHeight) {\r\n                    oldSlotHeight = currentSlotHeight;\r\n                    _this._slotOriginalHeights[slotUniqueKey] = oldSlotHeight;\r\n                }\r\n                if (newSlotHeight + currentSlotVerticalPadding > oldSlotHeight) {\r\n                    slotComponent.style.height =\r\n                        newSlotHeight + currentSlotVerticalPadding + 'px';\r\n                }\r\n                else {\r\n                    slotComponent.style.height = oldSlotHeight + 'px';\r\n                }\r\n                _this.yjQuery(slotComponent).data('smartedit-resized-slot', true);\r\n            }\r\n        });\r\n    };\r\n    /* @ngInject */ RenderService.prototype._getParentInOverlay = function (element) {\r\n        var parent = this.componentHandlerService.getParent(element);\r\n        if (parent.length) {\r\n            return this.componentHandlerService.getOverlayComponent(parent);\r\n        }\r\n        else {\r\n            return this.componentHandlerService.getOverlay();\r\n        }\r\n    };\r\n    /* @ngInject */ RenderService.prototype._buildShallowCloneId = function (smarteditComponentId, smarteditComponentType, smarteditContainerId) {\r\n        var containerSection = !stringUtils.isBlank(smarteditContainerId)\r\n            ? '_' + smarteditContainerId\r\n            : '';\r\n        return smarteditComponentId + '_' + smarteditComponentType + containerSection + '_overlay';\r\n    };\r\n    /* @ngInject */ RenderService.prototype._cloneComponent = function (el) {\r\n        if (!this.yjQuery(el).is(':visible')) {\r\n            return;\r\n        }\r\n        var element = this.yjQuery(el);\r\n        var parentOverlay = this._getParentInOverlay(element);\r\n        if (!parentOverlay.length) {\r\n            this.logService.error('renderService: parentOverlay empty for component:', element.attr(ID_ATTRIBUTE));\r\n            return;\r\n        }\r\n        if (!this._validateComponentAttributesContract(element)) {\r\n            return;\r\n        }\r\n        // FIXME: CMSX-6139: use dataset instead of attr(): ELEMENT_UUID_ATTRIBUTE value should not be exposed.\r\n        var elementUUID = stringUtils.generateIdentifier();\r\n        if (!element.attr(ELEMENT_UUID_ATTRIBUTE)) {\r\n            element.attr(ELEMENT_UUID_ATTRIBUTE, elementUUID);\r\n        }\r\n        var smarteditComponentId = element.attr(ID_ATTRIBUTE);\r\n        var smarteditComponentType = element.attr(TYPE_ATTRIBUTE);\r\n        var smarteditContainerId = element.attr(CONTAINER_ID_ATTRIBUTE);\r\n        var shallowCopy = this._getDocument().createElement('div');\r\n        shallowCopy.id = this._buildShallowCloneId(smarteditComponentId, smarteditComponentType, smarteditContainerId);\r\n        var smartEditWrapper = this._getDocument().createElement('smartedit-element');\r\n        var componentDecorator = this.yjQuery(smartEditWrapper);\r\n        componentDecorator.append(shallowCopy);\r\n        this.updateComponentSizeAndPosition(element.get(0), smartEditWrapper);\r\n        if (smarteditComponentType === 'NavigationBarCollectionComponent') {\r\n            // Make sure the Navigation Bar is on top of the navigation items\r\n            smartEditWrapper.style.zIndex = '7';\r\n        }\r\n        componentDecorator.addClass(OVERLAY_COMPONENT_CLASS);\r\n        Array.prototype.slice.apply(element.get(0).attributes).forEach(function (node) {\r\n            if (node.nodeName.indexOf(SMARTEDIT_ATTRIBUTE_PREFIX) === 0) {\r\n                componentDecorator.attr(node.nodeName, node.nodeValue);\r\n            }\r\n        });\r\n        parentOverlay.append(smartEditWrapper);\r\n    };\r\n    /* @ngInject */ RenderService.prototype._createOverlay = function () {\r\n        var overlayWrapper = this.componentHandlerService.getOverlay();\r\n        if (overlayWrapper.length) {\r\n            return overlayWrapper;\r\n        }\r\n        var overlay = this._getDocument().createElement('div');\r\n        overlay.id = OVERLAY_ID;\r\n        overlay.style.position = 'absolute';\r\n        overlay.style.top = '0px';\r\n        overlay.style.left = '0px';\r\n        overlay.style.bottom = '0px';\r\n        overlay.style.right = '0px';\r\n        overlay.style.display = 'none';\r\n        document.body.appendChild(overlay);\r\n        return this.yjQuery(overlay);\r\n    };\r\n    /* @ngInject */ RenderService.prototype._validateComponentAttributesContract = function (element) {\r\n        var _this = this;\r\n        var requiredAttributes = [\r\n            ID_ATTRIBUTE,\r\n            UUID_ATTRIBUTE,\r\n            TYPE_ATTRIBUTE,\r\n            CATALOG_VERSION_UUID_ATTRIBUTE\r\n        ];\r\n        var valid = true;\r\n        requiredAttributes.forEach(function (reqAttribute) {\r\n            if (!element || !element.attr(reqAttribute)) {\r\n                valid = false;\r\n                _this.logService.warn('RenderService - smarteditComponent element discovered with missing contract attribute: ' +\r\n                    reqAttribute);\r\n            }\r\n        });\r\n        return valid;\r\n    };\r\n    /* @ngInject */ RenderService.prototype._markSmartEditAsReady = function () {\r\n        this.smarteditBootstrapGateway.getInstance().publish('smartEditReady', {});\r\n    };\r\n    /* @ngInject */ RenderService.prototype._isComponentVisible = function (component) {\r\n        // NOTE: This might not work as expected for fixed positioned items. For those cases a more expensive\r\n        // check must be performed (get the component style and check if it's visible or not).\r\n        return component.offsetParent !== null;\r\n    };\r\n    /* @ngInject */ RenderService.prototype._reprocessPage = function () {\r\n        this.seNamespaceService.reprocessPage();\r\n    };\r\n    /* @ngInject */ RenderService = __decorate([\r\n        GatewayProxied('blockRendering', 'isRenderingBlocked', 'renderSlots', 'renderComponent', 'renderRemoval', 'toggleOverlay', 'refreshOverlayDimensions', 'renderPage'),\r\n        SeDowngradeService(IRenderService),\r\n        __param(3, Inject(YJQUERY_TOKEN)),\r\n        __metadata(\"design:paramtypes\", [SmarteditBootstrapGateway,\r\n            HttpClient,\r\n            LogService, Function, IAlertService,\r\n            ComponentHandlerService,\r\n            CrossFrameEventService,\r\n            JQueryUtilsService,\r\n            IExperienceService,\r\n            SeNamespaceService,\r\n            SystemEventService,\r\n            INotificationService,\r\n            IPageInfoService,\r\n            IPerspectiveService,\r\n            WindowUtils,\r\n            ModalService])\r\n    ], /* @ngInject */ RenderService);\r\n    return /* @ngInject */ RenderService;\r\n}(IRenderService));\r\nexport { /* @ngInject */ RenderService };\r\n//# sourceMappingURL=RenderServiceInner.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/common@8.2.14_@angular+core@8.2.14+rxjs@6.5.4/node_modules/@angular/common/http.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@types/lodash@4.14.159/node_modules/@types/lodash/ts3.1/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit/src/services/ComponentHandlerService.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit/src/services/SeNamespaceService.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts"],"map":"{\"version\":3,\"file\":\"RenderServiceInner.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/services/RenderServiceInner.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit/services/RenderServiceInner.d.ts","writeByteOrderMark":false,"text":"/// <reference types=\"angular\" />\r\n/// <reference types=\"jquery\" />\r\n/// <reference types=\"eonasdan-bootstrap-datetimepicker\" />\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { ComponentHandlerService } from 'smartedit/services/ComponentHandlerService';\r\nimport { SeNamespaceService } from 'smartedit/services/SeNamespaceService';\r\nimport { CrossFrameEventService, IAlertService, IExperienceService, INotificationService, IPageInfoService, IPerspectiveService, IRenderService, JQueryUtilsService, LogService, ModalService, SmarteditBootstrapGateway, SystemEventService, WindowUtils } from 'smarteditcommons';\r\n/** @internal */\r\nexport declare class RenderService extends IRenderService {\r\n    private smarteditBootstrapGateway;\r\n    private httpClient;\r\n    private logService;\r\n    protected yjQuery: JQueryStatic;\r\n    private alertService;\r\n    private componentHandlerService;\r\n    protected crossFrameEventService: CrossFrameEventService;\r\n    private jQueryUtilsService;\r\n    private experienceService;\r\n    private seNamespaceService;\r\n    protected systemEventService: SystemEventService;\r\n    resizeSlots: any;\r\n    private _slotOriginalHeights;\r\n    constructor(smarteditBootstrapGateway: SmarteditBootstrapGateway, httpClient: HttpClient, logService: LogService, yjQuery: JQueryStatic, alertService: IAlertService, componentHandlerService: ComponentHandlerService, crossFrameEventService: CrossFrameEventService, jQueryUtilsService: JQueryUtilsService, experienceService: IExperienceService, seNamespaceService: SeNamespaceService, systemEventService: SystemEventService, notificationService: INotificationService, pageInfoService: IPageInfoService, perspectiveService: IPerspectiveService, windowUtils: WindowUtils, modalService: ModalService);\r\n    toggleOverlay(isVisible: boolean): void;\r\n    refreshOverlayDimensions(element?: JQuery): void;\r\n    /**\r\n     * Updates the dimensions of the overlay component element given the original component element and the overlay component itself.\r\n     * If no overlay component is provided, it will be fetched through {@link componentHandlerService.getOverlayComponent}\r\n     *\r\n     * The overlay component is resized to be the same dimensions of the component for which it overlays, and positioned absolutely\r\n     * on the page. Additionally, it is provided with a minimum height and width. The resizing takes into account both\r\n     * the size of the component element, and the position based on iframe scrolling.\r\n     *\r\n     * @param {HTMLElement} element The original CMS component element from the storefront.\r\n     * @param {HTMLElement =} componentOverlayElem The overlay component. If none is provided\r\n     */\r\n    updateComponentSizeAndPosition(element: HTMLElement, componentOverlayElem?: HTMLElement): void;\r\n    renderPage(isRerender: boolean): void;\r\n    renderSlots(_slotIds?: string[] | string): Promise<any>;\r\n    renderComponent(componentId: string, componentType: string): Promise<string | boolean>;\r\n    renderRemoval(componentId: string, componentType: string, slotId: string): JQuery;\r\n    /**\r\n     * Given a smartEdit component in the storefront layer, its clone in the smartEdit overlay is removed and the pertaining decorators destroyed.\r\n     *\r\n     * @param {Element} element The original CMS component element from the storefront.\r\n     * @param {Element=} parent the closest smartEditComponent parent, expected to be null for the highest elements\r\n     * @param {Object=} oldAttributes The map of former attributes of the element. necessary when the element has mutated since the last creation\r\n     */\r\n    destroyComponent(_component: HTMLElement, _parent?: HTMLElement, oldAttributes?: any): void;\r\n    /**\r\n     * Given a smartEdit component in the storefront layer. An empty clone of it will be created, sized and positioned in the smartEdit overlay\r\n     * then compiled with all eligible decorators for the given perspective (see {@link smarteditServicesModule.interface:IPerspectiveService perspectiveService})\r\n     * @param {Element} element The original CMS component element from the storefront.\r\n     */\r\n    createComponent(element: HTMLElement): void;\r\n    /**\r\n     * Resizes the height of all slots on the page based on the sizes of the components. The new height of the\r\n     * slot is set to the minimum height encompassing its sub-components, calculated by comparing each of the\r\n     * sub-components' top and bottom bounding rectangle values.\r\n     *\r\n     * Slots that do not have components inside still appear in the DOM. If the CMS manager is in a perspective in which\r\n     * slot contextual menus are displayed, slots must have a height. Otherwise, overlays will overlap. Thus, empty slots\r\n     * are given a minimum size so that overlays match.\r\n     */\r\n    private _resizeSlots;\r\n    private _getParentInOverlay;\r\n    private _buildShallowCloneId;\r\n    private _cloneComponent;\r\n    private _createOverlay;\r\n    private _validateComponentAttributesContract;\r\n    private _markSmartEditAsReady;\r\n    private _isComponentVisible;\r\n    private _reprocessPage;\r\n}\r\n"}}
