{"code":"import { __decorate, __metadata } from \"tslib\";\r\n/*\r\n * Copyright (c) 2021 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { IPermissionService, ISharedDataService, SeDowngradeService, EXPERIENCE_STORAGE_KEY } from 'smarteditcommons';\r\n/** @internal */\r\nvar /* @ngInject */ PermissionsRegistrationService = /** @class */ (function () {\r\n    function /* @ngInject */ PermissionsRegistrationService(permissionService, sharedDataService) {\r\n        this.permissionService = permissionService;\r\n        this.sharedDataService = sharedDataService;\r\n    }\r\n    /**\r\n     * Method containing registrations of rules and permissions to be used in smartedit workspace\r\n     */\r\n    /* @ngInject */ PermissionsRegistrationService.prototype.registerRulesAndPermissions = function () {\r\n        var _this = this;\r\n        // Rules\r\n        this.permissionService.registerRule({\r\n            names: ['se.slot.belongs.to.page'],\r\n            verify: function (permissionObjects) {\r\n                return _this.sharedDataService\r\n                    .get(EXPERIENCE_STORAGE_KEY)\r\n                    .then(function (experience) {\r\n                    return experience.pageContext &&\r\n                        experience.pageContext.catalogVersionUuid ===\r\n                            permissionObjects[0].context.slotCatalogVersionUuid;\r\n                });\r\n            }\r\n        });\r\n        // Permissions\r\n        this.permissionService.registerPermission({\r\n            aliases: ['se.slot.not.external'],\r\n            rules: ['se.slot.belongs.to.page']\r\n        });\r\n    };\r\n    /* @ngInject */ PermissionsRegistrationService = __decorate([\r\n        SeDowngradeService(),\r\n        __metadata(\"design:paramtypes\", [IPermissionService,\r\n            ISharedDataService])\r\n    ], /* @ngInject */ PermissionsRegistrationService);\r\n    return /* @ngInject */ PermissionsRegistrationService;\r\n}());\r\nexport { /* @ngInject */ PermissionsRegistrationService };\r\n//# sourceMappingURL=PermissionsRegistrationService.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts"],"map":"{\"version\":3,\"file\":\"PermissionsRegistrationService.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/services/PermissionsRegistrationService.ts\"],\"names\":[],\"mappings\":\";AAAA;;GAEG;AACH,OAAO,EAEH,kBAAkB,EAClB,kBAAkB,EAElB,kBAAkB,EAClB,sBAAsB,EACzB,MAAM,kBAAkB,CAAC;AAE1B,gBAAgB;AAEhB;IACI,wDACY,iBAAqC,EACrC,iBAAqC;QADrC,sBAAiB,GAAjB,iBAAiB,CAAoB;QACrC,sBAAiB,GAAjB,iBAAiB,CAAoB;IAC9C,CAAC;IAEJ;;OAEG;IACI,oFAA2B,GAAlC;QAAA,iBAoBC;QAnBG,QAAQ;QACR,IAAI,CAAC,iBAAiB,CAAC,YAAY,CAAC;YAChC,KAAK,EAAE,CAAC,yBAAyB,CAAC;YAClC,MAAM,EAAE,UAAC,iBAAsC;gBAC3C,OAAA,KAAI,CAAC,iBAAiB;qBACjB,GAAG,CAAC,sBAAsB,CAAC;qBAC3B,IAAI,CACD,UAAC,UAAuB;oBACpB,OAAA,UAAU,CAAC,WAAW;wBACtB,UAAU,CAAC,WAAW,CAAC,kBAAkB;4BACrC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,sBAAsB;gBAFvD,CAEuD,CAC9D;YAPL,CAOK;SACZ,CAAC,CAAC;QAEH,cAAc;QACd,IAAI,CAAC,iBAAiB,CAAC,kBAAkB,CAAC;YACtC,OAAO,EAAE,CAAC,sBAAsB,CAAC;YACjC,KAAK,EAAE,CAAC,yBAAyB,CAAC;SACrC,CAAC,CAAC;IACP,CAAC;IA7BL;QADC,kBAAkB,EAAE;yCAGc,kBAAkB;YAClB,kBAAkB;sDA2BpD;IAAD,qDAAC;CAAA,AA9BD,IA8BC\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-container/services/PermissionsRegistrationService.d.ts","writeByteOrderMark":false,"text":"import { IPermissionService, ISharedDataService } from 'smarteditcommons';\r\n/** @internal */\r\nexport declare class PermissionsRegistrationService {\r\n    private permissionService;\r\n    private sharedDataService;\r\n    constructor(permissionService: IPermissionService, sharedDataService: ISharedDataService);\r\n    /**\r\n     * Method containing registrations of rules and permissions to be used in smartedit workspace\r\n     */\r\n    registerRulesAndPermissions(): void;\r\n}\r\n"}}
