{"code":"import { __assign, __spreadArrays } from \"tslib\";\r\n/*\r\n * Copyright (c) 2021 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\n/* forbiddenNameSpaces angular.module:false */\r\nimport { functionsUtils } from '@smart/utils';\r\nimport * as angular from 'angular';\r\nimport * as lo from 'lodash';\r\nimport { diNameUtils } from './DINameUtils';\r\nvar MultiProviderMap = {};\r\n/**\r\n * **Deprecated since 1905.**\r\n *\r\n * Class level typescript {@link http://www.typescriptlang.org/docs/handbook/decorators.html decorator factory}\r\n * used to declare a Smartedit module from a Dependency injection standpoint.\r\n *\r\n * To create a configurable module, create a static method returning an SeModuleWithProvider object. The module\r\n * can then be imported by a parent module returning the SeModuleWithProvider object from the static method.\r\n * @deprecated\r\n */\r\nexport var SeModule = function (definition) {\r\n    return function (moduleConstructor) {\r\n        definition = definition;\r\n        var seModuleName = diNameUtils.buildName(moduleConstructor);\r\n        var angularInstance = getAngular();\r\n        var allImports = [];\r\n        if (definition.imports) {\r\n            definition.imports.forEach(function (importStatement, index) {\r\n                var throwUnAnnotatedModuleError = function (seModule) {\r\n                    var importedModule = diNameUtils.buildName(seModule);\r\n                    throw new Error(importedModule + \" module was imported into \" + seModuleName + \" module but doesn't seem to have been @SeModule annotated\");\r\n                };\r\n                var moduleName;\r\n                if (typeof importStatement === 'string') {\r\n                    moduleName = importStatement;\r\n                }\r\n                else if (typeof importStatement === 'function') {\r\n                    moduleName = importStatement.moduleName;\r\n                    if (!moduleName) {\r\n                        throwUnAnnotatedModuleError(importStatement);\r\n                    }\r\n                }\r\n                else if (importStatement && importStatement.seModule) {\r\n                    if (!importStatement.seModule.moduleName) {\r\n                        throwUnAnnotatedModuleError(importStatement.seModule);\r\n                    }\r\n                    var moduleWithProvidersName = diNameUtils.buildName(importStatement.seModule);\r\n                    var moduleWithProviders = angularInstance.module(moduleWithProvidersName);\r\n                    moduleName = moduleWithProviders.name;\r\n                    if (importStatement.providers) {\r\n                        addArrayOfProvidersToModule(moduleWithProviders, importStatement.providers);\r\n                    }\r\n                }\r\n                else {\r\n                    throw new Error(\"the import statement \" + importStatement + \" at index \" + index + \" added to \" + seModuleName + \" is neither a legacy string nor an SeModuleConstructor\");\r\n                }\r\n                if (allImports.indexOf(moduleName) > -1) {\r\n                    throw new Error(\"module \" + moduleName + \" is imported more than once into \" + seModuleName);\r\n                }\r\n                allImports.push(moduleName);\r\n            });\r\n        }\r\n        var module = angularInstance.module(seModuleName, allImports);\r\n        if (definition.providers) {\r\n            addArrayOfProvidersToModule(module, definition.providers);\r\n        }\r\n        if (definition.declarations) {\r\n            definition.declarations.forEach(function (declaration) {\r\n                if (declaration.filterName) {\r\n                    addFilterToModule(module, declaration);\r\n                }\r\n                else {\r\n                    addFullComponentGraphToModule(module, declaration);\r\n                }\r\n            });\r\n        }\r\n        if (definition.config) {\r\n            module.config(definition.config);\r\n        }\r\n        if (definition.initialize) {\r\n            module.run(definition.initialize);\r\n        }\r\n        moduleConstructor.moduleName = module.name;\r\n        return moduleConstructor;\r\n    };\r\n};\r\nfunction addArrayOfProvidersToModule(module, providers) {\r\n    providers.forEach(function (provider, index) {\r\n        var moduleName = module.name;\r\n        if (!provider) {\r\n            throw new Error(\"At the time a provider at index \" + index + \" was added to module \" + moduleName + \",\\n\\t\\t\\t\\tit was undefined, this is probably due to the path in your typescript import statement\\n\\t\\t\\t\\treferencing a barrel file of an alias defined in a higher layer, consider using a relative path instead.\");\r\n        }\r\n        if (provider.provide &&\r\n            !provider.useValue &&\r\n            !provider.useClass &&\r\n            !provider.useFactory) {\r\n            throw new Error(\"At the time a provider named \" + provider.provide + \" was added to module \" + moduleName + \"\\n\\t\\t        did not provide an instance of SeValueProvider, SeClassProvider, or FactoryProvider.\");\r\n        }\r\n        if (provider.multi) {\r\n            provider = provider;\r\n            addMultiProviderToModule(module, provider);\r\n        }\r\n        else {\r\n            addProviderToModule(module, provider);\r\n        }\r\n    });\r\n}\r\nfunction addProviderToModule(module, provider) {\r\n    if (provider.useValue) {\r\n        provider = provider;\r\n        module.constant(provider.provide, provider.useValue);\r\n    }\r\n    else if (provider.useClass) {\r\n        provider = provider;\r\n        module.service(provider.provide, provider.useClass);\r\n    }\r\n    else if (provider.useFactory) {\r\n        provider = provider;\r\n        var isNgAnnotated = Array.isArray(provider.useFactory) || provider.useFactory.$inject;\r\n        if (isNgAnnotated && provider.deps) {\r\n            throw Error(\"At the time a provider \" + provider.provide + \" uses ngInject annotations and \\n\\t\\t\\tSeFactoryProvider.deps at the same time. Please use one or the other.\");\r\n        }\r\n        var dependencies = provider.deps\r\n            ? provider.deps.map(function (dependency) {\r\n                return typeof dependency === 'string'\r\n                    ? dependency\r\n                    : diNameUtils.buildServiceName(dependency);\r\n            })\r\n            : [];\r\n        // In current framework, this is only needed for case of multi and for uglify ready di\r\n        module.factory(provider.provide, isNgAnnotated ? provider.useFactory : __spreadArrays(dependencies, [provider.useFactory]));\r\n    }\r\n    else {\r\n        provider = provider;\r\n        var serviceName = diNameUtils.buildServiceName(provider);\r\n        module.service(serviceName, provider);\r\n    }\r\n}\r\nfunction addMultiProviderToModule(module, provider) {\r\n    var multiProviderMapName = module.name + provider.provide;\r\n    var dependencies = MultiProviderMap[multiProviderMapName];\r\n    if (!dependencies) {\r\n        dependencies = [];\r\n    }\r\n    var multiProviderInstance = multiProviderMapName + lo.uniqueId();\r\n    dependencies.push(multiProviderInstance);\r\n    MultiProviderMap[multiProviderMapName] = dependencies;\r\n    var useFactory = function () {\r\n        return [].slice.call(arguments);\r\n    };\r\n    addProviderToModule(module, __assign(__assign({}, provider), { provide: multiProviderInstance }));\r\n    addProviderToModule(module, {\r\n        provide: provider.provide,\r\n        useFactory: useFactory,\r\n        deps: dependencies\r\n    });\r\n}\r\nfunction addFilterToModule(module, filterConstructor) {\r\n    module.filter(filterConstructor.filterName, filterConstructor.transform);\r\n}\r\nfunction addFullComponentGraphToModule(module, component) {\r\n    var definition = component.definition;\r\n    if (!definition) {\r\n        var componentConstructorName = functionsUtils.getConstructorName(component);\r\n        throw new Error(componentConstructorName + \" component was imported into \" + module.name + \" module but doesn't seem to have been @SeComponent or @SeDirective annotated\");\r\n    }\r\n    if (component.providers) {\r\n        addArrayOfProvidersToModule(module, component.providers);\r\n    }\r\n    var componentName = component.componentName;\r\n    var directivename = component.directiveName;\r\n    if (componentName) {\r\n        module.component(componentName, definition);\r\n        delete component.definition;\r\n        var entryComponents = component.entryComponents;\r\n        if (entryComponents) {\r\n            entryComponents.forEach(function (entryComponent) {\r\n                addFullComponentGraphToModule(module, entryComponent);\r\n            });\r\n        }\r\n        delete component.entryComponents;\r\n    }\r\n    else if (directivename) {\r\n        module.directive(directivename, function () { return definition; });\r\n    }\r\n}\r\n// For testing purposes.\r\nSeModule.getAngular = function () {\r\n    return angular;\r\n};\r\nfunction getAngular() {\r\n    return SeModule.getAngular();\r\n}\r\n//# sourceMappingURL=SeModule.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@types/angular@1.7.3/node_modules/@types/angular/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@types/lodash@4.14.159/node_modules/@types/lodash/ts3.1/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/di/DINameUtils.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/di/types.ts"],"map":"{\"version\":3,\"file\":\"SeModule.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/di/SeModule.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/di/SeModule.d.ts","writeByteOrderMark":false,"text":"import { SeModuleConstructor, SeModuleDefinition } from './types';\r\n/**\r\n * **Deprecated since 1905.**\r\n *\r\n * Class level typescript {@link http://www.typescriptlang.org/docs/handbook/decorators.html decorator factory}\r\n * used to declare a Smartedit module from a Dependency injection standpoint.\r\n *\r\n * To create a configurable module, create a static method returning an SeModuleWithProvider object. The module\r\n * can then be imported by a parent module returning the SeModuleWithProvider object from the static method.\r\n * @deprecated\r\n */\r\nexport declare const SeModule: (definition: SeModuleDefinition) => <T extends SeModuleConstructor>(moduleConstructor: T) => T;\r\n"}}
