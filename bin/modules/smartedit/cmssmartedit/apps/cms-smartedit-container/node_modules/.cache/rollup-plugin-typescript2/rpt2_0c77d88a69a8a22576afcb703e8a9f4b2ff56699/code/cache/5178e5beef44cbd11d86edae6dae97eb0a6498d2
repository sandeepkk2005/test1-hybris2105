{"code":"import { __awaiter, __decorate, __generator, __metadata } from \"tslib\";\r\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, Input } from '@angular/core';\r\nimport { IPermissionService, SeDowngradeComponent } from 'smarteditcommons';\r\nimport { ManagePageVersionService, RollbackPageVersionService, PageVersionSelectionService } from '../../../services';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"VersionItemMenuComponent\", {\r\n    selector: 'se-version-item-menu',\r\n    template: \"<se-popup-overlay class=\\\"se-version-item-menu__popup-anchor\\\" [ngClass]=\\\"{ 'se-version-item-menu__popup-anchor--open': isMenuOpen }\\\" [popupOverlay]=\\\"popupConfig\\\" [popupOverlayTrigger]=\\\"isMenuOpen\\\" (popupOverlayOnHide)=\\\"hideMenu()\\\"><div *ngIf=\\\"menuItems.length > 0\\\" (click)=\\\"onButtonClick($event)\\\" class=\\\"sap-icon--overflow se-version-item-menu__toggle\\\"></div><div se-popup-overlay-body class=\\\"se-version-item-menu fd-menu\\\"><div class=\\\"se-version-item-menu__item fd-menu__list\\\" *ngFor=\\\"let item of menuItems\\\" (click)=\\\"executeItemCallback(item)\\\"><span class=\\\"se-version-item-menu__item-link fd-menu__item\\\">{{ item.i18nKey | translate }}</span></div></div></se-popup-overlay>\",\r\n    styles: [\".se-version-item-menu{box-shadow:0 6px 12px rgba(0,0,0,.175);background-color:#fff;border-radius:4px!important;min-width:100px;width:fit-content;position:absolute;border:1px solid #d9d9d9;z-index:2000;top:96%;left:initial!important;right:0;transform:translate(5px,8px);right:-11px;top:-8px}.se-version-item-menu::before{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#d9d9d9;border-bottom-color:var(var(--fd-color-neutral-4));border-left-color:transparent;border-right-color:transparent;content:\\\"\\\";position:absolute;top:-8px}.se-version-item-menu::after{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#fff;border-bottom-color:var(var(--fd-color-background-4));border-left-color:transparent;border-right-color:transparent;content:\\\"\\\";position:absolute;top:-7px}.se-version-item-menu::after,.se-version-item-menu::before{right:10px}.se-version-item-menu::after,.se-version-item-menu::before{display:none}.se-version-item-menu__item:last-child .se-version-item-menu__item-link{color:#b00}.se-version-item-menu__popup-anchor{display:flex;flex-direction:row;align-items:center;justify-content:center;font-size:1.1428571429rem;line-height:1.25;font-weight:400}.se-version-item-menu__toggle{height:20px;width:20px;cursor:pointer}.sap-icon--overflow{color:#0a6ed1}\"],\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n});\r\nvar /* @ngInject */ VersionItemMenuComponent = /** @class */ (function () {\r\n    function /* @ngInject */ VersionItemMenuComponent(managePageVersionService, pageVersionSelectionService, rollbackPageVersionService, permissionService, cdr) {\r\n        this.managePageVersionService = managePageVersionService;\r\n        this.pageVersionSelectionService = pageVersionSelectionService;\r\n        this.rollbackPageVersionService = rollbackPageVersionService;\r\n        this.permissionService = permissionService;\r\n        this.cdr = cdr;\r\n        this.menuItems = [];\r\n        this.popupConfig = {\r\n            halign: 'left',\r\n            valign: 'bottom'\r\n        };\r\n        this.isMenuOpen = false;\r\n    }\r\n    /* @ngInject */ VersionItemMenuComponent.prototype.ngOnInit = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = this;\r\n                        return [4 /*yield*/, this.getPermittedButtons(this.getButtonsConfiguration())];\r\n                    case 1:\r\n                        _a.menuItems = _b.sent();\r\n                        this.cdr.detectChanges();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ VersionItemMenuComponent.prototype.onButtonClick = function (event) {\r\n        event.stopPropagation();\r\n        this.isMenuOpen = !this.isMenuOpen;\r\n    };\r\n    /* @ngInject */ VersionItemMenuComponent.prototype.hideMenu = function () {\r\n        this.isMenuOpen = false;\r\n    };\r\n    /* @ngInject */ VersionItemMenuComponent.prototype.executeItemCallback = function (menuItem) {\r\n        menuItem.callback(this.item);\r\n        this.hideMenu();\r\n    };\r\n    /* @ngInject */ VersionItemMenuComponent.prototype.getPermittedButtons = function (menuItemsConfig) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var buttonsPermissions, permissions;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        buttonsPermissions = menuItemsConfig.map(function (menuItem) {\r\n                            return _this.permissionService.isPermitted([\r\n                                {\r\n                                    names: menuItem.permissions\r\n                                }\r\n                            ]);\r\n                        });\r\n                        return [4 /*yield*/, Promise.all(buttonsPermissions)];\r\n                    case 1:\r\n                        permissions = _a.sent();\r\n                        return [2 /*return*/, menuItemsConfig.filter(function (_menuItem, index) { return permissions[index]; })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ VersionItemMenuComponent.prototype.getButtonsConfiguration = function () {\r\n        var _this = this;\r\n        return [\r\n            {\r\n                i18nKey: 'se.cms.version.item.menu.view.label',\r\n                callback: function (versionItem) { return _this.viewItemCallback(versionItem); },\r\n                permissions: ['se.version.page']\r\n            },\r\n            {\r\n                i18nKey: 'se.cms.version.item.menu.edit.label',\r\n                callback: function (versionItem) { return _this.editItemCallback(versionItem); },\r\n                permissions: ['se.edit.version.page']\r\n            },\r\n            {\r\n                i18nKey: 'se.cms.version.item.menu.rollback.label',\r\n                callback: function (versionItem) {\r\n                    return _this.rollbackItemCallback(versionItem);\r\n                },\r\n                permissions: ['se.rollback.version.page.versions.menu']\r\n            },\r\n            {\r\n                i18nKey: 'se.cms.version.item.menu.delete.label',\r\n                callback: function (versionItem) { return _this.deleteItemCallback(versionItem); },\r\n                permissions: ['se.delete.version.page']\r\n            }\r\n        ];\r\n    };\r\n    /* @ngInject */ VersionItemMenuComponent.prototype.deleteItemCallback = function (versionItem) {\r\n        this.managePageVersionService.deletePageVersion(versionItem.uid);\r\n    };\r\n    /* @ngInject */ VersionItemMenuComponent.prototype.editItemCallback = function (versionItem) {\r\n        this.managePageVersionService.editPageVersion(versionItem);\r\n    };\r\n    /* @ngInject */ VersionItemMenuComponent.prototype.viewItemCallback = function (versionItem) {\r\n        this.pageVersionSelectionService.selectPageVersion(versionItem);\r\n    };\r\n    /* @ngInject */ VersionItemMenuComponent.prototype.rollbackItemCallback = function (versionItem) {\r\n        this.rollbackPageVersionService.rollbackPageVersion(versionItem);\r\n    };\r\n    __decorate([\r\n        Input(),\r\n        __metadata(\"design:type\", Object)\r\n    ], /* @ngInject */ VersionItemMenuComponent.prototype, \"item\", void 0);\r\n    /* @ngInject */ VersionItemMenuComponent = __decorate([\r\n        SeDowngradeComponent(),\r\n        Component({\r\n            selector: 'se-version-item-menu',\r\n            template: \"<se-popup-overlay class=\\\"se-version-item-menu__popup-anchor\\\" [ngClass]=\\\"{ 'se-version-item-menu__popup-anchor--open': isMenuOpen }\\\" [popupOverlay]=\\\"popupConfig\\\" [popupOverlayTrigger]=\\\"isMenuOpen\\\" (popupOverlayOnHide)=\\\"hideMenu()\\\"><div *ngIf=\\\"menuItems.length > 0\\\" (click)=\\\"onButtonClick($event)\\\" class=\\\"sap-icon--overflow se-version-item-menu__toggle\\\"></div><div se-popup-overlay-body class=\\\"se-version-item-menu fd-menu\\\"><div class=\\\"se-version-item-menu__item fd-menu__list\\\" *ngFor=\\\"let item of menuItems\\\" (click)=\\\"executeItemCallback(item)\\\"><span class=\\\"se-version-item-menu__item-link fd-menu__item\\\">{{ item.i18nKey | translate }}</span></div></div></se-popup-overlay>\",\r\n            styles: [\".se-version-item-menu{box-shadow:0 6px 12px rgba(0,0,0,.175);background-color:#fff;border-radius:4px!important;min-width:100px;width:fit-content;position:absolute;border:1px solid #d9d9d9;z-index:2000;top:96%;left:initial!important;right:0;transform:translate(5px,8px);right:-11px;top:-8px}.se-version-item-menu::before{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#d9d9d9;border-bottom-color:var(var(--fd-color-neutral-4));border-left-color:transparent;border-right-color:transparent;content:\\\"\\\";position:absolute;top:-8px}.se-version-item-menu::after{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#fff;border-bottom-color:var(var(--fd-color-background-4));border-left-color:transparent;border-right-color:transparent;content:\\\"\\\";position:absolute;top:-7px}.se-version-item-menu::after,.se-version-item-menu::before{right:10px}.se-version-item-menu::after,.se-version-item-menu::before{display:none}.se-version-item-menu__item:last-child .se-version-item-menu__item-link{color:#b00}.se-version-item-menu__popup-anchor{display:flex;flex-direction:row;align-items:center;justify-content:center;font-size:1.1428571429rem;line-height:1.25;font-weight:400}.se-version-item-menu__toggle{height:20px;width:20px;cursor:pointer}.sap-icon--overflow{color:#0a6ed1}\"],\r\n            changeDetection: ChangeDetectionStrategy.OnPush\r\n        }),\r\n        __metadata(\"design:paramtypes\", [ManagePageVersionService,\r\n            PageVersionSelectionService,\r\n            RollbackPageVersionService,\r\n            IPermissionService,\r\n            ChangeDetectorRef])\r\n    ], /* @ngInject */ VersionItemMenuComponent);\r\n    return /* @ngInject */ VersionItemMenuComponent;\r\n}());\r\nexport { /* @ngInject */ VersionItemMenuComponent };\r\n//# sourceMappingURL=VersionItemMenuComponent.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/versioning/services/index.ts"],"map":"{\"version\":3,\"file\":\"VersionItemMenuComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../../../src/components/versioning/components/versionsPanel/versionItemMenu/VersionItemMenuComponent.ts\"],\"names\":[],\"mappings\":\";AACA,OAAO,EACH,uBAAuB,EACvB,iBAAiB,EACjB,SAAS,EACT,KAAK,EAER,MAAM,eAAe,CAAC;AACvB,OAAO,EAAE,kBAAkB,EAAsB,oBAAoB,EAAE,MAAM,kBAAkB,CAAC;AAEhG,OAAO,EACH,wBAAwB,EACxB,0BAA0B,EAC1B,2BAA2B,EAE9B,MAAM,mBAAmB,CAAC;kFAShB;IACP,QAAQ,EAAE,sBAAsB;IAChC,QAAQ,EAAE,2rBAAiqB;IAC3qB,MAAM,EAAE,CAAC,qzCAAizC,CAAC;IAC3zC,eAAe,EAAE,uBAAuB,CAAC,MAAM;CAClD;AACD;IAUI,kDACY,wBAAkD,EAClD,2BAAwD,EACxD,0BAAsD,EACtD,iBAAqC,EACrC,GAAsB;QAJtB,6BAAwB,GAAxB,wBAAwB,CAA0B;QAClD,gCAA2B,GAA3B,2BAA2B,CAA6B;QACxD,+BAA0B,GAA1B,0BAA0B,CAA4B;QACtD,sBAAiB,GAAjB,iBAAiB,CAAoB;QACrC,QAAG,GAAH,GAAG,CAAmB;QAZ3B,cAAS,GAAoB,EAAE,CAAC;QAChC,gBAAW,GAAuB;YACrC,MAAM,EAAE,MAAM;YACd,MAAM,EAAE,QAAQ;SACnB,CAAC;QACK,eAAU,GAAG,KAAK,CAAC;IAQvB,CAAC;IAEE,2DAAQ,GAAd;;;;;;wBACI,KAAA,IAAI,CAAA;wBAAa,qBAAM,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,uBAAuB,EAAE,CAAC,EAAA;;wBAA/E,GAAK,SAAS,GAAG,SAA8D,CAAC;wBAChF,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC;;;;;KAC5B;IAEM,gEAAa,GAApB,UAAqB,KAAiB;QAClC,KAAK,CAAC,eAAe,EAAE,CAAC;QAExB,IAAI,CAAC,UAAU,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC;IACvC,CAAC;IAEM,2DAAQ,GAAf;QACI,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;IAC5B,CAAC;IAEM,sEAAmB,GAA1B,UAA2B,QAAuB;QAC9C,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE7B,IAAI,CAAC,QAAQ,EAAE,CAAC;IACpB,CAAC;IAEa,sEAAmB,GAAjC,UAAkC,eAAgC;;;;;;;wBACxD,kBAAkB,GAAG,eAAe,CAAC,GAAG,CAAC,UAAC,QAAuB;4BACnE,OAAA,KAAI,CAAC,iBAAiB,CAAC,WAAW,CAAC;gCAC/B;oCACI,KAAK,EAAE,QAAQ,CAAC,WAAW;iCAC9B;6BACJ,CAAC;wBAJF,CAIE,CACL,CAAC;wBAEkB,qBAAM,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,EAAA;;wBAAnD,WAAW,GAAG,SAAqC;wBACzD,sBAAO,eAAe,CAAC,MAAM,CACzB,UAAC,SAAwB,EAAE,KAAa,IAAK,OAAA,WAAW,CAAC,KAAK,CAAC,EAAlB,CAAkB,CAClE,EAAC;;;;KACL;IAEO,0EAAuB,GAA/B;QAAA,iBAwBC;QAvBG,OAAO;YACH;gBACI,OAAO,EAAE,qCAAqC;gBAC9C,QAAQ,EAAE,UAAC,WAAyB,IAAW,OAAA,KAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,EAAlC,CAAkC;gBACjF,WAAW,EAAE,CAAC,iBAAiB,CAAC;aACnC;YACD;gBACI,OAAO,EAAE,qCAAqC;gBAC9C,QAAQ,EAAE,UAAC,WAAyB,IAAW,OAAA,KAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,EAAlC,CAAkC;gBACjF,WAAW,EAAE,CAAC,sBAAsB,CAAC;aACxC;YACD;gBACI,OAAO,EAAE,yCAAyC;gBAClD,QAAQ,EAAE,UAAC,WAAyB;oBAChC,OAAA,KAAI,CAAC,oBAAoB,CAAC,WAAW,CAAC;gBAAtC,CAAsC;gBAC1C,WAAW,EAAE,CAAC,wCAAwC,CAAC;aAC1D;YACD;gBACI,OAAO,EAAE,uCAAuC;gBAChD,QAAQ,EAAE,UAAC,WAAyB,IAAW,OAAA,KAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,EAApC,CAAoC;gBACnF,WAAW,EAAE,CAAC,wBAAwB,CAAC;aAC1C;SACJ,CAAC;IACN,CAAC;IAEO,qEAAkB,GAA1B,UAA2B,WAAyB;QAChD,IAAI,CAAC,wBAAwB,CAAC,iBAAiB,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;IACrE,CAAC;IAEO,mEAAgB,GAAxB,UAAyB,WAAyB;QAC9C,IAAI,CAAC,wBAAwB,CAAC,eAAe,CAAC,WAAW,CAAC,CAAC;IAC/D,CAAC;IAEO,mEAAgB,GAAxB,UAAyB,WAAyB;QAC9C,IAAI,CAAC,2BAA2B,CAAC,iBAAiB,CAAC,WAAW,CAAC,CAAC;IACpE,CAAC;IAEO,uEAAoB,GAA5B,UAA6B,WAAyB;QAClD,IAAI,CAAC,0BAA0B,CAAC,mBAAmB,CAAC,WAAW,CAAC,CAAC;IACrE,CAAC;IA7FQ;QAAR,KAAK,EAAE;;0EAAoB;IADhC;QAPC,oBAAoB,EAAE;QACtB,SAAS,CAAC;YACP,QAAQ,EAAE,sBAAsB;YAChC,QAAQ,EAAE,2rBAAiqB;YAC3qB,MAAM,EAAE,CAAC,qzCAAizC,CAAC;YAC3zC,eAAe,EAAE,uBAAuB,CAAC,MAAM;SAClD,CAAC;yCAYwC,wBAAwB;YACrB,2BAA2B;YAC5B,0BAA0B;YACnC,kBAAkB;YAChC,iBAAiB;gDAgFrC;IAAD,+CAAC;CAAA,AA/FD,IA+FC\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/components/versioning/components/versionsPanel/versionItemMenu/VersionItemMenuComponent.d.ts","writeByteOrderMark":false,"text":"import { ChangeDetectorRef, OnInit } from '@angular/core';\r\nimport { IPermissionService, PopupOverlayConfig } from 'smarteditcommons';\r\nimport { ManagePageVersionService, RollbackPageVersionService, PageVersionSelectionService, IPageVersion } from '../../../services';\r\ninterface IButtonConfig {\r\n    i18nKey: string;\r\n    permissions?: string[];\r\n    callback?(versionItem?: IPageVersion): void;\r\n}\r\nexport declare class VersionItemMenuComponent implements OnInit {\r\n    private managePageVersionService;\r\n    private pageVersionSelectionService;\r\n    private rollbackPageVersionService;\r\n    private permissionService;\r\n    private cdr;\r\n    item: IPageVersion;\r\n    menuItems: IButtonConfig[];\r\n    popupConfig: PopupOverlayConfig;\r\n    isMenuOpen: boolean;\r\n    constructor(managePageVersionService: ManagePageVersionService, pageVersionSelectionService: PageVersionSelectionService, rollbackPageVersionService: RollbackPageVersionService, permissionService: IPermissionService, cdr: ChangeDetectorRef);\r\n    ngOnInit(): Promise<void>;\r\n    onButtonClick(event: MouseEvent): void;\r\n    hideMenu(): void;\r\n    executeItemCallback(menuItem: IButtonConfig): void;\r\n    private getPermittedButtons;\r\n    private getButtonsConfiguration;\r\n    private deleteItemCallback;\r\n    private editItemCallback;\r\n    private viewItemCallback;\r\n    private rollbackItemCallback;\r\n}\r\nexport {};\r\n"}}
