{"code":"import { __awaiter, __decorate, __generator, __metadata, __param } from \"tslib\";\r\n/*\r\n * Copyright (c) 2021 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { Component, Inject } from '@angular/core';\r\nimport { ISyncPollingService } from 'cmscommons';\r\nimport { merge, cloneDeep } from 'lodash';\r\nimport { GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT, IAlertService, IConfirmationModalService, IExperienceService, ISharedDataService, SeDowngradeComponent, SystemEventService, WizardService, WIZARD_MANAGER, EXPERIENCE_STORAGE_KEY } from 'smarteditcommons';\r\nimport { PageFacade } from '../../../facades';\r\nimport { ClonePageAlertService } from '../../../services/actionableAlert/ClonePageAlertService';\r\nimport { RestrictionTypesService } from '../../../services/pageRestrictions/RestrictionTypesService';\r\nimport { RestrictionsStepHandlerFactory } from '../../../services/pages/RestrictionsStepHandlerFactory';\r\nimport { RestrictionsService } from '../../../services/RestrictionsService';\r\nimport { ClonePageBuilderFactory } from './ClonePageBuilderFactory';\r\nimport { ClonePageInfoStepComponent, ClonePageOptionsStepComponent, ClonePageRestrictionsStepComponent } from './wizardSteps';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"ClonePageWizardComponent\", {\r\n    selector: 'se-clone-page-wizard',\r\n    template: ''\r\n});\r\nvar /* @ngInject */ ClonePageWizardComponent = /** @class */ (function () {\r\n    function /* @ngInject */ ClonePageWizardComponent(wizardManager, clonePageBuilderFactory, restrictionsStepHandlerFactory, experienceService, confirmationModalService, systemEventService, restrictionTypesService, restrictionsService, sharedDataService, clonePageAlertService, alertService, pageFacade, syncPollingService) {\r\n        var _this = this;\r\n        this.wizardManager = wizardManager;\r\n        this.clonePageBuilderFactory = clonePageBuilderFactory;\r\n        this.restrictionsStepHandlerFactory = restrictionsStepHandlerFactory;\r\n        this.experienceService = experienceService;\r\n        this.confirmationModalService = confirmationModalService;\r\n        this.systemEventService = systemEventService;\r\n        this.restrictionTypesService = restrictionTypesService;\r\n        this.restrictionsService = restrictionsService;\r\n        this.sharedDataService = sharedDataService;\r\n        this.clonePageAlertService = clonePageAlertService;\r\n        this.alertService = alertService;\r\n        this.pageFacade = pageFacade;\r\n        this.syncPollingService = syncPollingService;\r\n        // Enumerable methods\r\n        // This way of defining method creates a public field in class instead of prototype method\r\n        // which allows then to be reassigned/extended in ModalWizardTemplateComponent#assignAngularController\r\n        this.getWizardConfig = function () { return ({\r\n            isFormValid: function (stepId) { return _this.isFormValid(stepId); },\r\n            onNext: function () { return _this.onNext(); },\r\n            onDone: function () { return _this.onDone(); },\r\n            onCancel: function () { return _this.onCancel(); },\r\n            steps: [\r\n                {\r\n                    id: _this.CLONE_PAGE_WIZARD_STEPS.PAGE_CLONE_OPTIONS,\r\n                    name: 'se.cms.clonepagewizard.pagecloneoptions.tabname',\r\n                    title: 'se.cms.clonepagewizard.pageclone.title',\r\n                    component: ClonePageOptionsStepComponent\r\n                },\r\n                {\r\n                    id: _this.CLONE_PAGE_WIZARD_STEPS.PAGE_INFO,\r\n                    name: 'se.cms.clonepagewizard.pageinfo.tabname',\r\n                    title: 'se.cms.clonepagewizard.pageclone.title',\r\n                    component: ClonePageInfoStepComponent\r\n                }\r\n            ]\r\n        }); };\r\n        this.getRestrictionTypes = function () {\r\n            return _this.restrictionTypesService.getRestrictionTypesByPageType(_this.getPageTypeCode());\r\n        };\r\n        this.getSupportedRestrictionTypes = function () {\r\n            return _this.restrictionsService.getSupportedRestrictionTypeCodes();\r\n        };\r\n        this.variationResult = function (displayConditionResult) {\r\n            _this.infoChanged = true;\r\n            _this.pageBuilder.displayConditionSelected(displayConditionResult);\r\n        };\r\n        this.basePageUUID = this.wizardManager.properties.basePageUUID;\r\n        this.callbacks = {};\r\n        this.uriContext = this.wizardManager.properties.uriContext;\r\n        this.restrictionStepProperties = {\r\n            id: 'restrictionsStepId',\r\n            name: 'se.cms.restrictions.editor.tab',\r\n            title: 'se.cms.clonepagewizard.pageclone.title',\r\n            component: ClonePageRestrictionsStepComponent\r\n        };\r\n        // bound in the view for restrictions step\r\n        var restrictionsEditorFunctionBindingsClosure = {};\r\n        this.restrictionsEditorFunctionBindings = restrictionsEditorFunctionBindingsClosure;\r\n        this.cloneInProgress = false;\r\n        this.infoChanged = true;\r\n        this.typeChanged = true;\r\n        this.restrictionsStepHandler = this.restrictionsStepHandlerFactory.createRestrictionsStepHandler(this.wizardManager, this.restrictionsEditorFunctionBindings, this.restrictionStepProperties);\r\n        this.pageBuilder = this.clonePageBuilderFactory.createClonePageBuilder(this.restrictionsStepHandler, this.basePageUUID, this.uriContext);\r\n        this.pageBuilder.init();\r\n        this.CLONE_PAGE_WIZARD_STEPS = {\r\n            PAGE_CLONE_OPTIONS: 'cloneOptions',\r\n            PAGE_INFO: 'pageInfo',\r\n            PAGE_RESTRICTIONS: this.restrictionStepProperties.id\r\n        };\r\n    }\r\n    // Class Methods\r\n    /* @ngInject */ ClonePageWizardComponent.prototype.getPageTypeCode = function () {\r\n        return this.pageBuilder.getPageTypeCode();\r\n    };\r\n    /* @ngInject */ ClonePageWizardComponent.prototype.getPageLabel = function () {\r\n        return this.pageBuilder.getPageLabel();\r\n    };\r\n    /* @ngInject */ ClonePageWizardComponent.prototype.getBasePageUuid = function () {\r\n        return this.pageBuilder.getBasePageUuid();\r\n    };\r\n    /* @ngInject */ ClonePageWizardComponent.prototype.getPageTemplate = function () {\r\n        return this.pageBuilder.getPageTemplate();\r\n    };\r\n    /* @ngInject */ ClonePageWizardComponent.prototype.getPageInfo = function () {\r\n        var page = this.pageBuilder.getPageInfo();\r\n        page.uriContext = this.uriContext;\r\n        return page;\r\n    };\r\n    /* @ngInject */ ClonePageWizardComponent.prototype.getBasePageInfo = function () {\r\n        var page = this.pageBuilder.getBasePageInfo();\r\n        page.uriContext = this.uriContext;\r\n        return page;\r\n    };\r\n    /* @ngInject */ ClonePageWizardComponent.prototype.getPageRestrictions = function () {\r\n        return this.pageBuilder.getPageRestrictions();\r\n    };\r\n    /* @ngInject */ ClonePageWizardComponent.prototype.onTargetCatalogVersionSelected = function (catalogVersion) {\r\n        this.pageBuilder.onTargetCatalogVersionSelected(catalogVersion);\r\n    };\r\n    /* @ngInject */ ClonePageWizardComponent.prototype.triggerUpdateCloneOptionResult = function (cloneOptionResult) {\r\n        this.pageBuilder.componentCloneOptionSelected(cloneOptionResult);\r\n    };\r\n    /* @ngInject */ ClonePageWizardComponent.prototype.getPageInfoStructure = function () {\r\n        return this.pageBuilder.getPageInfoStructure();\r\n    };\r\n    /* @ngInject */ ClonePageWizardComponent.prototype.restrictionsResult = function (data) {\r\n        this.pageBuilder.restrictionsSelected(data.onlyOneRestrictionMustApply, data.restrictionUuids);\r\n    };\r\n    /* @ngInject */ ClonePageWizardComponent.prototype.isRestrictionsActive = function () {\r\n        if (!this.typeChanged ||\r\n            this.wizardManager.getCurrentStepId() === this.CLONE_PAGE_WIZARD_STEPS.PAGE_RESTRICTIONS) {\r\n            this.typeChanged = false;\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    /* @ngInject */ ClonePageWizardComponent.prototype.isPageInfoActive = function () {\r\n        if (!this.infoChanged ||\r\n            this.wizardManager.getCurrentStepId() === this.CLONE_PAGE_WIZARD_STEPS.PAGE_INFO) {\r\n            this.infoChanged = false;\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    /* @ngInject */ ClonePageWizardComponent.prototype.getTargetCatalogVersion = function () {\r\n        return this.pageBuilder.getTargetCatalogVersion();\r\n    };\r\n    /* @ngInject */ ClonePageWizardComponent.prototype.isBasePageInfoAvailable = function () {\r\n        return this.pageBuilder.isBasePageInfoAvailable();\r\n    };\r\n    /* @ngInject */ ClonePageWizardComponent.prototype.onCancel = function () {\r\n        return this.confirmationModalService.confirm({\r\n            description: 'se.editor.cancel.confirm'\r\n        });\r\n    };\r\n    /* @ngInject */ ClonePageWizardComponent.prototype.isFormValid = function (stepId) {\r\n        switch (stepId) {\r\n            case this.CLONE_PAGE_WIZARD_STEPS.PAGE_CLONE_OPTIONS:\r\n                // This step has no required inputs. However we set the valid status as soon as the data is fetched\r\n                // to avoid modal NEXT button enabled status to be true before content is actually loaded.\r\n                return this.isBasePageInfoAvailable();\r\n            case this.CLONE_PAGE_WIZARD_STEPS.PAGE_INFO:\r\n                return (!this.cloneInProgress &&\r\n                    !!this.callbacks.isValidPageInfo &&\r\n                    this.callbacks.isValidPageInfo());\r\n            case this.CLONE_PAGE_WIZARD_STEPS.PAGE_RESTRICTIONS:\r\n                return !this.cloneInProgress && this.pageBuilder.getPageRestrictions().length > 0;\r\n        }\r\n        return false;\r\n    };\r\n    /* @ngInject */ ClonePageWizardComponent.prototype.onNext = function () {\r\n        return true;\r\n    };\r\n    /* @ngInject */ ClonePageWizardComponent.prototype.onDone = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var page, payload, experience, _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        this.cloneInProgress = true;\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        _b.trys.push([1, 5, , 6]);\r\n                        return [4 /*yield*/, this.callbacks.savePageInfo()];\r\n                    case 2:\r\n                        page = _b.sent();\r\n                        payload = this.preparePagePayload(page);\r\n                        if (this.pageBuilder.getTargetCatalogVersion()) {\r\n                            payload.siteId = this.pageBuilder.getTargetCatalogVersion().siteId;\r\n                            payload.catalogId = this.pageBuilder.getTargetCatalogVersion().catalogId;\r\n                            payload.version = this.pageBuilder.getTargetCatalogVersion().version;\r\n                        }\r\n                        return [4 /*yield*/, this.sharedDataService.get(EXPERIENCE_STORAGE_KEY)];\r\n                    case 3:\r\n                        experience = (_b.sent());\r\n                        return [4 /*yield*/, this.createPage(payload, experience)];\r\n                    case 4:\r\n                        _b.sent();\r\n                        return [3 /*break*/, 6];\r\n                    case 5:\r\n                        _a = _b.sent();\r\n                        // re-enable the button\r\n                        this.cloneInProgress = false;\r\n                        // prevent closing modal when there's an error\r\n                        return [2 /*return*/, Promise.reject()];\r\n                    case 6: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ ClonePageWizardComponent.prototype.createPage = function (payload, experience) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response, exception_1, errors;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 2, , 3]);\r\n                        return [4 /*yield*/, this.pageFacade.createPageForSite(payload, payload.siteId)];\r\n                    case 1:\r\n                        response = _a.sent();\r\n                        this.syncPollingService.getSyncStatus(payload.pageUuid, this.uriContext, true);\r\n                        if (experience.catalogDescriptor.catalogVersionUuid === response.catalogVersion) {\r\n                            this.experienceService.loadExperience({\r\n                                siteId: payload.siteId,\r\n                                catalogId: payload.catalogId,\r\n                                catalogVersion: payload.version,\r\n                                pageId: response.uid\r\n                            });\r\n                        }\r\n                        else {\r\n                            this.clonePageAlertService.displayClonePageAlert(response);\r\n                        }\r\n                        return [2 /*return*/, this.alertService.showSuccess({\r\n                                message: 'se.cms.clonepage.alert.success'\r\n                            })];\r\n                    case 2:\r\n                        exception_1 = _a.sent();\r\n                        this.cloneInProgress = false; // re-enable the button\r\n                        this.systemEventService.publishAsync(GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT, {\r\n                            messages: exception_1.error.errors\r\n                        });\r\n                        errors = exception_1.error.errors;\r\n                        if (!errors.find(function (error) { return error.subject.indexOf('restrictions') === 0; })) {\r\n                            this.wizardManager.goToStepWithId(this.CLONE_PAGE_WIZARD_STEPS.PAGE_INFO);\r\n                        }\r\n                        return [2 /*return*/, Promise.reject()];\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ ClonePageWizardComponent.prototype.preparePagePayload = function (page) {\r\n        var newClonePage = cloneDeep(page);\r\n        // set page info properties\r\n        merge(newClonePage, this.pageBuilder.getPageProperties());\r\n        // set clone option\r\n        newClonePage.cloneComponents = this.pageBuilder.getComponentCloneOption() === 'clone';\r\n        newClonePage.itemtype = page.typeCode;\r\n        if (this.isRestrictionsActive()) {\r\n            // set restrictions\r\n            newClonePage.restrictions = this.pageBuilder.getPageRestrictions();\r\n        }\r\n        return newClonePage;\r\n    };\r\n    /* @ngInject */ ClonePageWizardComponent = __decorate([\r\n        SeDowngradeComponent(),\r\n        Component({\r\n            selector: 'se-clone-page-wizard',\r\n            template: ''\r\n        }),\r\n        __param(0, Inject(WIZARD_MANAGER)),\r\n        __metadata(\"design:paramtypes\", [WizardService,\r\n            ClonePageBuilderFactory,\r\n            RestrictionsStepHandlerFactory,\r\n            IExperienceService,\r\n            IConfirmationModalService,\r\n            SystemEventService,\r\n            RestrictionTypesService,\r\n            RestrictionsService,\r\n            ISharedDataService,\r\n            ClonePageAlertService,\r\n            IAlertService,\r\n            PageFacade,\r\n            ISyncPollingService])\r\n    ], /* @ngInject */ ClonePageWizardComponent);\r\n    return /* @ngInject */ ClonePageWizardComponent;\r\n}());\r\nexport { /* @ngInject */ ClonePageWizardComponent };\r\n//# sourceMappingURL=ClonePageWizardComponent.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@types/lodash@4.14.159/node_modules/@types/lodash/ts3.1/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/dao/RestrictionTypesRestService.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/facades/index.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/actionableAlert/ClonePageAlertService.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/pageRestrictions/RestrictionTypesService.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/pages/RestrictionsStepHandlerFactory.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/pages/types.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/RestrictionsService.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/pages/pageWizard/index.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/pages/clonePageWizard/ClonePageBuilderFactory.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/pages/clonePageWizard/wizardSteps/index.ts"],"map":"{\"version\":3,\"file\":\"ClonePageWizardComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/components/pages/clonePageWizard/ClonePageWizardComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/components/pages/clonePageWizard/ClonePageWizardComponent.d.ts","writeByteOrderMark":false,"text":"import { CMSPageTypes, ICMSPage, ISyncPollingService } from 'cmscommons';\r\nimport { GenericEditorStructure, IAlertService, ICatalogVersion, IConfirmationModalService, IExperienceService, ISharedDataService, IUriContext, SystemEventService, WizardConfig, WizardService, WizardStep } from 'smarteditcommons';\r\nimport { IRestrictionType } from '../../../dao/RestrictionTypesRestService';\r\nimport { PageFacade } from '../../../facades';\r\nimport { ClonePageAlertService } from '../../../services/actionableAlert/ClonePageAlertService';\r\nimport { RestrictionTypesService } from '../../../services/pageRestrictions/RestrictionTypesService';\r\nimport { RestrictionsStepHandlerFactory } from '../../../services/pages/RestrictionsStepHandlerFactory';\r\nimport { RestrictionsEditorFunctionBindings } from '../../../services/pages/types';\r\nimport { RestrictionsService } from '../../../services/RestrictionsService';\r\nimport { RestrictionsDTO, WizardCallbacks, WizardStepApi } from '../pageWizard';\r\nimport { ClonePageBuilderFactory } from './ClonePageBuilderFactory';\r\nexport declare class ClonePageWizardComponent implements WizardStepApi {\r\n    private wizardManager;\r\n    private clonePageBuilderFactory;\r\n    private restrictionsStepHandlerFactory;\r\n    private experienceService;\r\n    private confirmationModalService;\r\n    private systemEventService;\r\n    private restrictionTypesService;\r\n    private restrictionsService;\r\n    private sharedDataService;\r\n    private clonePageAlertService;\r\n    private alertService;\r\n    private pageFacade;\r\n    private syncPollingService;\r\n    uriContext: IUriContext;\r\n    callbacks: WizardCallbacks;\r\n    basePageUUID: string;\r\n    restrictionStepProperties: WizardStep;\r\n    restrictionsEditorFunctionBindings: RestrictionsEditorFunctionBindings;\r\n    typeChanged: boolean;\r\n    infoChanged: boolean;\r\n    private cloneInProgress;\r\n    private restrictionsStepHandler;\r\n    private pageBuilder;\r\n    private readonly CLONE_PAGE_WIZARD_STEPS;\r\n    constructor(wizardManager: WizardService, clonePageBuilderFactory: ClonePageBuilderFactory, restrictionsStepHandlerFactory: RestrictionsStepHandlerFactory, experienceService: IExperienceService, confirmationModalService: IConfirmationModalService, systemEventService: SystemEventService, restrictionTypesService: RestrictionTypesService, restrictionsService: RestrictionsService, sharedDataService: ISharedDataService, clonePageAlertService: ClonePageAlertService, alertService: IAlertService, pageFacade: PageFacade, syncPollingService: ISyncPollingService);\r\n    getWizardConfig: () => WizardConfig;\r\n    getRestrictionTypes: () => Promise<IRestrictionType[]>;\r\n    getSupportedRestrictionTypes: () => Promise<string[]>;\r\n    variationResult: (displayConditionResult: ICMSPage) => void;\r\n    getPageTypeCode(): CMSPageTypes;\r\n    getPageLabel(): string;\r\n    getBasePageUuid(): string;\r\n    getPageTemplate(): string;\r\n    getPageInfo(): ICMSPage;\r\n    getBasePageInfo(): ICMSPage;\r\n    getPageRestrictions(): string[];\r\n    onTargetCatalogVersionSelected(catalogVersion: ICatalogVersion): void;\r\n    triggerUpdateCloneOptionResult(cloneOptionResult: string): void;\r\n    getPageInfoStructure(): GenericEditorStructure;\r\n    restrictionsResult(data: RestrictionsDTO): void;\r\n    isRestrictionsActive(): boolean;\r\n    isPageInfoActive(): boolean;\r\n    getTargetCatalogVersion(): ICatalogVersion;\r\n    isBasePageInfoAvailable(): boolean;\r\n    onCancel(): Promise<any>;\r\n    isFormValid(stepId: string): boolean;\r\n    onNext(): boolean;\r\n    onDone(): Promise<any>;\r\n    private createPage;\r\n    private preparePagePayload;\r\n}\r\n"}}
