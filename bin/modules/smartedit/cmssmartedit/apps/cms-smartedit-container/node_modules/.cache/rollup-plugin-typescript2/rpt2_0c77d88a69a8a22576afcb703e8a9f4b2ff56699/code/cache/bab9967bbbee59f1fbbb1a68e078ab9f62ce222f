{"code":"import { __awaiter, __decorate, __generator, __metadata } from \"tslib\";\r\nimport { Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { cmsitemsUri } from 'cmscommons';\r\nimport { SeDowngradeComponent, URIBuilder } from 'smarteditcommons';\r\nimport { RestrictionsService } from '../../../../services/RestrictionsService';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"RestrictionManagementEditComponent\", {\r\n    selector: 'se-restriction-management-edit',\r\n    template: \"<div *ngIf=\\\"ready\\\"><div *ngIf=\\\"isTypeSupported\\\"><div class=\\\"se-restriction-management-edit__header\\\"><div>{{ restriction.name }}</div><div>{{ restriction.typeCode }}</div></div><div><se-item-manager [item]=\\\"restriction\\\" [mode]=\\\"itemManagementMode\\\" [structureApi]=\\\"structureApi\\\" [contentApi]=\\\"contentApi\\\" [uriContext]=\\\"uriContext\\\" [componentType]=\\\"restriction.itemtype\\\" [(submitFunction)]=\\\"submitInternal\\\" [(isDirty)]=\\\"isDirtyInternal\\\"></se-item-manager></div></div><div *ngIf=\\\"!isTypeSupported\\\"><div class=\\\"se-restrictions-list__item-content\\\"><div translate=\\\"se.cms.restriction.management.select.type.not.supported.warning\\\"></div><p class=\\\"se-restriction__item-name\\\">{{ restriction.name }}</p><div class=\\\"se-restriction__item-description\\\">{{ restriction.description }}</div></div></div></div>\",\r\n    styles: [\".se-restriction-management-edit__header{margin-bottom:16px}\", \"#restrictions-label{display:none}.se-restriction__select{text-transform:capitalize;width:100%}.se-restrictions-list__item-content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;cursor:default;flex-grow:1}#userGroups-selector .se-generic-editor-multiple-dropdown__match li[draggable=true]{display:flex;flex-direction:row;align-items:center;justify-content:center;display:inline-flex!important;border:1px solid #d9d9d9;margin:4px 0 4px 8px;padding:4px 8px;border-radius:4px;background-color:var(--fd-token-background-color);color:#51555a;min-height:28px}\"]\r\n});\r\nvar /* @ngInject */ RestrictionManagementEditComponent = /** @class */ (function () {\r\n    function /* @ngInject */ RestrictionManagementEditComponent(restrictionsService) {\r\n        this.restrictionsService = restrictionsService;\r\n        this.isDirtyFnChange = new EventEmitter();\r\n        this.submitFnChange = new EventEmitter();\r\n        this.ready = false;\r\n        this.itemManagementMode = 'edit';\r\n        this.structureApi = this.restrictionsService.getStructureApiUri(this.itemManagementMode);\r\n    }\r\n    /* @ngInject */ RestrictionManagementEditComponent.prototype.ngOnInit = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var dryRunCmsItemsUri, supportedTypes;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        dryRunCmsItemsUri = cmsitemsUri + '/:identifier';\r\n                        this.restriction = this.restriction || {};\r\n                        this.contentApi = new URIBuilder(dryRunCmsItemsUri).replaceParams(this.uriContext).build();\r\n                        if (!(typeof this.getSupportedRestrictionTypes !== 'undefined')) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.getSupportedRestrictionTypes()];\r\n                    case 1:\r\n                        supportedTypes = _a.sent();\r\n                        this.emitActions(supportedTypes.includes(this.restriction.itemtype));\r\n                        return [3 /*break*/, 3];\r\n                    case 2: return [2 /*return*/, this.emitActions(true)];\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ RestrictionManagementEditComponent.prototype.emitActions = function (isRestrictionTypeSupported) {\r\n        var _this = this;\r\n        this.isTypeSupported = isRestrictionTypeSupported;\r\n        if (isRestrictionTypeSupported) {\r\n            this.submitFnChange.emit(function () {\r\n                return _this.submitInternal().then(function (itemResponse) { return Promise.resolve(itemResponse); });\r\n            });\r\n            this.isDirtyFnChange.emit(function () { return _this.isDirtyLocal(); });\r\n        }\r\n        else {\r\n            this.submitFnChange.emit(function () { return Promise.resolve(null); });\r\n            this.isDirtyFnChange.emit(function () { return false; });\r\n        }\r\n        this.ready = true;\r\n    };\r\n    /* @ngInject */ RestrictionManagementEditComponent.prototype.isDirtyLocal = function () {\r\n        if (this.isDirtyInternal) {\r\n            return this.isDirtyInternal();\r\n        }\r\n        return false;\r\n    };\r\n    __decorate([\r\n        Input(),\r\n        __metadata(\"design:type\", Object)\r\n    ], /* @ngInject */ RestrictionManagementEditComponent.prototype, \"restriction\", void 0);\r\n    __decorate([\r\n        Input(),\r\n        __metadata(\"design:type\", Function)\r\n    ], /* @ngInject */ RestrictionManagementEditComponent.prototype, \"getSupportedRestrictionTypes\", void 0);\r\n    __decorate([\r\n        Input(),\r\n        __metadata(\"design:type\", Object)\r\n    ], /* @ngInject */ RestrictionManagementEditComponent.prototype, \"uriContext\", void 0);\r\n    __decorate([\r\n        Input(),\r\n        __metadata(\"design:type\", Function)\r\n    ], /* @ngInject */ RestrictionManagementEditComponent.prototype, \"isDirtyFn\", void 0);\r\n    __decorate([\r\n        Input(),\r\n        __metadata(\"design:type\", Function)\r\n    ], /* @ngInject */ RestrictionManagementEditComponent.prototype, \"submitFn\", void 0);\r\n    __decorate([\r\n        Output(),\r\n        __metadata(\"design:type\", EventEmitter)\r\n    ], /* @ngInject */ RestrictionManagementEditComponent.prototype, \"isDirtyFnChange\", void 0);\r\n    __decorate([\r\n        Output(),\r\n        __metadata(\"design:type\", EventEmitter)\r\n    ], /* @ngInject */ RestrictionManagementEditComponent.prototype, \"submitFnChange\", void 0);\r\n    /* @ngInject */ RestrictionManagementEditComponent = __decorate([\r\n        SeDowngradeComponent(),\r\n        Component({\r\n            selector: 'se-restriction-management-edit',\r\n            template: \"<div *ngIf=\\\"ready\\\"><div *ngIf=\\\"isTypeSupported\\\"><div class=\\\"se-restriction-management-edit__header\\\"><div>{{ restriction.name }}</div><div>{{ restriction.typeCode }}</div></div><div><se-item-manager [item]=\\\"restriction\\\" [mode]=\\\"itemManagementMode\\\" [structureApi]=\\\"structureApi\\\" [contentApi]=\\\"contentApi\\\" [uriContext]=\\\"uriContext\\\" [componentType]=\\\"restriction.itemtype\\\" [(submitFunction)]=\\\"submitInternal\\\" [(isDirty)]=\\\"isDirtyInternal\\\"></se-item-manager></div></div><div *ngIf=\\\"!isTypeSupported\\\"><div class=\\\"se-restrictions-list__item-content\\\"><div translate=\\\"se.cms.restriction.management.select.type.not.supported.warning\\\"></div><p class=\\\"se-restriction__item-name\\\">{{ restriction.name }}</p><div class=\\\"se-restriction__item-description\\\">{{ restriction.description }}</div></div></div></div>\",\r\n            styles: [\".se-restriction-management-edit__header{margin-bottom:16px}\", \"#restrictions-label{display:none}.se-restriction__select{text-transform:capitalize;width:100%}.se-restrictions-list__item-content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;cursor:default;flex-grow:1}#userGroups-selector .se-generic-editor-multiple-dropdown__match li[draggable=true]{display:flex;flex-direction:row;align-items:center;justify-content:center;display:inline-flex!important;border:1px solid #d9d9d9;margin:4px 0 4px 8px;padding:4px 8px;border-radius:4px;background-color:var(--fd-token-background-color);color:#51555a;min-height:28px}\"]\r\n        }),\r\n        __metadata(\"design:paramtypes\", [RestrictionsService])\r\n    ], /* @ngInject */ RestrictionManagementEditComponent);\r\n    return /* @ngInject */ RestrictionManagementEditComponent;\r\n}());\r\nexport { /* @ngInject */ RestrictionManagementEditComponent };\r\n//# sourceMappingURL=RestrictionManagementEditComponent.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/RestrictionsService.ts"],"map":"{\"version\":3,\"file\":\"RestrictionManagementEditComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../../src/components/restrictions/components/restrictionManagementEdit/RestrictionManagementEditComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/components/restrictions/components/restrictionManagementEdit/RestrictionManagementEditComponent.d.ts","writeByteOrderMark":false,"text":"import { EventEmitter, OnInit } from '@angular/core';\r\nimport { CMSItem } from 'cmscommons';\r\nimport { IUriContext } from 'smarteditcommons';\r\nimport { RestrictionsService } from '../../../../services/RestrictionsService';\r\nexport declare class RestrictionManagementEditComponent implements OnInit {\r\n    private restrictionsService;\r\n    restriction: CMSItem;\r\n    getSupportedRestrictionTypes: () => Promise<string[]>;\r\n    uriContext: IUriContext;\r\n    isDirtyFn: () => boolean;\r\n    submitFn: () => Promise<CMSItem>;\r\n    isDirtyFnChange: EventEmitter<() => boolean>;\r\n    submitFnChange: EventEmitter<() => Promise<CMSItem>>;\r\n    submitInternal: () => Promise<CMSItem>;\r\n    isDirtyInternal: () => boolean;\r\n    ready: boolean;\r\n    itemManagementMode: string;\r\n    contentApi: string;\r\n    structureApi: string;\r\n    isTypeSupported: boolean;\r\n    constructor(restrictionsService: RestrictionsService);\r\n    ngOnInit(): Promise<void>;\r\n    private emitActions;\r\n    private isDirtyLocal;\r\n}\r\n"}}
