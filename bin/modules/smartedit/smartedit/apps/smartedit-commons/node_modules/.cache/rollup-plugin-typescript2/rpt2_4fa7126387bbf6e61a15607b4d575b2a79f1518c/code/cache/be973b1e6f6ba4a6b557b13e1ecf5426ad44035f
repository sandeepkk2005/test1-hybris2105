{"code":"import { __awaiter, __decorate, __generator, __metadata } from \"tslib\";\r\nimport { Component } from '@angular/core';\r\nimport { DynamicForm, DynamicInput, FormGrouping, ISessionService } from '@smart/utils';\r\nimport { VALIDATION_MESSAGE_TYPES } from '../../../utils';\r\nimport { GenericEditorFieldWrapperComponent } from './GenericEditorFieldWrapperComponent';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"LocalizedElementComponent\", {\r\n    selector: 'se-localized-element',\r\n    styles: [\r\n        \"\\n            :host {\\n                display: block;\\n            }\\n        \"\r\n    ],\r\n    template: \"<se-tabs *ngIf=\\\"tabs\\\" class=\\\"multi-tabs-editor\\\" [model]=\\\"form\\\" [tabsList]=\\\"tabs\\\" [numTabsDisplayed]=\\\"6\\\"></se-tabs>\"\r\n});\r\nvar LocalizedElementComponent = /** @class */ (function () {\r\n    function LocalizedElementComponent(sessionService) {\r\n        this.sessionService = sessionService;\r\n    }\r\n    LocalizedElementComponent.prototype.onDynamicInputChange = function () {\r\n        this._createLocalizedTabs();\r\n    };\r\n    LocalizedElementComponent.prototype.ngDoCheck = function () {\r\n        if (this.tabs && this.field.messages !== this._previousMessages) {\r\n            this._previousMessages = this.field.messages;\r\n            var messageMap_1 = this.field.messages\r\n                ? this.field.messages\r\n                    .filter(function (message) {\r\n                    return message.type === VALIDATION_MESSAGE_TYPES.VALIDATION_ERROR;\r\n                })\r\n                    .reduce(function (holder, next) {\r\n                    holder[next.language] = true;\r\n                    return holder;\r\n                }, {})\r\n                : {};\r\n            this.tabs.forEach(function (tab) {\r\n                var message = messageMap_1[tab.id];\r\n                tab.hasErrors = message !== undefined ? message : false;\r\n            });\r\n        }\r\n    };\r\n    LocalizedElementComponent.prototype._createLocalizedTabs = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, readableLanguages, writeableLanguages, readableSet, writeable;\r\n            var _this = this;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        this.field.isLanguageEnabledMap = {};\r\n                        return [4 /*yield*/, this.sessionService.getCurrentUser()];\r\n                    case 1:\r\n                        _a = _b.sent(), readableLanguages = _a.readableLanguages, writeableLanguages = _a.writeableLanguages;\r\n                        readableSet = new Set(readableLanguages);\r\n                        writeable = new Set(writeableLanguages);\r\n                        this.tabs = this.languages\r\n                            .filter(function (language) { return readableSet.has(language.isocode); })\r\n                            .map(function (_a) {\r\n                            var isocode = _a.isocode, required = _a.required;\r\n                            _this.field.isLanguageEnabledMap[isocode] = writeable.has(isocode);\r\n                            var title = \"\" + isocode.toUpperCase() + (_this.field.editable && required ? '*' : '');\r\n                            return {\r\n                                id: isocode,\r\n                                title: title,\r\n                                component: GenericEditorFieldWrapperComponent\r\n                            };\r\n                        });\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    __decorate([\r\n        DynamicForm(),\r\n        __metadata(\"design:type\", FormGrouping)\r\n    ], LocalizedElementComponent.prototype, \"form\", void 0);\r\n    __decorate([\r\n        DynamicInput(),\r\n        __metadata(\"design:type\", Object)\r\n    ], LocalizedElementComponent.prototype, \"field\", void 0);\r\n    __decorate([\r\n        DynamicInput(),\r\n        __metadata(\"design:type\", Object)\r\n    ], LocalizedElementComponent.prototype, \"component\", void 0);\r\n    __decorate([\r\n        DynamicInput(),\r\n        __metadata(\"design:type\", Array)\r\n    ], LocalizedElementComponent.prototype, \"languages\", void 0);\r\n    LocalizedElementComponent = __decorate([\r\n        Component({\r\n            selector: 'se-localized-element',\r\n            styles: [\r\n                \"\\n            :host {\\n                display: block;\\n            }\\n        \"\r\n            ],\r\n            template: \"<se-tabs *ngIf=\\\"tabs\\\" class=\\\"multi-tabs-editor\\\" [model]=\\\"form\\\" [tabsList]=\\\"tabs\\\" [numTabsDisplayed]=\\\"6\\\"></se-tabs>\"\r\n        }),\r\n        __metadata(\"design:paramtypes\", [ISessionService])\r\n    ], LocalizedElementComponent);\r\n    return LocalizedElementComponent;\r\n}());\r\nexport { LocalizedElementComponent };\r\n//# sourceMappingURL=LocalizedElementComponent.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/services/index.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/utils/index.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/components/genericEditor/types.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/components/genericEditor/components/GenericEditorFieldWrapperComponent.ts"],"map":"{\"version\":3,\"file\":\"LocalizedElementComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/components/genericEditor/components/LocalizedElementComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/components/genericEditor/components/LocalizedElementComponent.d.ts","writeByteOrderMark":false,"text":"import { DoCheck } from '@angular/core';\r\nimport { DynamicInputChange, FormGrouping, ISessionService, Payload } from '@smart/utils';\r\nimport { ILanguage } from '../../../services';\r\nimport { GenericEditorField, GenericEditorTab } from '../types';\r\nexport declare class LocalizedElementComponent implements DoCheck, DynamicInputChange {\r\n    private sessionService;\r\n    form: FormGrouping;\r\n    field: GenericEditorField;\r\n    component: Payload;\r\n    languages: ILanguage[];\r\n    tabs: GenericEditorTab[];\r\n    private _previousMessages;\r\n    constructor(sessionService: ISessionService);\r\n    onDynamicInputChange(): void;\r\n    ngDoCheck(): void;\r\n    private _createLocalizedTabs;\r\n}\r\n"}}
