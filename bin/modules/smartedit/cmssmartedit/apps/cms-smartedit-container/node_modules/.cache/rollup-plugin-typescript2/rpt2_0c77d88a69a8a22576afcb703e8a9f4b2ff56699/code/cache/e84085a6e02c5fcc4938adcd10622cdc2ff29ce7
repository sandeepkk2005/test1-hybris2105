{"code":"import { __awaiter, __decorate, __generator, __metadata, __param } from \"tslib\";\r\nimport { Component, Inject, ViewEncapsulation, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\r\nimport { CmsitemsRestService } from 'cmscommons';\r\nimport { SeDowngradeComponent, ICatalogService, SystemEventService, GENERIC_EDITOR_WIDGET_DATA } from 'smarteditcommons';\r\nimport { SELECTED_NODE } from '../navigationNodeConstants';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"NavigationNodeSelectorComponent\", {\r\n    selector: 'se-navigation-node-selector',\r\n    template: \"<div *ngIf=\\\"isReady\\\"><div *ngIf=\\\"cmsItem[qualifier]\\\" class=\\\"se-navigation-mode\\\"><div class=\\\"se-navigation__node\\\"><se-breadcrumb class=\\\"se-navigation__node-breadcrumb\\\" [nodeUuid]=\\\"cmsItem[qualifier]\\\" [uriContext]=\\\"uriContext\\\"></se-breadcrumb><div class=\\\"se-navigation__node-button\\\"><button class=\\\"btn btn-link btn-block se-navigation__button\\\" (click)=\\\"remove($event)\\\" [disabled]=\\\"!field.editable\\\" translate=\\\"se.cms.navigationcomponent.management.node.selection.remove.action\\\"></button></div></div><se-navigation-editor-tree [uriContext]=\\\"uriContext\\\" [readOnly]=\\\"true\\\" [rootNodeUid]=\\\"nodeUid\\\"></se-navigation-editor-tree></div><div *ngIf=\\\"!cmsItem[qualifier]\\\"><label translate=\\\"se.cms.navigationcomponent.management.node.selection.invite.action\\\"></label><se-navigation-node-picker [uriContext]=\\\"uriContext\\\" [editable]=\\\"field.editable\\\"></se-navigation-node-picker></div></div>\",\r\n    styles: [\".se-navigation__node{display:flex;background-color:#fafafa;padding:0 20px;margin:0 -20px 20px -20px;border-top:1px solid #eeeeef;border-bottom:1px solid #eeeeef}.se-navigation__node-breadcrumb{flex:10}.se-navigation__node-breadcrumb .se-breadcrumb{margin-bottom:0;border:none}.se-navigation__node-button{flex:2;display:flex}.se-navigation__button{font-size:15px;font-family:\\\"72\\\",web,\\\"Open Sans\\\",sans-serif;font-weight:700;align-self:flex-end;text-transform:capitalize}se-navigation-node-selector .se-navigation-editor-tree{margin:0}\"],\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n    encapsulation: ViewEncapsulation.None\r\n});\r\nvar /* @ngInject */ NavigationNodeSelectorComponent = /** @class */ (function () {\r\n    function /* @ngInject */ NavigationNodeSelectorComponent(data, catalogService, cmsitemsRestService, systemEventService, cdr) {\r\n        var _a;\r\n        this.data = data;\r\n        this.catalogService = catalogService;\r\n        this.cmsitemsRestService = cmsitemsRestService;\r\n        this.systemEventService = systemEventService;\r\n        this.cdr = cdr;\r\n        this.isReady = false;\r\n        this.nodeUid = null;\r\n        this.uriContext = null;\r\n        (_a = this.data, this.field = _a.field, this.cmsItem = _a.model, this.qualifier = _a.qualifier);\r\n    }\r\n    /* @ngInject */ NavigationNodeSelectorComponent.prototype.ngOnInit = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var uriContext, cmsItem;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.catalogService.retrieveUriContext()];\r\n                    case 1:\r\n                        uriContext = _a.sent();\r\n                        this.uriContext = uriContext;\r\n                        if (!this.cmsItem[this.qualifier]) return [3 /*break*/, 3];\r\n                        return [4 /*yield*/, this.cmsitemsRestService.getById(this.cmsItem[this.qualifier])];\r\n                    case 2:\r\n                        cmsItem = _a.sent();\r\n                        this.nodeUid = cmsItem.uid;\r\n                        this.isReady = true;\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        this.isReady = true;\r\n                        _a.label = 4;\r\n                    case 4:\r\n                        this.unregisterSubscription = this.systemEventService.subscribe(SELECTED_NODE, function (_eventId, _a) {\r\n                            var nodeUid = _a.nodeUid, nodeUuid = _a.nodeUuid;\r\n                            _this.nodeUid = nodeUid;\r\n                            _this.cmsItem[_this.qualifier] = nodeUuid;\r\n                            _this.cdr.detectChanges();\r\n                        });\r\n                        this.cdr.detectChanges();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ NavigationNodeSelectorComponent.prototype.ngOnDestroy = function () {\r\n        this.unregisterSubscription();\r\n    };\r\n    /* @ngInject */ NavigationNodeSelectorComponent.prototype.remove = function () {\r\n        delete this.cmsItem[this.qualifier];\r\n        this.cdr.detectChanges();\r\n    };\r\n    /* @ngInject */ NavigationNodeSelectorComponent = __decorate([\r\n        SeDowngradeComponent(),\r\n        Component({\r\n            selector: 'se-navigation-node-selector',\r\n            template: \"<div *ngIf=\\\"isReady\\\"><div *ngIf=\\\"cmsItem[qualifier]\\\" class=\\\"se-navigation-mode\\\"><div class=\\\"se-navigation__node\\\"><se-breadcrumb class=\\\"se-navigation__node-breadcrumb\\\" [nodeUuid]=\\\"cmsItem[qualifier]\\\" [uriContext]=\\\"uriContext\\\"></se-breadcrumb><div class=\\\"se-navigation__node-button\\\"><button class=\\\"btn btn-link btn-block se-navigation__button\\\" (click)=\\\"remove($event)\\\" [disabled]=\\\"!field.editable\\\" translate=\\\"se.cms.navigationcomponent.management.node.selection.remove.action\\\"></button></div></div><se-navigation-editor-tree [uriContext]=\\\"uriContext\\\" [readOnly]=\\\"true\\\" [rootNodeUid]=\\\"nodeUid\\\"></se-navigation-editor-tree></div><div *ngIf=\\\"!cmsItem[qualifier]\\\"><label translate=\\\"se.cms.navigationcomponent.management.node.selection.invite.action\\\"></label><se-navigation-node-picker [uriContext]=\\\"uriContext\\\" [editable]=\\\"field.editable\\\"></se-navigation-node-picker></div></div>\",\r\n            styles: [\".se-navigation__node{display:flex;background-color:#fafafa;padding:0 20px;margin:0 -20px 20px -20px;border-top:1px solid #eeeeef;border-bottom:1px solid #eeeeef}.se-navigation__node-breadcrumb{flex:10}.se-navigation__node-breadcrumb .se-breadcrumb{margin-bottom:0;border:none}.se-navigation__node-button{flex:2;display:flex}.se-navigation__button{font-size:15px;font-family:\\\"72\\\",web,\\\"Open Sans\\\",sans-serif;font-weight:700;align-self:flex-end;text-transform:capitalize}se-navigation-node-selector .se-navigation-editor-tree{margin:0}\"],\r\n            changeDetection: ChangeDetectionStrategy.OnPush,\r\n            encapsulation: ViewEncapsulation.None\r\n        }),\r\n        __param(0, Inject(GENERIC_EDITOR_WIDGET_DATA)),\r\n        __metadata(\"design:paramtypes\", [Object, ICatalogService,\r\n            CmsitemsRestService,\r\n            SystemEventService,\r\n            ChangeDetectorRef])\r\n    ], /* @ngInject */ NavigationNodeSelectorComponent);\r\n    return /* @ngInject */ NavigationNodeSelectorComponent;\r\n}());\r\nexport { /* @ngInject */ NavigationNodeSelectorComponent };\r\n//# sourceMappingURL=NavigationNodeSelectorComponent.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/legacyGenericEditor/navigationNode/types.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/legacyGenericEditor/navigationNode/components/navigationNodeConstants.ts"],"map":"{\"version\":3,\"file\":\"NavigationNodeSelectorComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../../../src/components/legacyGenericEditor/navigationNode/components/navigationNodeSelector/NavigationNodeSelectorComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/components/legacyGenericEditor/navigationNode/components/navigationNodeSelector/NavigationNodeSelectorComponent.d.ts","writeByteOrderMark":false,"text":"import { OnInit, OnDestroy, ChangeDetectorRef } from '@angular/core';\r\nimport { CMSItem, CmsitemsRestService } from 'cmscommons';\r\nimport { ICatalogService, SystemEventService, GenericEditorWidgetData, IUriContext, GenericEditorAttribute } from 'smarteditcommons';\r\nexport declare class NavigationNodeSelectorComponent implements OnInit, OnDestroy {\r\n    private data;\r\n    private catalogService;\r\n    private cmsitemsRestService;\r\n    private systemEventService;\r\n    private cdr;\r\n    field: GenericEditorAttribute;\r\n    cmsItem: CMSItem;\r\n    qualifier: string;\r\n    isReady: boolean;\r\n    nodeUid: string;\r\n    uriContext: IUriContext;\r\n    private unregisterSubscription;\r\n    constructor(data: GenericEditorWidgetData<CMSItem>, catalogService: ICatalogService, cmsitemsRestService: CmsitemsRestService, systemEventService: SystemEventService, cdr: ChangeDetectorRef);\r\n    ngOnInit(): Promise<void>;\r\n    ngOnDestroy(): void;\r\n    remove(): void;\r\n}\r\n"}}
