{"code":"import { __assign, __decorate, __metadata } from \"tslib\";\r\nimport { Location } from '@angular/common';\r\nimport { Component, ComponentFactoryResolver, TemplateRef, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { EVENTS, IExperienceService, PriorityService, SeDowngradeComponent, SeRouteService, SystemEventService } from 'smarteditcommons';\r\nimport './ShortcutLink.scss';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"ShortcutLinkComponent\", {\r\n    selector: 'shortcut-link',\r\n    template: \"<ng-container #container><ng-template #defaultTemplate let-shortcutLink><div class=\\\"se-shortcut-link\\\"><a class=\\\"se-shortcut-link__item\\\" [ngClass]=\\\"{'se-shortcut-link__item--active': shortcutLink.active}\\\" (click)=\\\"onClick(shortcutLink)\\\">{{shortcutLink.titleI18nKey | translate}}</a></div></ng-template></ng-container>\"\r\n});\r\nvar /* @ngInject */ ShortcutLinkComponent = /** @class */ (function () {\r\n    function /* @ngInject */ ShortcutLinkComponent(router, location, resolver, experienceService, priorityService, systemEventService) {\r\n        this.router = router;\r\n        this.location = location;\r\n        this.resolver = resolver;\r\n        this.experienceService = experienceService;\r\n        this.priorityService = priorityService;\r\n        this.systemEventService = systemEventService;\r\n    }\r\n    /* @ngInject */ ShortcutLinkComponent.prototype.ngOnInit = function () {\r\n        var _this = this;\r\n        this.unregFn = this.systemEventService.subscribe(EVENTS.EXPERIENCE_UPDATE, function () {\r\n            return _this._createShortcutLink();\r\n        });\r\n    };\r\n    /* @ngInject */ ShortcutLinkComponent.prototype.ngOnDestroy = function () {\r\n        this.unregFn();\r\n    };\r\n    /* @ngInject */ ShortcutLinkComponent.prototype.ngAfterViewInit = function () {\r\n        this._createShortcutLink();\r\n    };\r\n    /* @ngInject */ ShortcutLinkComponent.prototype.onClick = function (shortcutLink) {\r\n        this.location.go(shortcutLink.fullPath);\r\n        this.router.navigateByUrl(shortcutLink.fullPath);\r\n    };\r\n    /* @ngInject */ ShortcutLinkComponent.prototype._createShortcutLink = function () {\r\n        var _this = this;\r\n        var currentExperience = this.experienceService.getCurrentExperience();\r\n        currentExperience.then(function (experience) {\r\n            var shortcutLinks = _this._getShortcutLinks(experience);\r\n            var orderedShortcutLinks = _this._orderByPriority(shortcutLinks);\r\n            _this._createShortcutLinkDynamicComponents(orderedShortcutLinks);\r\n        });\r\n    };\r\n    /* @ngInject */ ShortcutLinkComponent.prototype._createShortcutLinkDynamicComponents = function (shortcutLinks) {\r\n        var _this = this;\r\n        this.containerEntry.clear();\r\n        shortcutLinks.forEach(function (shortcutLink) {\r\n            if (shortcutLink && shortcutLink.titleI18nKey) {\r\n                _this.containerEntry.createEmbeddedView(_this.defaultTemplate, {\r\n                    $implicit: shortcutLink\r\n                });\r\n            }\r\n            else if (shortcutLink && shortcutLink.shortcutComponent) {\r\n                var factory = _this.resolver.resolveComponentFactory(shortcutLink.shortcutComponent);\r\n                var component = _this.containerEntry.createComponent(factory);\r\n                component.instance.shortcutLink = shortcutLink;\r\n            }\r\n        });\r\n    };\r\n    /* @ngInject */ ShortcutLinkComponent.prototype._getShortcutLinks = function (experience) {\r\n        var url = this.location.path();\r\n        return SeRouteService.routeShortcutConfigs.map(function (routeShortcut) {\r\n            var active;\r\n            var path = routeShortcut.fullPath\r\n                .replace(':siteId', experience.catalogDescriptor.siteId)\r\n                .replace(':catalogId', experience.catalogDescriptor.catalogId)\r\n                .replace(':catalogVersion', experience.catalogDescriptor.catalogVersion);\r\n            if (path.startsWith('/')) {\r\n                active = path === url;\r\n            }\r\n            else {\r\n                active = \"/\" + path === url;\r\n            }\r\n            var shortcutLink = __assign({}, routeShortcut);\r\n            shortcutLink.fullPath = path;\r\n            shortcutLink.active = active;\r\n            return shortcutLink;\r\n        });\r\n    };\r\n    /* @ngInject */ ShortcutLinkComponent.prototype._orderByPriority = function (shortcutLinks) {\r\n        shortcutLinks.forEach(function (shortcutLink) { return (shortcutLink.priority = shortcutLink.priority || 500); });\r\n        return this.priorityService.sort(shortcutLinks);\r\n    };\r\n    __decorate([\r\n        ViewChild('container', { read: ViewContainerRef, static: false }),\r\n        __metadata(\"design:type\", ViewContainerRef)\r\n    ], /* @ngInject */ ShortcutLinkComponent.prototype, \"containerEntry\", void 0);\r\n    __decorate([\r\n        ViewChild('defaultTemplate', { read: TemplateRef, static: false }),\r\n        __metadata(\"design:type\", TemplateRef)\r\n    ], /* @ngInject */ ShortcutLinkComponent.prototype, \"defaultTemplate\", void 0);\r\n    /* @ngInject */ ShortcutLinkComponent = __decorate([\r\n        SeDowngradeComponent(),\r\n        Component({\r\n            selector: 'shortcut-link',\r\n            template: \"<ng-container #container><ng-template #defaultTemplate let-shortcutLink><div class=\\\"se-shortcut-link\\\"><a class=\\\"se-shortcut-link__item\\\" [ngClass]=\\\"{'se-shortcut-link__item--active': shortcutLink.active}\\\" (click)=\\\"onClick(shortcutLink)\\\">{{shortcutLink.titleI18nKey | translate}}</a></div></ng-template></ng-container>\"\r\n        }),\r\n        __metadata(\"design:paramtypes\", [Router,\r\n            Location,\r\n            ComponentFactoryResolver,\r\n            IExperienceService,\r\n            PriorityService,\r\n            SystemEventService])\r\n    ], /* @ngInject */ ShortcutLinkComponent);\r\n    return /* @ngInject */ ShortcutLinkComponent;\r\n}());\r\nexport { /* @ngInject */ ShortcutLinkComponent };\r\n//# sourceMappingURL=ShortcutLinkComponent.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/common@8.2.14_@angular+core@8.2.14+rxjs@6.5.4/node_modules/@angular/common/common.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/router@8.2.14_e9fbe5720e9434eb9ae0f6720f1ca3f4/node_modules/@angular/router/router.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts"],"map":"{\"version\":3,\"file\":\"ShortcutLinkComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/components/shortcutLink/ShortcutLinkComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-container/components/shortcutLink/ShortcutLinkComponent.d.ts","writeByteOrderMark":false,"text":"import { Location } from '@angular/common';\r\nimport { ComponentFactoryResolver, OnDestroy, OnInit, TemplateRef, ViewContainerRef } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { IExperienceService, PriorityService, SeRouteShortcutConfig, SystemEventService } from 'smarteditcommons';\r\nimport './ShortcutLink.scss';\r\nexport interface SeShortcutLinkConfig extends SeRouteShortcutConfig {\r\n    active?: boolean;\r\n}\r\nexport declare class ShortcutLinkComponent implements OnInit, OnDestroy {\r\n    private router;\r\n    private location;\r\n    private resolver;\r\n    private experienceService;\r\n    private priorityService;\r\n    private systemEventService;\r\n    containerEntry: ViewContainerRef;\r\n    defaultTemplate: TemplateRef<any>;\r\n    private unregFn;\r\n    constructor(router: Router, location: Location, resolver: ComponentFactoryResolver, experienceService: IExperienceService, priorityService: PriorityService, systemEventService: SystemEventService);\r\n    ngOnInit(): void;\r\n    ngOnDestroy(): void;\r\n    ngAfterViewInit(): void;\r\n    onClick(shortcutLink: SeShortcutLinkConfig): void;\r\n    private _createShortcutLink;\r\n    private _createShortcutLinkDynamicComponents;\r\n    private _getShortcutLinks;\r\n    private _orderByPriority;\r\n}\r\n"}}
