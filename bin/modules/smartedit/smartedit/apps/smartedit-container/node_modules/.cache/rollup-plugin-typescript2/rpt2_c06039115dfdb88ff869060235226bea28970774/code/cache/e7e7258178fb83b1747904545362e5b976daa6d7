{"code":"import { __decorate, __metadata } from \"tslib\";\r\nimport { ChangeDetectionStrategy, Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { combineLatest, BehaviorSubject } from 'rxjs';\r\nimport { map, take } from 'rxjs/operators';\r\nimport { IModalService, L10nPipe, SystemEventService } from 'smarteditcommons';\r\nimport { MultiProductCatalogVersionConfigurationComponent } from '../multiProductCatalogVersionConfiguration';\r\nimport { MULTI_PRODUCT_CATALOGS_UPDATED } from '../types';\r\nimport './MultiProductCatalogVersionSelectorComponent.scss';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"MultiProductCatalogVersionSelectorComponent\", {\r\n    selector: 'se-multi-product-catalog-version-selector',\r\n    providers: [L10nPipe],\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n    host: {\r\n        '[class.se-multi-product-catalog-version-selector]': 'true'\r\n    },\r\n    template: \"<se-tooltip [placement]=\\\"'bottom'\\\" [triggers]=\\\"['mouseenter', 'mouseleave']\\\" [isChevronVisible]=\\\"true\\\" class=\\\"se-products-catalog-select-multiple__tooltip\\\"><div id=\\\"multi-product-catalog-versions-selector\\\" se-tooltip-trigger (click)=\\\"onClickSelector()\\\" class=\\\"se-products-catalog-select-multiple\\\"><input type=\\\"text\\\" [value]=\\\"multiProductCatalogVersionsSelectedOptions$ | async\\\" class=\\\"form-control se-products-catalog-select-multiple__catalogs se-nowrap-ellipsis\\\" [name]=\\\"'productCatalogVersions'\\\" readonly=\\\"readonly\\\"/> <span class=\\\"hyicon hyicon-optionssm se-products-catalog-select-multiple__icon\\\"></span></div><div class=\\\"se-product-catalogs-tooltip\\\" se-tooltip-body><div class=\\\"se-product-catalogs-tooltip__h\\\">{{ ('se.product.catalogs.selector.headline.tooltip' || '') | translate }}</div><div class=\\\"se-product-catalog-info\\\" *ngFor=\\\"let productCatalog of productCatalogs\\\">{{ getCatalogNameCatalogVersionLabel(productCatalog.catalogId) | async }}</div></div></se-tooltip>\"\r\n});\r\nvar MultiProductCatalogVersionSelectorComponent = /** @class */ (function () {\r\n    function MultiProductCatalogVersionSelectorComponent(l10nPipe, modalService, systemEventService) {\r\n        this.l10nPipe = l10nPipe;\r\n        this.modalService = modalService;\r\n        this.systemEventService = systemEventService;\r\n        this.selectedProductCatalogVersionsChange = new EventEmitter();\r\n        this.multiProductCatalogVersionsSelectedOptions$ = new BehaviorSubject('');\r\n    }\r\n    MultiProductCatalogVersionSelectorComponent.prototype.ngOnInit = function () {\r\n        var _this = this;\r\n        this.$unRegEventForMultiProducts = this.systemEventService.subscribe(MULTI_PRODUCT_CATALOGS_UPDATED, function (eventId, catalogVersions) {\r\n            return _this.updateProductCatalogVersionsModel(eventId, catalogVersions);\r\n        });\r\n    };\r\n    MultiProductCatalogVersionSelectorComponent.prototype.ngOnDestroy = function () {\r\n        if (this.$unRegEventForMultiProducts) {\r\n            this.$unRegEventForMultiProducts();\r\n        }\r\n    };\r\n    MultiProductCatalogVersionSelectorComponent.prototype.ngOnChanges = function () {\r\n        this.setMultiVersionSelectorTexts(this.productCatalogs);\r\n    };\r\n    MultiProductCatalogVersionSelectorComponent.prototype.onClickSelector = function () {\r\n        this.modalService.open({\r\n            component: MultiProductCatalogVersionConfigurationComponent,\r\n            data: {\r\n                productCatalogs: this.productCatalogs,\r\n                selectedCatalogVersions: this.selectedProductCatalogVersions\r\n            },\r\n            templateConfig: {\r\n                title: 'se.modal.product.catalog.configuration'\r\n            },\r\n            config: {\r\n                modalPanelClass: 'modal-md modal-stretched'\r\n            }\r\n        });\r\n    };\r\n    MultiProductCatalogVersionSelectorComponent.prototype.getCatalogNameCatalogVersionLabel = function (catalogId) {\r\n        var catalogNameCatalogVersionLabel = this.catalogNameCatalogVersionLabelMap.get(catalogId);\r\n        return this.l10nPipe\r\n            .transform(catalogNameCatalogVersionLabel.name)\r\n            .pipe(map(function (name) { return name + \" (\" + catalogNameCatalogVersionLabel.version + \")\"; }));\r\n    };\r\n    MultiProductCatalogVersionSelectorComponent.prototype.setMultiVersionSelectorTexts = function (productCatalogs) {\r\n        this.catalogNameCatalogVersionLabelMap = this.buildCatalogNameCatalogVersionLabelMap(productCatalogs, this.selectedProductCatalogVersions);\r\n        this.setMultiProductCatalogVersionsSelectedOptions(productCatalogs);\r\n    };\r\n    MultiProductCatalogVersionSelectorComponent.prototype.buildCatalogNameCatalogVersionLabelMap = function (productCatalogs, versionsFromModel) {\r\n        var catalogsMap = new Map();\r\n        productCatalogs.forEach(function (productCatalog) {\r\n            var productCatalogVersion = productCatalog.versions.find(function (version) {\r\n                return versionsFromModel && versionsFromModel.includes(version.uuid);\r\n            });\r\n            if (productCatalogVersion) {\r\n                catalogsMap.set(productCatalog.catalogId, {\r\n                    name: productCatalog.name,\r\n                    version: productCatalogVersion.version\r\n                });\r\n            }\r\n        });\r\n        return catalogsMap;\r\n    };\r\n    MultiProductCatalogVersionSelectorComponent.prototype.setMultiProductCatalogVersionsSelectedOptions = function (productCatalogs) {\r\n        var _this = this;\r\n        if (productCatalogs) {\r\n            var labels$ = Array.from(this.catalogNameCatalogVersionLabelMap).map(function (key) {\r\n                return _this.getCatalogNameCatalogVersionLabel(key[0]);\r\n            });\r\n            combineLatest(labels$)\r\n                .pipe(take(1), map(function (results) { return results.join(', '); }))\r\n                .subscribe(function (selectedOptions) {\r\n                return _this.multiProductCatalogVersionsSelectedOptions$.next(selectedOptions);\r\n            });\r\n        }\r\n        else {\r\n            this.multiProductCatalogVersionsSelectedOptions$.next('');\r\n        }\r\n    };\r\n    MultiProductCatalogVersionSelectorComponent.prototype.updateProductCatalogVersionsModel = function (_eventId, catalogVersions) {\r\n        this.selectedProductCatalogVersionsChange.emit(catalogVersions);\r\n    };\r\n    __decorate([\r\n        Input(),\r\n        __metadata(\"design:type\", Array)\r\n    ], MultiProductCatalogVersionSelectorComponent.prototype, \"productCatalogs\", void 0);\r\n    __decorate([\r\n        Input(),\r\n        __metadata(\"design:type\", Array)\r\n    ], MultiProductCatalogVersionSelectorComponent.prototype, \"selectedProductCatalogVersions\", void 0);\r\n    __decorate([\r\n        Output(),\r\n        __metadata(\"design:type\", Object)\r\n    ], MultiProductCatalogVersionSelectorComponent.prototype, \"selectedProductCatalogVersionsChange\", void 0);\r\n    MultiProductCatalogVersionSelectorComponent = __decorate([\r\n        Component({\r\n            selector: 'se-multi-product-catalog-version-selector',\r\n            providers: [L10nPipe],\r\n            changeDetection: ChangeDetectionStrategy.OnPush,\r\n            host: {\r\n                '[class.se-multi-product-catalog-version-selector]': 'true'\r\n            },\r\n            template: \"<se-tooltip [placement]=\\\"'bottom'\\\" [triggers]=\\\"['mouseenter', 'mouseleave']\\\" [isChevronVisible]=\\\"true\\\" class=\\\"se-products-catalog-select-multiple__tooltip\\\"><div id=\\\"multi-product-catalog-versions-selector\\\" se-tooltip-trigger (click)=\\\"onClickSelector()\\\" class=\\\"se-products-catalog-select-multiple\\\"><input type=\\\"text\\\" [value]=\\\"multiProductCatalogVersionsSelectedOptions$ | async\\\" class=\\\"form-control se-products-catalog-select-multiple__catalogs se-nowrap-ellipsis\\\" [name]=\\\"'productCatalogVersions'\\\" readonly=\\\"readonly\\\"/> <span class=\\\"hyicon hyicon-optionssm se-products-catalog-select-multiple__icon\\\"></span></div><div class=\\\"se-product-catalogs-tooltip\\\" se-tooltip-body><div class=\\\"se-product-catalogs-tooltip__h\\\">{{ ('se.product.catalogs.selector.headline.tooltip' || '') | translate }}</div><div class=\\\"se-product-catalog-info\\\" *ngFor=\\\"let productCatalog of productCatalogs\\\">{{ getCatalogNameCatalogVersionLabel(productCatalog.catalogId) | async }}</div></div></se-tooltip>\"\r\n        }),\r\n        __metadata(\"design:paramtypes\", [L10nPipe,\r\n            IModalService,\r\n            SystemEventService])\r\n    ], MultiProductCatalogVersionSelectorComponent);\r\n    return MultiProductCatalogVersionSelectorComponent;\r\n}());\r\nexport { MultiProductCatalogVersionSelectorComponent };\r\n//# sourceMappingURL=MultiProductCatalogVersionSelectorComponent.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/rxjs@6.5.4/node_modules/rxjs/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/rxjs@6.5.4/node_modules/rxjs/operators/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-container/src/components/productCatalogVersion/multiProductCatalogVersionConfiguration/index.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-container/src/components/productCatalogVersion/types.ts"],"map":"{\"version\":3,\"file\":\"MultiProductCatalogVersionSelectorComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/components/productCatalogVersion/multiProductCatalogVersionSelector/MultiProductCatalogVersionSelectorComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-container/components/productCatalogVersion/multiProductCatalogVersionSelector/MultiProductCatalogVersionSelectorComponent.d.ts","writeByteOrderMark":false,"text":"import { EventEmitter, OnChanges, OnDestroy, OnInit } from '@angular/core';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\nimport { IBaseCatalog, IModalService, L10nPipe, SystemEventService } from 'smarteditcommons';\r\nimport './MultiProductCatalogVersionSelectorComponent.scss';\r\nexport declare class MultiProductCatalogVersionSelectorComponent implements OnInit, OnDestroy, OnChanges {\r\n    private l10nPipe;\r\n    private modalService;\r\n    private systemEventService;\r\n    productCatalogs: IBaseCatalog[];\r\n    selectedProductCatalogVersions: string[];\r\n    selectedProductCatalogVersionsChange: EventEmitter<string[]>;\r\n    multiProductCatalogVersionsSelectedOptions$: BehaviorSubject<string>;\r\n    private catalogNameCatalogVersionLabelMap;\r\n    private $unRegEventForMultiProducts;\r\n    constructor(l10nPipe: L10nPipe, modalService: IModalService, systemEventService: SystemEventService);\r\n    ngOnInit(): void;\r\n    ngOnDestroy(): void;\r\n    ngOnChanges(): void;\r\n    onClickSelector(): void;\r\n    getCatalogNameCatalogVersionLabel(catalogId: string): Observable<string>;\r\n    private setMultiVersionSelectorTexts;\r\n    private buildCatalogNameCatalogVersionLabelMap;\r\n    private setMultiProductCatalogVersionsSelectedOptions;\r\n    private updateProductCatalogVersionsModel;\r\n}\r\n"}}
