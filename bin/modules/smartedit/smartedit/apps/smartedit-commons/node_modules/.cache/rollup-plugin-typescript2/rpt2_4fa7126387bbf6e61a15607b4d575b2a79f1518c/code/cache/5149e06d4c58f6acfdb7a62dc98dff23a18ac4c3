{"code":"import { __decorate, __metadata } from \"tslib\";\r\n/*\r\n * Copyright (c) 2021 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { Directive, EventEmitter, Input, Output, TemplateRef, ViewContainerRef } from '@angular/core';\r\nimport { combineLatest } from 'rxjs';\r\nimport { GenericEditorStateBuilderService } from '../../services/GenericEditorStateBuilderService';\r\nvar FormBuilderDirective = /** @class */ (function () {\r\n    function FormBuilderDirective(templateRef, viewContainer, stateBuilderService) {\r\n        this.templateRef = templateRef;\r\n        this.viewContainer = viewContainer;\r\n        this.stateBuilderService = stateBuilderService;\r\n        this.stateCreated = new EventEmitter();\r\n    }\r\n    Object.defineProperty(FormBuilderDirective.prototype, \"formBuilder\", {\r\n        set: function (input) {\r\n            this._dispose();\r\n            this._subscription = combineLatest(input.data$, input.schema$).subscribe(this._onDataStream.bind(this));\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    FormBuilderDirective.prototype.ngOnDestroy = function () {\r\n        this._dispose();\r\n    };\r\n    FormBuilderDirective.prototype._onDataStream = function (_a) {\r\n        var data = _a[0], schema = _a[1];\r\n        if (!data || !schema) {\r\n            return;\r\n        }\r\n        /**\r\n         * Destroys all views and recreate the embeddedview.\r\n         */\r\n        this.viewContainer.clear();\r\n        /**\r\n         * No form supported.\r\n         */\r\n        if (!schema.structure) {\r\n            this.viewContainer.createEmbeddedView(this.templateRef, {\r\n                $implicit: null\r\n            });\r\n            return;\r\n        }\r\n        /**\r\n         * Build state, and emit state.\r\n         */\r\n        var state = this.stateBuilderService.buildState(data, schema);\r\n        this.stateCreated.emit(state);\r\n        this.viewContainer.createEmbeddedView(this.templateRef, {\r\n            $implicit: state\r\n        });\r\n    };\r\n    /**\r\n     * @internal\r\n     * Removes subscription and destroyes all views.\r\n     */\r\n    FormBuilderDirective.prototype._dispose = function () {\r\n        this._subscription && this._subscription.unsubscribe();\r\n        this.viewContainer.clear();\r\n    };\r\n    __decorate([\r\n        Input(),\r\n        __metadata(\"design:type\", Object),\r\n        __metadata(\"design:paramtypes\", [Object])\r\n    ], FormBuilderDirective.prototype, \"formBuilder\", null);\r\n    __decorate([\r\n        Output(),\r\n        __metadata(\"design:type\", Object)\r\n    ], FormBuilderDirective.prototype, \"stateCreated\", void 0);\r\n    FormBuilderDirective = __decorate([\r\n        Directive({ selector: '[formBuilder]' }),\r\n        __metadata(\"design:paramtypes\", [TemplateRef,\r\n            ViewContainerRef,\r\n            GenericEditorStateBuilderService])\r\n    ], FormBuilderDirective);\r\n    return FormBuilderDirective;\r\n}());\r\nexport { FormBuilderDirective };\r\n//# sourceMappingURL=FormBuilderDirective.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/rxjs@6.5.4/node_modules/rxjs/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/components/genericEditor/models/index.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/components/genericEditor/services/GenericEditorStateBuilderService.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/components/genericEditor/types.ts"],"map":"{\"version\":3,\"file\":\"FormBuilderDirective.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../../src/components/genericEditor/components/formBuilder/FormBuilderDirective.ts\"],\"names\":[],\"mappings\":\";AAAA;;GAEG;AACH,OAAO,EACH,SAAS,EACT,YAAY,EACZ,KAAK,EACL,MAAM,EACN,WAAW,EACX,gBAAgB,EACnB,MAAM,eAAe,CAAC;AAGvB,OAAO,EAAE,aAAa,EAA4B,MAAM,MAAM,CAAC;AAG/D,OAAO,EAAE,gCAAgC,EAAE,MAAM,iDAAiD,CAAC;AAInG;IAiBI,8BACY,WAA6B,EAC7B,aAA+B,EAC/B,mBAAqD;QAFrD,gBAAW,GAAX,WAAW,CAAkB;QAC7B,kBAAa,GAAb,aAAa,CAAkB;QAC/B,wBAAmB,GAAnB,mBAAmB,CAAkC;QAPjE,iBAAY,GAAG,IAAI,YAAY,EAAsB,CAAC;IAQnD,CAAC;IAnBJ,sBAAI,6CAAW;aAAf,UAAgB,KAGf;YACG,IAAI,CAAC,QAAQ,EAAE,CAAC;YAChB,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC,SAAS,CACpE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAChC,CAAC;QACN,CAAC;;;OAAA;IAaD,0CAAW,GAAX;QACI,IAAI,CAAC,QAAQ,EAAE,CAAC;IACpB,CAAC;IAEO,4CAAa,GAArB,UAAsB,EAA4D;YAA3D,IAAI,QAAA,EAAE,MAAM,QAAA;QAC/B,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,EAAE;YAClB,OAAO;SACV;QAED;;WAEG;QACH,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;QAE3B;;WAEG;QACH,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,aAAa,CAAC,kBAAkB,CAAC,IAAI,CAAC,WAAW,EAAE;gBACpD,SAAS,EAAE,IAAI;aAClB,CAAC,CAAC;YACH,OAAO;SACV;QAED;;WAEG;QACH,IAAM,KAAK,GAAG,IAAI,CAAC,mBAAmB,CAAC,UAAU,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;QAChE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAE9B,IAAI,CAAC,aAAa,CAAC,kBAAkB,CAAC,IAAI,CAAC,WAAW,EAAE;YACpD,SAAS,EAAE,KAAK;SACnB,CAAC,CAAC;IACP,CAAC;IAED;;;OAGG;IACK,uCAAQ,GAAhB;QACI,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;QACvD,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;IAC/B,CAAC;IA/DD;QADC,KAAK,EAAE;;;2DASP;IAGD;QADC,MAAM,EAAE;;8DAC6C;IAb7C,oBAAoB;QADhC,SAAS,CAAC,EAAE,QAAQ,EAAE,eAAe,EAAE,CAAC;yCAmBZ,WAAW;YACT,gBAAgB;YACV,gCAAgC;OApBxD,oBAAoB,CAkEhC;IAAD,2BAAC;CAAA,AAlED,IAkEC;SAlEY,oBAAoB\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/components/genericEditor/components/formBuilder/FormBuilderDirective.d.ts","writeByteOrderMark":false,"text":"import { EventEmitter, TemplateRef, ViewContainerRef } from '@angular/core';\r\nimport { Payload } from '@smart/utils';\r\nimport { Observable } from 'rxjs';\r\nimport { GenericEditorState } from '../../models';\r\nimport { GenericEditorStateBuilderService } from '../../services/GenericEditorStateBuilderService';\r\nimport { GenericEditorSchema } from '../../types';\r\nexport declare class FormBuilderDirective {\r\n    private templateRef;\r\n    private viewContainer;\r\n    private stateBuilderService;\r\n    set formBuilder(input: {\r\n        data$: Observable<Payload>;\r\n        schema$: Observable<GenericEditorSchema>;\r\n    });\r\n    stateCreated: EventEmitter<GenericEditorState>;\r\n    private _subscription;\r\n    constructor(templateRef: TemplateRef<any>, viewContainer: ViewContainerRef, stateBuilderService: GenericEditorStateBuilderService);\r\n    ngOnDestroy(): void;\r\n    private _onDataStream;\r\n    /**\r\n     * @internal\r\n     * Removes subscription and destroyes all views.\r\n     */\r\n    private _dispose;\r\n}\r\n"}}
