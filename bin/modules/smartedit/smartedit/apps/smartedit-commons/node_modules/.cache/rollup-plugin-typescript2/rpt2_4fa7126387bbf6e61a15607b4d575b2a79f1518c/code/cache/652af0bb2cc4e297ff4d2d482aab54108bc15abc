{"code":"/*\r\n * Copyright (c) 2021 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { InjectionToken } from '@angular/core';\r\nimport { stringUtils } from 'smarteditcommons/utils/StringUtils';\r\nexport var TOOLBAR_ITEM = new InjectionToken('TOOLBAR_ITEM');\r\nexport var ToolbarItemType;\r\n(function (ToolbarItemType) {\r\n    ToolbarItemType[\"TEMPLATE\"] = \"TEMPLATE\";\r\n    ToolbarItemType[\"ACTION\"] = \"ACTION\";\r\n    ToolbarItemType[\"HYBRID_ACTION\"] = \"HYBRID_ACTION\";\r\n})(ToolbarItemType || (ToolbarItemType = {}));\r\nexport var ToolbarSection;\r\n(function (ToolbarSection) {\r\n    ToolbarSection[\"left\"] = \"left\";\r\n    ToolbarSection[\"middle\"] = \"middle\";\r\n    ToolbarSection[\"right\"] = \"right\";\r\n})(ToolbarSection || (ToolbarSection = {}));\r\nexport var ToolbarDropDownPosition;\r\n(function (ToolbarDropDownPosition) {\r\n    ToolbarDropDownPosition[\"left\"] = \"left\";\r\n    ToolbarDropDownPosition[\"center\"] = \"center\";\r\n    ToolbarDropDownPosition[\"right\"] = \"right\";\r\n})(ToolbarDropDownPosition || (ToolbarDropDownPosition = {}));\r\n/**\r\n * Provides an abstract extensible toolbar service. Used to manage and perform actions to either the SmartEdit\r\n * application or the SmartEdit container.\r\n *\r\n * This class serves as an interface and should be extended, not instantiated.\r\n */\r\nvar IToolbarService = /** @class */ (function () {\r\n    function IToolbarService(logService, $templateCache, permissionService) {\r\n        this.logService = logService;\r\n        this.$templateCache = $templateCache;\r\n        this.permissionService = permissionService;\r\n        this.aliases = [];\r\n        this.actions = {};\r\n    }\r\n    IToolbarService.prototype.getActions = function () {\r\n        return this.actions;\r\n    };\r\n    IToolbarService.prototype.getAliases = function () {\r\n        return this.aliases;\r\n    };\r\n    /**\r\n     * Takes an array of items and maps them internally for display and trigger through an internal callback key.\r\n     * The action's properties are made available through the included template by a variable named 'item'.\r\n     *\r\n     * The toolbar item can accept a context that is displayed beside the toolbar item using either ContextTemplate or ContextTemplateUrl.\r\n     * This context can be shown or hidden by calling the events `seConstantsModule.SHOW_TOOLBAR_ITEM_CONTEXT` and\r\n     * `seConstantsModule.HIDE_TOOLBAR_ITEM_CONTEXT` respectively. Both the events need the key of the toolbar item as data.\r\n     *\r\n     * ### Example\r\n     *\r\n     *      crossFrameEventService.publish(SHOW_TOOLBAR_ITEM_CONTEXT, 'toolbar.item.key');\r\n     *\r\n     */\r\n    IToolbarService.prototype.addItems = function (_items) {\r\n        var _this = this;\r\n        var promisesToResolve = _items\r\n            .filter(function (item) {\r\n            // Validate provided actions -> The filter will return only valid items.\r\n            var includeAction = true;\r\n            if (!item.key) {\r\n                _this.logService.error('addItems() - Cannot add item without key.');\r\n                includeAction = false;\r\n            }\r\n            if (item.contextTemplate && item.contextTemplateUrl) {\r\n                _this.logService.error('addItems() - Toolbar item should contain only one of contextTemplate or contextTemplateUrl');\r\n                includeAction = false;\r\n            }\r\n            return includeAction;\r\n        })\r\n            .map(function (item) {\r\n            var key = item.key;\r\n            _this.actions[key] = item.callback;\r\n            var generatedContextTemplateUrl;\r\n            if (item.contextTemplate) {\r\n                generatedContextTemplateUrl =\r\n                    'toolbarItemContextTemplate' +\r\n                        btoa(stringUtils.generateIdentifier()) +\r\n                        '.html';\r\n                _this.$templateCache.put(generatedContextTemplateUrl, item.contextTemplate);\r\n            }\r\n            else {\r\n                generatedContextTemplateUrl = item.contextTemplateUrl;\r\n            }\r\n            var toolbarItem = {\r\n                key: key,\r\n                name: item.nameI18nKey,\r\n                iconClassName: item.iconClassName,\r\n                description: item.descriptionI18nKey,\r\n                icons: item.icons,\r\n                type: item.type,\r\n                include: item.include,\r\n                priority: item.priority || 500,\r\n                section: item.section || 'left',\r\n                isOpen: false,\r\n                component: item.component,\r\n                actionButtonFormat: item.actionButtonFormat,\r\n                keepAliveOnClose: item.keepAliveOnClose || false,\r\n                contextTemplateUrl: generatedContextTemplateUrl,\r\n                contextComponent: item.contextComponent,\r\n                dropdownPosition: item.dropdownPosition,\r\n                permissions: item.permissions\r\n            };\r\n            return _this._populateIsPermissionGranted(toolbarItem);\r\n        });\r\n        return Promise.all(promisesToResolve).then(function (items) {\r\n            if (items.length > 0) {\r\n                _this.addAliases(items);\r\n            }\r\n            return;\r\n        });\r\n    };\r\n    IToolbarService.prototype._populateIsPermissionGranted = function (toolbarItem) {\r\n        if (toolbarItem.permissions) {\r\n            return Promise.resolve(this.permissionService\r\n                .isPermitted([\r\n                {\r\n                    names: toolbarItem.permissions\r\n                }\r\n            ])\r\n                .then(function (isGranted) {\r\n                toolbarItem.isPermissionGranted = isGranted;\r\n                return toolbarItem;\r\n            }));\r\n        }\r\n        else {\r\n            toolbarItem.isPermissionGranted = true;\r\n            return Promise.resolve(toolbarItem);\r\n        }\r\n    };\r\n    /// //////////////////////////////////\r\n    // Proxied Functions : these functions will be proxied if left unimplemented\r\n    /// //////////////////////////////////\r\n    IToolbarService.prototype.addAliases = function (items) {\r\n        'proxyFunction';\r\n        return;\r\n    };\r\n    IToolbarService.prototype.removeItemByKey = function (key) {\r\n        'proxyFunction';\r\n        return;\r\n    };\r\n    IToolbarService.prototype._removeItemOnInner = function (itemKey) {\r\n        'proxyFunction';\r\n        return;\r\n    };\r\n    IToolbarService.prototype.removeAliasByKey = function (itemKey) {\r\n        'proxyFunction';\r\n        return;\r\n    };\r\n    IToolbarService.prototype.triggerActionOnInner = function (action) {\r\n        'proxyFunction';\r\n        return;\r\n    };\r\n    return IToolbarService;\r\n}());\r\nexport { IToolbarService };\r\n//# sourceMappingURL=IToolbarService.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/dtos/index.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/services/interfaces/index.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/utils/StringUtils.ts"],"map":"{\"version\":3,\"file\":\"IToolbarService.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/services/IToolbarService.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/services/IToolbarService.d.ts","writeByteOrderMark":false,"text":"/// <reference types=\"angular\" />\r\nimport { InjectionToken, Type } from '@angular/core';\r\nimport { LogService } from '@smart/utils';\r\nimport { TypedMap } from 'smarteditcommons/dtos';\r\nimport { IPermissionService, IPrioritized } from 'smarteditcommons/services/interfaces';\r\nexport declare const TOOLBAR_ITEM: InjectionToken<ToolbarItemInternal>;\r\nexport declare enum ToolbarItemType {\r\n    TEMPLATE = \"TEMPLATE\",\r\n    ACTION = \"ACTION\",\r\n    HYBRID_ACTION = \"HYBRID_ACTION\"\r\n}\r\nexport declare enum ToolbarSection {\r\n    left = \"left\",\r\n    middle = \"middle\",\r\n    right = \"right\"\r\n}\r\nexport declare enum ToolbarDropDownPosition {\r\n    left = \"left\",\r\n    center = \"center\",\r\n    right = \"right\"\r\n}\r\nexport interface CoreToolbarItemDefinition extends IPrioritized {\r\n    /** Unique identifier of the toolbar action item. */\r\n    key: string;\r\n    type: ToolbarItemType;\r\n    /** List of image URLs for the icon images (only for ACTION and HYBRID_ACTION) */\r\n    icons?: string[];\r\n    /**\r\n     * **Deprecated since 2005, use [component]{@link CoreToolbarItemDefinition#component}.**\r\n     *\r\n     * HTML template URL (only for TEMPLATE and HYBRID_ACTION)\r\n     * @deprecated\r\n     */\r\n    include?: string;\r\n    /** Component rendered within a toolbar */\r\n    component?: Type<any>;\r\n    /** Determines the sections(left, middle or right) of the item in the toolbar. */\r\n    section?: ToolbarSection;\r\n    /** List of classes used to display icons from fonts. */\r\n    iconClassName?: string;\r\n    /** Formats the button in compact/header-toolbar manner if 'compact' param is passed */\r\n    actionButtonFormat?: string;\r\n    /** Keeps the dropdown content in the DOM on close. */\r\n    keepAliveOnClose?: boolean;\r\n    /** **Deprecated since 2005, use [contextComponent]{@link CoreToolbarItemDefinition#contextComponent}.**\r\n     *\r\n     * Context template that needs to be displayed for the toolbar item.\r\n     * @deprecated\r\n     */\r\n    contextTemplate?: string;\r\n    /**\r\n     * **Deprecated since 2005, use [contextComponent]{@link CoreToolbarItemDefinition#contextComponent}.**\r\n     *\r\n     * The path to the context template that needs to be displayed for the toolbar item.\r\n     * @deprecated\r\n     */\r\n    contextTemplateUrl?: string;\r\n    /** The context component that needs to be displayed for the toolbar item. */\r\n    contextComponent?: Type<any>;\r\n    /** Arranges the dropdown in either of these left/center/right positions. */\r\n    dropdownPosition?: ToolbarDropDownPosition;\r\n    /** List of permission names used to determine whether to show or hide the toolbar item. */\r\n    permissions?: string[];\r\n}\r\nexport interface ToolbarItemDefinition extends CoreToolbarItemDefinition {\r\n    /** Callback triggered when this toolbar action item is clicked. */\r\n    callback?: () => void;\r\n    /** Description translation key */\r\n    descriptionI18nKey?: string;\r\n    /** Name translation key */\r\n    nameI18nKey?: string;\r\n    /** Determines the position of the item in the toolbar, ranging from 0-1000 with the default priority being 500. */\r\n    priority?: number;\r\n}\r\nexport interface ToolbarItemInternal extends CoreToolbarItemDefinition {\r\n    description: string;\r\n    name: string;\r\n    isOpen: boolean;\r\n    isPermissionGranted: boolean;\r\n    priority?: number;\r\n}\r\n/**\r\n * Provides an abstract extensible toolbar service. Used to manage and perform actions to either the SmartEdit\r\n * application or the SmartEdit container.\r\n *\r\n * This class serves as an interface and should be extended, not instantiated.\r\n */\r\nexport declare abstract class IToolbarService {\r\n    protected logService: LogService;\r\n    private $templateCache;\r\n    private permissionService;\r\n    protected aliases: ToolbarItemInternal[];\r\n    protected actions: TypedMap<() => void>;\r\n    constructor(logService: LogService, $templateCache: angular.ITemplateCacheService, permissionService: IPermissionService);\r\n    getActions(): TypedMap<() => void>;\r\n    getAliases(): ToolbarItemInternal[];\r\n    /**\r\n     * Takes an array of items and maps them internally for display and trigger through an internal callback key.\r\n     * The action's properties are made available through the included template by a variable named 'item'.\r\n     *\r\n     * The toolbar item can accept a context that is displayed beside the toolbar item using either ContextTemplate or ContextTemplateUrl.\r\n     * This context can be shown or hidden by calling the events `seConstantsModule.SHOW_TOOLBAR_ITEM_CONTEXT` and\r\n     * `seConstantsModule.HIDE_TOOLBAR_ITEM_CONTEXT` respectively. Both the events need the key of the toolbar item as data.\r\n     *\r\n     * ### Example\r\n     *\r\n     *      crossFrameEventService.publish(SHOW_TOOLBAR_ITEM_CONTEXT, 'toolbar.item.key');\r\n     *\r\n     */\r\n    addItems(_items: ToolbarItemDefinition[]): Promise<void>;\r\n    _populateIsPermissionGranted(toolbarItem: ToolbarItemInternal): Promise<ToolbarItemInternal>;\r\n    addAliases(items: ToolbarItemInternal[]): void;\r\n    removeItemByKey(key: string): void;\r\n    _removeItemOnInner(itemKey: string): void;\r\n    removeAliasByKey(itemKey: string): void;\r\n    triggerActionOnInner(action: {\r\n        key: string;\r\n    }): void;\r\n}\r\n"}}
