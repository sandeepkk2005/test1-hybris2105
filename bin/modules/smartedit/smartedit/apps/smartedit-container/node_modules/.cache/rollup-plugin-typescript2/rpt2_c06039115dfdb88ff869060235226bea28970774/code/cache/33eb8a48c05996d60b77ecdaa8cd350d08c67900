{"code":"import { __assign, __decorate, __metadata } from \"tslib\";\r\nimport { ChangeDetectionStrategy, Component } from '@angular/core';\r\nimport { isEqual } from 'lodash';\r\nimport { from } from 'rxjs';\r\nimport { take } from 'rxjs/operators';\r\nimport { FundamentalModalButtonAction, FundamentalModalButtonStyle, FundamentalModalManagerService, SystemEventService } from 'smarteditcommons';\r\nimport { MULTI_PRODUCT_CATALOGS_UPDATED } from '../types';\r\nimport './MultiProductCatalogVersionConfigurationComponent.scss';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"MultiProductCatalogVersionConfigurationComponent\", {\r\n    selector: 'se-multi-product-catalog-version-configuration',\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n    host: {\r\n        '[class.se-multi-product-catalog-version-configuration]': 'true'\r\n    },\r\n    template: \"<div class=\\\"form-group se-multi-product-catalog-version-selector__label\\\">{{'se.product.catalogs.multiple.list.header' | translate}}</div><div class=\\\"se-multi-product-catalog-version-selector__catalog form-group\\\" *ngFor=\\\"let productCatalog of productCatalogs\\\"><label class=\\\"se-control-label se-multi-product-catalog-version-selector__catalog-name\\\" id=\\\"{{ productCatalog.catalogId }}-label\\\">{{ productCatalog.name | seL10n | async }}</label><div class=\\\"se-multi-product-catalog-version-selector__catalog-version\\\"><se-select [id]=\\\"productCatalog.catalogId\\\" [(model)]=\\\"productCatalog.selectedItem\\\" [onChange]=\\\"updateModel()\\\" [fetchStrategy]=\\\"productCatalog.fetchStrategy\\\"></se-select></div></div>\"\r\n});\r\nvar MultiProductCatalogVersionConfigurationComponent = /** @class */ (function () {\r\n    function MultiProductCatalogVersionConfigurationComponent(modalManager, systemEventService) {\r\n        this.modalManager = modalManager;\r\n        this.systemEventService = systemEventService;\r\n        this.doneButtonId = 'done';\r\n    }\r\n    MultiProductCatalogVersionConfigurationComponent.prototype.ngOnInit = function () {\r\n        var _this = this;\r\n        this.modalManager\r\n            .getModalData()\r\n            .pipe(take(1))\r\n            .subscribe(function (data) {\r\n            _this.selectedCatalogVersions = data.selectedCatalogVersions;\r\n            _this.productCatalogs = data.productCatalogs.map(function (productCatalog) {\r\n                var versions = productCatalog.versions.map(function (version) { return (__assign(__assign({}, version), { id: version.uuid, label: version.version })); });\r\n                return __assign(__assign({}, productCatalog), { versions: versions, fetchStrategy: {\r\n                        fetchAll: function () {\r\n                            return Promise.resolve(versions);\r\n                        }\r\n                    }, selectedItem: productCatalog.versions.find(function (version) {\r\n                        return _this.selectedCatalogVersions.includes(version.uuid);\r\n                    }).uuid });\r\n            });\r\n        });\r\n        this.modalManager.setDismissCallback(function () { return _this.onCancel(); });\r\n        this.modalManager.addButtons([\r\n            {\r\n                id: 'cancel',\r\n                label: 'se.confirmation.modal.cancel',\r\n                style: FundamentalModalButtonStyle.Default,\r\n                action: FundamentalModalButtonAction.Dismiss,\r\n                callback: function () { return from(_this.onCancel()); }\r\n            },\r\n            {\r\n                id: this.doneButtonId,\r\n                label: 'se.confirmation.modal.done',\r\n                style: FundamentalModalButtonStyle.Primary,\r\n                action: FundamentalModalButtonAction.None,\r\n                disabled: true,\r\n                callback: function () { return from(_this.onSave()); }\r\n            }\r\n        ]);\r\n    };\r\n    MultiProductCatalogVersionConfigurationComponent.prototype.updateModel = function () {\r\n        var _this = this;\r\n        return function () {\r\n            var selectedVersions = _this.productCatalogs.map(function (productCatalog) { return productCatalog.selectedItem; });\r\n            _this.updateSelection(selectedVersions);\r\n        };\r\n    };\r\n    MultiProductCatalogVersionConfigurationComponent.prototype.updateSelection = function (updatedSelectedVersions) {\r\n        if (!isEqual(updatedSelectedVersions, this.selectedCatalogVersions)) {\r\n            this.updatedCatalogVersions = updatedSelectedVersions;\r\n            this.modalManager.enableButton(this.doneButtonId);\r\n        }\r\n        else {\r\n            this.modalManager.disableButton(this.doneButtonId);\r\n        }\r\n    };\r\n    MultiProductCatalogVersionConfigurationComponent.prototype.onCancel = function () {\r\n        this.modalManager.close(null);\r\n        return Promise.resolve();\r\n    };\r\n    MultiProductCatalogVersionConfigurationComponent.prototype.onSave = function () {\r\n        this.systemEventService.publishAsync(MULTI_PRODUCT_CATALOGS_UPDATED, this.updatedCatalogVersions);\r\n        this.modalManager.close(null);\r\n        return Promise.resolve();\r\n    };\r\n    MultiProductCatalogVersionConfigurationComponent = __decorate([\r\n        Component({\r\n            selector: 'se-multi-product-catalog-version-configuration',\r\n            changeDetection: ChangeDetectionStrategy.OnPush,\r\n            host: {\r\n                '[class.se-multi-product-catalog-version-configuration]': 'true'\r\n            },\r\n            template: \"<div class=\\\"form-group se-multi-product-catalog-version-selector__label\\\">{{'se.product.catalogs.multiple.list.header' | translate}}</div><div class=\\\"se-multi-product-catalog-version-selector__catalog form-group\\\" *ngFor=\\\"let productCatalog of productCatalogs\\\"><label class=\\\"se-control-label se-multi-product-catalog-version-selector__catalog-name\\\" id=\\\"{{ productCatalog.catalogId }}-label\\\">{{ productCatalog.name | seL10n | async }}</label><div class=\\\"se-multi-product-catalog-version-selector__catalog-version\\\"><se-select [id]=\\\"productCatalog.catalogId\\\" [(model)]=\\\"productCatalog.selectedItem\\\" [onChange]=\\\"updateModel()\\\" [fetchStrategy]=\\\"productCatalog.fetchStrategy\\\"></se-select></div></div>\"\r\n        }),\r\n        __metadata(\"design:paramtypes\", [FundamentalModalManagerService,\r\n            SystemEventService])\r\n    ], MultiProductCatalogVersionConfigurationComponent);\r\n    return MultiProductCatalogVersionConfigurationComponent;\r\n}());\r\nexport { MultiProductCatalogVersionConfigurationComponent };\r\n//# sourceMappingURL=MultiProductCatalogVersionConfigurationComponent.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@types/lodash@4.14.159/node_modules/@types/lodash/ts3.1/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/rxjs@6.5.4/node_modules/rxjs/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/rxjs@6.5.4/node_modules/rxjs/operators/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-container/src/components/productCatalogVersion/types.ts"],"map":"{\"version\":3,\"file\":\"MultiProductCatalogVersionConfigurationComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/components/productCatalogVersion/multiProductCatalogVersionConfiguration/MultiProductCatalogVersionConfigurationComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-container/components/productCatalogVersion/multiProductCatalogVersionConfiguration/MultiProductCatalogVersionConfigurationComponent.d.ts","writeByteOrderMark":false,"text":"import { OnInit } from '@angular/core';\r\nimport { FundamentalModalManagerService, SelectOnChange, SystemEventService } from 'smarteditcommons';\r\nimport { SelectAdaptedCatalog } from '../types';\r\nimport './MultiProductCatalogVersionConfigurationComponent.scss';\r\nexport declare class MultiProductCatalogVersionConfigurationComponent implements OnInit {\r\n    private modalManager;\r\n    private systemEventService;\r\n    productCatalogs: SelectAdaptedCatalog[];\r\n    selectedCatalogVersions: string[];\r\n    updatedCatalogVersions: string[];\r\n    private readonly doneButtonId;\r\n    constructor(modalManager: FundamentalModalManagerService, systemEventService: SystemEventService);\r\n    ngOnInit(): void;\r\n    updateModel(): SelectOnChange;\r\n    private updateSelection;\r\n    private onCancel;\r\n    private onSave;\r\n}\r\n"}}
