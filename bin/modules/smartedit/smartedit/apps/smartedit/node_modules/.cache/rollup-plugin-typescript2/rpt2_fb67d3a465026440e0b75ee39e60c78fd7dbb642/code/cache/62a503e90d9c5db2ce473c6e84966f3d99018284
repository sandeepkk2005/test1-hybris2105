{"code":"import { __decorate, __extends, __metadata, __param } from \"tslib\";\r\n/*\r\n * Copyright (c) 2021 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { Inject } from '@angular/core';\r\nimport { GatewayProxied, IPageInfoService, LogService, SeDowngradeService, YJQUERY_TOKEN } from 'smarteditcommons';\r\n/** @internal */\r\nvar /* @ngInject */ PageInfoService = /** @class */ (function (_super) {\r\n    __extends(/* @ngInject */ PageInfoService, _super);\r\n    /* @internal */\r\n    function /* @ngInject */ PageInfoService(yjQuery, logService) {\r\n        var _this = _super.call(this) || this;\r\n        _this.yjQuery = yjQuery;\r\n        _this.logService = logService;\r\n        return _this;\r\n    }\r\n    /* @ngInject */ PageInfoService_1 = /* @ngInject */ PageInfoService;\r\n    /**\r\n     * When the time comes to deprecate these 3 functions from componentHandlerService in the inner app, we will need\r\n     * to migrate their implementations to here.\r\n     */\r\n    /* @ngInject */ PageInfoService.prototype.getPageUID = function () {\r\n        var _this = this;\r\n        return this.try(function () {\r\n            return _this.getBodyClassAttributeByRegEx(/* @ngInject */ PageInfoService_1.PATTERN_SMARTEDIT_PAGE_UID);\r\n        });\r\n    };\r\n    /* @ngInject */ PageInfoService.prototype.getPageUUID = function () {\r\n        var _this = this;\r\n        return this.try(function () {\r\n            return _this.getBodyClassAttributeByRegEx(/* @ngInject */ PageInfoService_1.PATTERN_SMARTEDIT_PAGE_UUID);\r\n        });\r\n    };\r\n    /* @ngInject */ PageInfoService.prototype.getCatalogVersionUUIDFromPage = function () {\r\n        var _this = this;\r\n        return this.try(function () {\r\n            return _this.getBodyClassAttributeByRegEx(/* @ngInject */ PageInfoService_1.PATTERN_SMARTEDIT_CATALOG_VERSION_UUID);\r\n        });\r\n    };\r\n    /**\r\n     * @param pattern Pattern of class names to search for\r\n     *\r\n     * @returns  Class attributes from the body element of the storefront\r\n     */\r\n    /* @ngInject */ PageInfoService.prototype.getBodyClassAttributeByRegEx = function (pattern) {\r\n        try {\r\n            var bodyClass = this.yjQuery('body').attr('class');\r\n            return pattern.exec(bodyClass)[1];\r\n        }\r\n        catch (_a) {\r\n            throw {\r\n                name: 'InvalidStorefrontPageError',\r\n                message: 'Error: the page is not a valid storefront page.'\r\n            };\r\n        }\r\n    };\r\n    /** @internal */\r\n    /* @ngInject */ PageInfoService.prototype.try = function (func) {\r\n        try {\r\n            return Promise.resolve(func());\r\n        }\r\n        catch (e) {\r\n            this.logService.warn('Missing SmartEdit attributes on body element of the storefront - SmartEdit will resume once the attributes are added');\r\n            return Promise.reject(e);\r\n        }\r\n    };\r\n    var /* @ngInject */ PageInfoService_1;\r\n    /* @ngInject */ PageInfoService.PATTERN_SMARTEDIT_CATALOG_VERSION_UUID = /smartedit-catalog-version-uuid\\-(\\S+)/;\r\n    /* @ngInject */ PageInfoService.PATTERN_SMARTEDIT_PAGE_UID = /smartedit-page-uid\\-(\\S+)/;\r\n    /* @ngInject */ PageInfoService.PATTERN_SMARTEDIT_PAGE_UUID = /smartedit-page-uuid\\-(\\S+)/;\r\n    /* @ngInject */ PageInfoService = /* @ngInject */ PageInfoService_1 = __decorate([\r\n        SeDowngradeService(IPageInfoService),\r\n        GatewayProxied('getPageUID', 'getPageUUID', 'getCatalogVersionUUIDFromPage'),\r\n        __param(0, Inject(YJQUERY_TOKEN)),\r\n        __metadata(\"design:paramtypes\", [Function, LogService])\r\n    ], /* @ngInject */ PageInfoService);\r\n    return /* @ngInject */ PageInfoService;\r\n}(IPageInfoService));\r\nexport { /* @ngInject */ PageInfoService };\r\n//# sourceMappingURL=PageInfoServiceInner.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts"],"map":"{\"version\":3,\"file\":\"PageInfoServiceInner.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/services/PageInfoServiceInner.ts\"],\"names\":[],\"mappings\":\";AAAA;;GAEG;AACH,OAAO,EAAE,MAAM,EAAE,MAAM,eAAe,CAAC;AACvC,OAAO,EACH,cAAc,EACd,gBAAgB,EAChB,UAAU,EACV,kBAAkB,EAClB,aAAa,EAChB,MAAM,kBAAkB,CAAC;AAE1B,gBAAgB;AAGhB;IAAqC,mDAAgB;IAOjD,eAAe;IACf,yCACmC,OAAqB,EAC5C,UAAsB;QAFlC,YAII,iBAAO,SACV;QAJkC,aAAO,GAAP,OAAO,CAAc;QAC5C,gBAAU,GAAV,UAAU,CAAY;;IAGlC,CAAC;;IAED;;;OAGG;IAEH,oDAAU,GAAV;QAAA,iBAIC;QAHG,OAAO,IAAI,CAAC,GAAG,CAAC;YACZ,OAAA,KAAI,CAAC,4BAA4B,CAAC,iCAAe,CAAC,0BAA0B,CAAC;QAA7E,CAA6E,CAChF,CAAC;IACN,CAAC;IAED,qDAAW,GAAX;QAAA,iBAIC;QAHG,OAAO,IAAI,CAAC,GAAG,CAAC;YACZ,OAAA,KAAI,CAAC,4BAA4B,CAAC,iCAAe,CAAC,2BAA2B,CAAC;QAA9E,CAA8E,CACjF,CAAC;IACN,CAAC;IAED,uEAA6B,GAA7B;QAAA,iBAMC;QALG,OAAO,IAAI,CAAC,GAAG,CAAC;YACZ,OAAA,KAAI,CAAC,4BAA4B,CAC7B,iCAAe,CAAC,sCAAsC,CACzD;QAFD,CAEC,CACJ,CAAC;IACN,CAAC;IAED;;;;OAIG;IACH,sEAA4B,GAA5B,UAA6B,OAAe;QACxC,IAAI;YACA,IAAM,SAAS,GAAW,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YAC7D,OAAO,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;SACrC;QAAC,WAAM;YACJ,MAAM;gBACF,IAAI,EAAE,4BAA4B;gBAClC,OAAO,EAAE,iDAAiD;aAC7D,CAAC;SACL;IACL,CAAC;IAED,gBAAgB;IAChB,6CAAG,GAAH,UAAI,IAAkB;QAClB,IAAI;YACA,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,CAAC;SAClC;QAAC,OAAO,CAAC,EAAE;YACR,IAAI,CAAC,UAAU,CAAC,IAAI,CAChB,sHAAsH,CACzH,CAAC;YACF,OAAO,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;SAC5B;IACL,CAAC;;IAlEa,sEAAsC,GAAG,uCAAuC,CAAC;IAEhF,0DAA0B,GAAG,2BAA2B,CAAC;IAEzD,2DAA2B,GAAG,4BAA4B,CAAC;IAL9E;QAFC,kBAAkB,CAAC,gBAAgB,CAAC;QACpC,cAAc,CAAC,YAAY,EAAE,aAAa,EAAE,+BAA+B,CAAC;QAUpE,WAAA,MAAM,CAAC,aAAa,CAAC,CAAA;mDACF,UAAU;uCA0DrC;IAAD,sCAAC;CAAA,AApED,CAAqC,gBAAgB,GAoEpD\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit/services/PageInfoServiceInner.d.ts","writeByteOrderMark":false,"text":"/// <reference types=\"angular\" />\r\n/// <reference types=\"jquery\" />\r\nimport { IPageInfoService, LogService } from 'smarteditcommons';\r\n/** @internal */\r\nexport declare class PageInfoService extends IPageInfoService {\r\n    private yjQuery;\r\n    private logService;\r\n    static PATTERN_SMARTEDIT_CATALOG_VERSION_UUID: RegExp;\r\n    private static PATTERN_SMARTEDIT_PAGE_UID;\r\n    private static PATTERN_SMARTEDIT_PAGE_UUID;\r\n    constructor(yjQuery: JQueryStatic, logService: LogService);\r\n    /**\r\n     * When the time comes to deprecate these 3 functions from componentHandlerService in the inner app, we will need\r\n     * to migrate their implementations to here.\r\n     */\r\n    getPageUID(): Promise<string>;\r\n    getPageUUID(): Promise<string>;\r\n    getCatalogVersionUUIDFromPage(): Promise<string>;\r\n    /**\r\n     * @param pattern Pattern of class names to search for\r\n     *\r\n     * @returns  Class attributes from the body element of the storefront\r\n     */\r\n    getBodyClassAttributeByRegEx(pattern: RegExp): string;\r\n    /** @internal */\r\n    try(func: () => string): Promise<string>;\r\n}\r\n"}}
