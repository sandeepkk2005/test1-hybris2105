{"code":"import { __awaiter, __decorate, __extends, __generator, __metadata } from \"tslib\";\r\n/*\r\n * Copyright (c) 2021 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { Injectable } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport * as lodash from 'lodash';\r\nimport { CONTEXT_SITE_ID, DropdownPopulatorInterface, ICatalogService, LanguageService, OptionsDropdownPopulator } from 'smarteditcommons';\r\nvar /* @ngInject */ ProductCatalogDropdownPopulator = /** @class */ (function (_super) {\r\n    __extends(/* @ngInject */ ProductCatalogDropdownPopulator, _super);\r\n    function /* @ngInject */ ProductCatalogDropdownPopulator(catalogService, languageService, optionsDropdownPopulator, translateService) {\r\n        var _this = _super.call(this, lodash, languageService, translateService) || this;\r\n        _this.catalogService = catalogService;\r\n        _this.optionsDropdownPopulator = optionsDropdownPopulator;\r\n        return _this;\r\n    }\r\n    /* @ngInject */ ProductCatalogDropdownPopulator.prototype.fetchAll = function (payload) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var catalogs;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.catalogService.getProductCatalogsBySiteKey(CONTEXT_SITE_ID)];\r\n                    case 1:\r\n                        catalogs = _a.sent();\r\n                        payload.field.options = catalogs.filter(function (catalog) {\r\n                            return _this.hasCatalogOneActiveVersion(catalog);\r\n                        });\r\n                        return [2 /*return*/, this.optionsDropdownPopulator.fetchAll(payload)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* @ngInject */ ProductCatalogDropdownPopulator.prototype.isPaged = function () {\r\n        return false;\r\n    };\r\n    /* @ngInject */ ProductCatalogDropdownPopulator.prototype.hasCatalogOneActiveVersion = function (catalog) {\r\n        var activeVersions = catalog.versions.filter(function (version) { return version.active === true; });\r\n        return activeVersions.length === 1;\r\n    };\r\n    /* @ngInject */ ProductCatalogDropdownPopulator = __decorate([\r\n        Injectable(),\r\n        __metadata(\"design:paramtypes\", [ICatalogService,\r\n            LanguageService,\r\n            OptionsDropdownPopulator,\r\n            TranslateService])\r\n    ], /* @ngInject */ ProductCatalogDropdownPopulator);\r\n    return /* @ngInject */ ProductCatalogDropdownPopulator;\r\n}(DropdownPopulatorInterface));\r\nexport { /* @ngInject */ ProductCatalogDropdownPopulator };\r\n//# sourceMappingURL=ProductCatalogDropdownPopulator.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@ngx-translate/core@11.0.1_@angular+core@8.2.14+rxjs@6.5.4/node_modules/@ngx-translate/core/ngx-translate-core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@types/lodash@4.14.159/node_modules/@types/lodash/ts3.1/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts"],"map":"{\"version\":3,\"file\":\"ProductCatalogDropdownPopulator.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/components/genericEditor/dropdownPopulators/ProductCatalogDropdownPopulator.ts\"],\"names\":[],\"mappings\":\";AAAA;;GAEG;AACH,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AAC3C,OAAO,EAAE,gBAAgB,EAAE,MAAM,qBAAqB,CAAC;AACvD,OAAO,KAAK,MAAM,MAAM,QAAQ,CAAC;AACjC,OAAO,EACH,eAAe,EACf,0BAA0B,EAI1B,eAAe,EACf,eAAe,EACf,wBAAwB,EAC3B,MAAM,kBAAkB,CAAC;AAG1B;IAAqD,mEAA0B;IAC3E,yDACY,cAA+B,EACvC,eAAgC,EACxB,wBAAkD,EAC1D,gBAAkC;QAJtC,YAMI,kBAAM,MAAM,EAAE,eAAe,EAAE,gBAAgB,CAAC,SACnD;QANW,oBAAc,GAAd,cAAc,CAAiB;QAE/B,8BAAwB,GAAxB,wBAAwB,CAA0B;;IAI9D,CAAC;IAEY,kEAAQ,GAArB,UAAsB,OAAiC;;;;;;4BAClC,qBAAM,IAAI,CAAC,cAAc,CAAC,2BAA2B,CAAC,eAAe,CAAC,EAAA;;wBAAjF,QAAQ,GAAG,SAAsE;wBAEvF,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,QAAQ,CAAC,MAAM,CAAC,UAAC,OAAO;4BAC5C,OAAA,KAAI,CAAC,0BAA0B,CAAC,OAAO,CAAC;wBAAxC,CAAwC,CAC3C,CAAC;wBACF,sBAAO,IAAI,CAAC,wBAAwB,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAC;;;;KAC1D;IAEM,iEAAO,GAAd;QACI,OAAO,KAAK,CAAC;IACjB,CAAC;IAEO,oFAA0B,GAAlC,UAAmC,OAAqB;QACpD,IAAM,cAAc,GAAG,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAC,OAAO,IAAK,OAAA,OAAO,CAAC,MAAM,KAAK,IAAI,EAAvB,CAAuB,CAAC,CAAC;QACrF,OAAO,cAAc,CAAC,MAAM,KAAK,CAAC,CAAC;IACvC,CAAC;IA1BL;QADC,UAAU,EAAE;yCAGmB,eAAe;YACtB,eAAe;YACE,wBAAwB;YACxC,gBAAgB;uDAsBzC;IAAD,sDAAC;CAAA,AA3BD,CAAqD,0BAA0B,GA2B9E\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/components/genericEditor/dropdownPopulators/ProductCatalogDropdownPopulator.d.ts","writeByteOrderMark":false,"text":"import { TranslateService } from '@ngx-translate/core';\r\nimport { DropdownPopulatorInterface, DropdownPopulatorPayload, GenericEditorOption, ICatalogService, LanguageService, OptionsDropdownPopulator } from 'smarteditcommons';\r\nexport declare class ProductCatalogDropdownPopulator extends DropdownPopulatorInterface {\r\n    private catalogService;\r\n    private optionsDropdownPopulator;\r\n    constructor(catalogService: ICatalogService, languageService: LanguageService, optionsDropdownPopulator: OptionsDropdownPopulator, translateService: TranslateService);\r\n    fetchAll(payload: DropdownPopulatorPayload): Promise<GenericEditorOption[]>;\r\n    isPaged(): boolean;\r\n    private hasCatalogOneActiveVersion;\r\n}\r\n"}}
