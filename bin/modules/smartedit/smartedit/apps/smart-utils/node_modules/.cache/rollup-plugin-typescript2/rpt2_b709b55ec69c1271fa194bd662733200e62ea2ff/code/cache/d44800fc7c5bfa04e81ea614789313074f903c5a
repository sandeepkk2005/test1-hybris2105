{"code":"import { __assign, __decorate, __metadata, __spreadArrays } from \"tslib\";\r\n/*\r\n * Copyright (c) 2021 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\n/**\r\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n * @module smartutils\r\n */\r\n/*\r\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { Injectable } from '@angular/core';\r\nimport { ModalRef } from '@fundamental-ngx/core';\r\nimport { noop } from 'lodash';\r\nimport { of, BehaviorSubject } from 'rxjs';\r\nimport { take } from 'rxjs/operators';\r\nimport { FundamentalModalButtonAction } from '../../interfaces';\r\n/**\r\n * Allows to perform operations on a Modal Component such as adding the buttons or getting the modal data.\r\n * It must be injected into a Custom Modal Component.\r\n *\r\n * The Custom Modal Component is rendered by {@link FundamentalModalTemplateComponent}.\r\n * A Service or a Component that opens the Modal Component must provide\r\n * [component]{@link IFundamentalModalConfig#component} and [templateConfig]{@link IFundamentalModalConfig#templateConfig}.\r\n *\r\n *\r\n * ### Example of a Service or Component that opens the modal\r\n *\r\n *      this.modalService.open({\r\n *           component: YourCustomModalComponent,\r\n *               templateConfig: {\r\n *               title: 'se.cms.synchronization.pagelist.modal.title.prefix',\r\n *               titleSuffix: 'se.cms.pageeditormodal.editpagetab.title'\r\n *           },\r\n *           data: {\r\n *               propA: 'valA'\r\n *           }\r\n *      });\r\n *\r\n * ### Example of YourCustomModalComponent\r\n *\r\n *      export class YourCustomModalComponent implements OnInit {\r\n *          constructor(private modalManager: FundamentalModalManagerService) {}\r\n *\r\n *          ngOnInit(): void {\r\n *              this.modalManager.addButtons([]);\r\n *              this.modalManager.getModalData().pipe(take(1)).subscribe(({propA}) => { console.log(propA) });\r\n *          }\r\n *      }\r\n *\r\n */\r\nvar FundamentalModalManagerService = /** @class */ (function () {\r\n    function FundamentalModalManagerService(modalRef) {\r\n        this.modalRef = modalRef;\r\n        this.title = new BehaviorSubject('');\r\n        this.titleSuffix = new BehaviorSubject('');\r\n        this.modalData = new BehaviorSubject({});\r\n        this.component = new BehaviorSubject(undefined);\r\n        this.isDismissButtonVisible = new BehaviorSubject(false);\r\n        this.buttons = new BehaviorSubject([]);\r\n    }\r\n    FundamentalModalManagerService.prototype.init = function () {\r\n        this.modalData.next(this.modalRef.data.modalData);\r\n        this.component.next(this.modalRef.data.component);\r\n        this.buttons.next(this.modalRef.data.templateConfig.buttons || []);\r\n        this.title.next(this.modalRef.data.templateConfig.title || '');\r\n        this.titleSuffix.next(this.modalRef.data.templateConfig.titleSuffix || '');\r\n        this.isDismissButtonVisible.next(this.modalRef.data.templateConfig.isDismissButtonVisible);\r\n    };\r\n    // getters\r\n    FundamentalModalManagerService.prototype.getComponent = function () {\r\n        return this.component.asObservable();\r\n    };\r\n    FundamentalModalManagerService.prototype.getTitle = function () {\r\n        return this.title.asObservable();\r\n    };\r\n    FundamentalModalManagerService.prototype.getTitleSuffix = function () {\r\n        return this.titleSuffix.asObservable();\r\n    };\r\n    FundamentalModalManagerService.prototype.getButtons = function () {\r\n        return this.buttons.asObservable();\r\n    };\r\n    FundamentalModalManagerService.prototype.getModalData = function () {\r\n        return this.modalData.asObservable();\r\n    };\r\n    FundamentalModalManagerService.prototype.getIsDismissButtonVisible = function () {\r\n        return this.isDismissButtonVisible.asObservable();\r\n    };\r\n    // header dismiss button\r\n    FundamentalModalManagerService.prototype.setDismissButtonVisibility = function (isVisible) {\r\n        this.isDismissButtonVisible.next(isVisible);\r\n    };\r\n    FundamentalModalManagerService.prototype.setTitle = function (title) {\r\n        this.title.next(title);\r\n    };\r\n    /**\r\n     * Use this method for adding only one button.\r\n     *\r\n     * NOTE: For multiple buttons use `addButtons`.\r\n     */\r\n    FundamentalModalManagerService.prototype.addButton = function (button) {\r\n        var _this = this;\r\n        this.getButtonsValue().subscribe(function (buttons) {\r\n            var payload = __spreadArrays(buttons, [button]);\r\n            _this.buttons.next(payload);\r\n        });\r\n    };\r\n    FundamentalModalManagerService.prototype.addButtons = function (buttons) {\r\n        var _this = this;\r\n        this.getButtonsValue().subscribe(function (currentButtons) {\r\n            var payload = __spreadArrays(currentButtons, buttons);\r\n            _this.buttons.next(payload);\r\n        });\r\n    };\r\n    FundamentalModalManagerService.prototype.removeButton = function (id) {\r\n        var _this = this;\r\n        this.getButtonsValue().subscribe(function (buttons) {\r\n            var payload = buttons.filter(function (button) { return button.id !== id; });\r\n            _this.buttons.next(payload);\r\n        });\r\n    };\r\n    FundamentalModalManagerService.prototype.removeAllButtons = function () {\r\n        this.buttons.next([]);\r\n    };\r\n    FundamentalModalManagerService.prototype.disableButton = function (id) {\r\n        var _this = this;\r\n        this.getButtonsValue().subscribe(function (buttons) {\r\n            var payload = buttons.map(function (button) {\r\n                return button.id === id ? __assign(__assign({}, button), { disabled: true }) : button;\r\n            });\r\n            _this.buttons.next(payload);\r\n        });\r\n    };\r\n    FundamentalModalManagerService.prototype.setDismissCallback = function (callback) {\r\n        this.dismissCallback = callback;\r\n    };\r\n    FundamentalModalManagerService.prototype.enableButton = function (id) {\r\n        var _this = this;\r\n        this.getButtonsValue().subscribe(function (buttons) {\r\n            var payload = buttons.map(function (button) {\r\n                return button.id === id ? __assign(__assign({}, button), { disabled: false }) : button;\r\n            });\r\n            _this.buttons.next(payload);\r\n        });\r\n    };\r\n    FundamentalModalManagerService.prototype.onButtonClicked = function (button) {\r\n        var _this = this;\r\n        var callbackReturnedObservable = button.callback\r\n            ? button.callback()\r\n            : of(null);\r\n        if (button.action !== FundamentalModalButtonAction.None) {\r\n            callbackReturnedObservable.subscribe(function (data) {\r\n                return button.action === FundamentalModalButtonAction.Close\r\n                    ? _this.close(data)\r\n                    : _this.dismiss(data);\r\n            });\r\n        }\r\n    };\r\n    FundamentalModalManagerService.prototype.close = function (data) {\r\n        this.modalRef.close(data);\r\n    };\r\n    FundamentalModalManagerService.prototype.dismiss = function (data) {\r\n        var _this = this;\r\n        this.dismissCallback()\r\n            .then(function () { return _this.modalRef.dismiss(data); })\r\n            .catch(noop);\r\n    };\r\n    FundamentalModalManagerService.prototype.getButtonsValue = function () {\r\n        return this.buttons.pipe(take(1));\r\n    };\r\n    FundamentalModalManagerService.prototype.dismissCallback = function () {\r\n        return Promise.resolve();\r\n    };\r\n    FundamentalModalManagerService = __decorate([\r\n        Injectable(),\r\n        __metadata(\"design:paramtypes\", [ModalRef])\r\n    ], FundamentalModalManagerService);\r\n    return FundamentalModalManagerService;\r\n}());\r\nexport { FundamentalModalManagerService };\r\n//# sourceMappingURL=modal-manager.service.js.map","references":["/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular/core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@fundamental-ngx/core@0.13.2_9a9a80bb6ff375d99f90188f858ebbd5/node_modules/@fundamental-ngx/core/fundamental-ngx-core.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@types/lodash@4.14.159/node_modules/@types/lodash/ts3.1/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/rxjs@6.5.4/node_modules/rxjs/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/rxjs@6.5.4/node_modules/rxjs/operators/index.d.ts","/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/src/interfaces/index.ts"],"map":"{\"version\":3,\"file\":\"modal-manager.service.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/services/modal/modal-manager.service.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/sandeepkalpane/Data/hybris2105/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/services/modal/modal-manager.service.d.ts","writeByteOrderMark":false,"text":"/**\r\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n * @module smartutils\r\n */\r\nimport { Type } from '@angular/core';\r\nimport { ModalRef } from '@fundamental-ngx/core';\r\nimport { Observable } from 'rxjs';\r\nimport { IFundamentalModalButtonOptions } from '../../interfaces';\r\n/**\r\n * Allows to perform operations on a Modal Component such as adding the buttons or getting the modal data.\r\n * It must be injected into a Custom Modal Component.\r\n *\r\n * The Custom Modal Component is rendered by {@link FundamentalModalTemplateComponent}.\r\n * A Service or a Component that opens the Modal Component must provide\r\n * [component]{@link IFundamentalModalConfig#component} and [templateConfig]{@link IFundamentalModalConfig#templateConfig}.\r\n *\r\n *\r\n * ### Example of a Service or Component that opens the modal\r\n *\r\n *      this.modalService.open({\r\n *           component: YourCustomModalComponent,\r\n *               templateConfig: {\r\n *               title: 'se.cms.synchronization.pagelist.modal.title.prefix',\r\n *               titleSuffix: 'se.cms.pageeditormodal.editpagetab.title'\r\n *           },\r\n *           data: {\r\n *               propA: 'valA'\r\n *           }\r\n *      });\r\n *\r\n * ### Example of YourCustomModalComponent\r\n *\r\n *      export class YourCustomModalComponent implements OnInit {\r\n *          constructor(private modalManager: FundamentalModalManagerService) {}\r\n *\r\n *          ngOnInit(): void {\r\n *              this.modalManager.addButtons([]);\r\n *              this.modalManager.getModalData().pipe(take(1)).subscribe(({propA}) => { console.log(propA) });\r\n *          }\r\n *      }\r\n *\r\n */\r\nexport declare class FundamentalModalManagerService<T = any> {\r\n    private modalRef;\r\n    private title;\r\n    private titleSuffix;\r\n    private modalData;\r\n    private component;\r\n    private isDismissButtonVisible;\r\n    private buttons;\r\n    constructor(modalRef: ModalRef);\r\n    init(): void;\r\n    getComponent(): Observable<Type<any> | undefined>;\r\n    getTitle(): Observable<string>;\r\n    getTitleSuffix(): Observable<string>;\r\n    getButtons(): Observable<IFundamentalModalButtonOptions[]>;\r\n    getModalData(): Observable<T>;\r\n    getIsDismissButtonVisible(): Observable<boolean>;\r\n    setDismissButtonVisibility(isVisible: boolean): void;\r\n    setTitle(title: string): void;\r\n    /**\r\n     * Use this method for adding only one button.\r\n     *\r\n     * NOTE: For multiple buttons use `addButtons`.\r\n     */\r\n    addButton(button: IFundamentalModalButtonOptions): void;\r\n    addButtons(buttons: IFundamentalModalButtonOptions[]): void;\r\n    removeButton(id: string): void;\r\n    removeAllButtons(): void;\r\n    disableButton(id: string): void;\r\n    setDismissCallback(callback: () => Promise<any>): void;\r\n    enableButton(id: string): void;\r\n    onButtonClicked(button: IFundamentalModalButtonOptions): void;\r\n    close(data?: any): void;\r\n    dismiss(data?: any): void;\r\n    private getButtonsValue;\r\n    private dismissCallback;\r\n}\r\n"}}
